function submitForm(action,data,target,method){var form=document.createElement("form");if(document.body.appendChild(form),form.method=method||"post",form.action=action,target&&(form.target=target),data)for(var key in data){var input=document.createElement("input");input.type="hidden",input.value=void 0===data[key]?"":data[key],input.name=key,form.appendChild(input)}form.submit()}var factory={create:function(n,fn){var w=window;if(!("string"==typeof n&&n.length>0))return w;n=n.replace(/[\s\xA0]+/,"");for(var arr=n.split("."),i=0,l=arr.length;i<l;i++){var t=arr[i];t.length>0&&(w[t]||(w[t]=i==l-1?fn||{}:{}),w=w[t])}return w},isCreated:function(n){var w=window;if(!("string"==typeof n&&n.length>0))return!1;n=n.replace(/[\s\xA0]+/,"");for(var arr=n.split("."),i=0,l=arr.length;i<l;i++){var t=arr[i];if(t.length>0){if(!w[t])return!1;w=w[t]}}return!0}};!function($){function bindFixed(ele){var offsetTop=ele.offset().top+10;$("#cui_hd").length||(offsetTop+=59),scrollFixed(offsetTop,ele),fnOnResizeList.push([offsetTop,ele])}function scrollFixed(offsetTop,ele){var allow=ele.get(0).clientHeight<(window.innerHeight||document.documentElement.clientHeight),t=$(window).scrollTop();allow&&t>offsetTop&&!ele.data("isfixed")?(ele.data("isfixed",!0),ele.css({position:"fixed",width:"380px",top:"0px"})):(0==allow||t<=offsetTop&&ele.data("isfixed"))&&(ele.data("isfixed",!1),ele.css({position:"static"}))}var oldToDate=String.prototype.toDate;String.prototype.toDate=function(){return oldToDate.call(this.replace(/\//g,"-"))};var oldToDateTime=String.prototype.toDateTime;String.prototype.toDateTime=function(){return oldToDateTime.call(this.replace(/\//g,"-"))},cQuery.encodeHtml=function(html){return html?html.replace(/"/g,"&quot;").replace(/\\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):html},cQuery.decodeHtml=function(html){return html?html.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"):""},$.extend({propFix:{tabindex:"tabIndex",readonly:"readOnly",__for:"htmlFor",__class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},elemdisplay:[],dir:function(elem,dir,until){for(var matched=[],cur=elem[dir];cur&&9!==cur.nodeType&&(void 0===until||1!==cur.nodeType||!$(cur).is(until));)1===cur.nodeType&&matched.push(cur),cur=cur[dir];return matched},isNative:function(fn){return/^[^{]+\{\s*\[native code/.test(fn+"")},containsElement:function(a,b){return $(a).contains($(b))},isHidden:function(elem,el){return elem=el||elem,"none"===$(elem).css("display")||!$.containsElement(elem.ownerDocument,elem)},defaultDisplay:function(nodeName){var display=$.elemdisplay[nodeName];if(!display){var elem=document.createElement(nodeName);document.body.appendChild(elem);var display=$(elem).css("display");$(elem).remove(),$.elemdisplay[nodeName]=display}return display},showHide:function(elements,show){for(var display,elem,hidden,values=[],index=0,length=elements.length;index<length;index++)elem=elements[index],elem.style&&(values[index]=$(elem).data("olddisplay"),display=elem.style.display,show?(values[index]||"none"!==display||(elem.style.display=""),""===elem.style.display&&$.isHidden(elem)&&(values[index]=$.defaultDisplay(elem.nodeName),$(elem).data("olddisplay",values[index]))):values[index]||(hidden=$.isHidden(elem),(display&&"none"!==display||!hidden)&&(values[index]=hidden?display:$(elem).css("display"),$(elem).data("olddisplay",values[index]))));for(index=0;index<length;index++)elem=elements[index],elem.style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"));return elements},bodyWidth:function(){var scrollWidth,offsetWidth;return $.browser.isIE6?(scrollWidth=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),scrollWidth<offsetWidth?document.documentElement.clientWidth:scrollWidth):Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth)},bodyHeight:function(){var scrollHeight,offsetHeight;return $.browser.isIE6?(scrollHeight=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),offsetHeight=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),scrollHeight<offsetHeight?document.documentElement.clientHeight:scrollHeight):Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)},instance:function(str){if("string"==typeof str){if(new RegExp("<([a-zA-Z1-9]+)","i").test(str)){var wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]},tag=RegExp.$1;if(tag){var wrap=wrapMap[tag]||wrapMap._default,elem=document.createElement("div");elem.innerHTML=wrap[1]+str+wrap[2];var depth=wrap[0];try{for(var div=$(elem),instanceObj=div.childNodes();depth-- >0;)instanceObj=instanceObj.childNodes();return instanceObj}catch(ex){for(var res=[],obj=elem.childNodes,i=0,len=obj.length;i<len;i++)res.push(obj[i]);for(var instanceObj=cQuery.fn.pushStack(res);depth-- >0;)instanceObj=$(instanceObj[0].childNodes[0]);return instanceObj}}}}return null},htmlPrice:function(price,priceType){var p=Math.floor(price),temp=price+"";if(price<=p)return temp.split(".")[0];var s="";switch(priceType){case"SmallDecimalPoint":s=temp.split(".")[0]+"<span>."+temp.split(".")[1]+"</span>";break;default:s=Math.floor(10*price)/10}return s},dateDiff:function(date1,date2){var date1="string"==typeof date1?date1.toDateTime():date1,date2="string"==typeof date2?date2.toDateTime():date2,diffTimes=date2.getTime()-date1.getTime();return{days:Math.floor(diffTimes/864e5),hours:Math.floor(diffTimes/36e5),minutes:Math.floor(diffTimes/6e4),seconds:Math.floor(diffTimes/1e3),milliseconds:diffTimes}},cloneJSON:function(json){return $.copy(json,!0)},fromQuery:function(a,b){for(var c=a.split("&"),d={},f=0;f<c.length;f++){var h=c[f].split("=");1<h.length&&(d[h[0]]=b?b(h.slice(1).join("=")):h.slice(1).join("="))}return d},toQuery:function(a,b){var d,c=[];for(d in a)a.hasOwnProperty(d)&&c.push([d,b?b(a[d]):a[d]].join("="));return c.join("&")},getABTestResult:function(){for(var ret={},ab_testing_tracker=$("#ab_testing_tracker").value().split(";"),i=0;i<ab_testing_tracker.length;i++)if(""!=ab_testing_tracker[i]){var s=ab_testing_tracker[i].split(","),_data=null;s.length>0&&(_data=s.length>=5?s[3].split(":"):s[s.length-1].split(":")),_data&&2==_data.length&&(ret[_data[0]]=_data[1])}return ret},getBirthdayFromCardNo:function(cardNo){var birth="";if(cardNo){cardNo=cardNo.trim(),cardNo=function(num){return num.replace(/\s/g,"")}(cardNo);18==cardNo.length?birth=cardNo.slice(6,10)+"-"+(cardNo.slice(10,12)-0)+"-"+(cardNo.slice(12,14)-0):15==cardNo.length&&(birth="19"+cardNo.slice(6,8)+"-"+(cardNo.slice(8,10)-0)+"-"+(cardNo.slice(10,12)-0))}return birth},format:function(n){for(var t=1,i=arguments.length;t<i;t++)eval("n=n.replace(/{["+(t-1)+"]}/g, arguments[t])");return n},cutString:function(input,length,dots){if(!input||input.replace(/[\u0100-\uffff]/g,"zz").length<=length)return input;for(var ret="",count=0,i=0,len=input.length;i<len;i++){var s=input.charAt(i);if(ret+=s,(count+=/[\u0100-\uffff]/.test(s)?2:1)>=length-(dots?dots.length:0))break}return ret+dots}}),$.extend(!1,$.fn,{show:function(){return $.showHide(this,!0)},hide:function(){return $.showHide(this,!1)},values:function(){var valueStr="";return this.each(function(o){valueStr+=o.value()+","}),valueStr.length>0?valueStr.substr(0,valueStr.length-1):valueStr},siblings:function(selector){selector=selector||"*";var self=this.get(0),arr=[];return this.parent().find(">"+selector).each(function(_self){self!=_self[0]&&arr.push(_self[0])}),this.pushStack(arr)},parents:function(selector){var matched=[];this.each(function(o){for(var parentNodes=$.dir(o.get(0),"parentNode"),j=0;j<parentNodes.length;j++)matched.push(parentNodes[j])});var arr=this.pushStack(matched);return selector&&(arr=arr.filter(selector)),arr},parentsUntil:function(until,selector){var matched=[];this.length;this.each(function(o){for(var parentNodes=$.dir(o.get(0),"parentNode",until),j=0;j<parentNodes.length;j++)matched.push(parentNodes[j])});var arr=this.pushStack(matched);return selector&&(arr=arr.filter(selector)),arr},bgiframe:function(s){if($.browser.isIE6){s=$.extend(!0,{top:"auto",left:"auto",width:"auto",height:"auto",opacity:!0,src:"javascript:false;"},s||{});var prop=function(n){return n&&n.constructor==Number?n+"px":n},html='<iframe class="bgiframe" frameborder="0" tabindex="-1" src="'+s.src+'" style="display:block;position:absolute;z-index:-1;'+(!1!==s.opacity?"filter:Alpha(Opacity='0');":"")+"top:"+("auto"==s.top?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":prop(s.top))+";left:"+("auto"==s.left?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":prop(s.left))+";width:"+("auto"==s.width?"expression(this.parentNode.offsetWidth+'px')":prop(s.width))+";height:"+("auto"==s.height?"expression(this.parentNode.offsetHeight+'px')":prop(s.height))+';"/>';return this.each(function(elem){0==elem.find("iframe.bgiframe").length&&elem.prepend(document.createElement(html))})}return this},delegate:function(type,selector,handler){var events,eventHandle,handlers,handlerObj,handlerObjIn,elem=this;return elem.length<1?elem:((events=this.events)||(events=this.events={}),(eventHandle=this.handle)||(eventHandle=this.handle=function(e){$(elem).dispatch(e)}),(handlers=events[type])||(handlers=events[type]=[],$(elem).bind(type,eventHandle)),handler.handler&&(handlerObjIn=handler,handler=handlerObjIn.handler,selector=handlerObjIn.selector),handlerObj=$.extend({type:type,handler:handler,selector:selector},handlerObjIn),handlers.push(handlerObj),this)},dispatch:function(e){if(this.events[e.type])for(var handlerObj,handlers=this.events[e.type],i=0;handlerObj=handlers[i++];)try{var $targetList,o=this[0];if(handlerObj.selector){var src=e.target;$targetList=$(this).find(handlerObj.selector);for(var idx,flag=!1;src&&!flag;)idx=$.inArray(src,$targetList),idx>=0&&(flag=!0,handlerObj.handler.apply($targetList.eq(idx)[0],arguments)),src=src.parentNode}else handlerObj.handler.apply(o,arguments)}catch(ex){$.error(ex,"dispatch error")}}}),$.fn.toArray||($.fn.toArray=function(){var result=[];try{result=Array.prototype.slice,call(result,0)}catch(e){for(var i=0;this[i];)result[i]=this[i],i++}return result}),$.inArray||($.inArray=function(key,array){if(array.indexOf)return array.indexOf(key);for(;array[0];)if(array[0]===key)return 0;return-1}),"get,post".replace(/[^, ]+/g,function(method){$[method]&&($[method]=function(url,data,callback,dataType){return"function"==$.type(data)&&(callback=data,data={}),$.ajax.apply($,url,{method:method.toUpperCase(),onsuccess:callback,context:data})})});var oldValue=$.fn.value;if($.fn.val=$.fn.value=function(val){var __val=oldValue.call(this,val);return""==__val?"":this.attr("placeholder")&&__val==this.attr("placeholder")?"":__val},$.fn.parent=$.fn.parent||function(){return this[0]?$(this[0].parentNode):$()},!$.fn.prop){var propKey=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i;$.fn.prop=function(key,val){return this[0]?1==arguments.length?this[0][key]:2==arguments.length?(this[0][key]=!!val,this):void 0:2==arguments.length?this:null},$.fn.removeProp=function(){$.fn.prop.call(this,arguments[0],!1)};var oldAttr=$.fn.attr;$.fn.attr=function(key,val){return key&&"string"==typeof key&&this[0]?propKey.test(key)?"value"==key?$.fn.value.apply(this,arguments):$.fn.prop.apply(this,arguments):oldAttr.apply(this,arguments):void 0==val?"":this},$.fn.removeAttr=function(name){var propName=$.propFix[name]||$.propFix["__"+name]||name;return this.each(function(elem){propKey.test(name)?elem.get(0)[propName]=!1:elem.attr(propName,""),elem.get(0).removeAttribute(propName)}),this}}$.fn.eq=$.fn.eq||function(n){var end=n>=0?n+1:n-1;return this.slice(n,end)},$.fn.index=$.fn.index||function(finder){return finder?this.indexOf($.isCDom(finder)?finder:$(finder)):this.parent().find(">*").indexOf(this)},"focus,blur,submit,reset".replace(/[^, ]+/g,function(method){$.fn[method]||($.fn[method]=function(fn){return this.length?(this.each(function(item,i){return"function"==$.type(fn)?$.fn.bind.call(item,method,fn):(this.get(0)&&method in item.get(0)&&this.get(0)[method](),this)}),this):this})}),"next,prev".replace(/[^, ]+/g,function(method){$.fn[method]||($.fn[method]=function(selector){var result=$();if(!this[0])return result;var fix=("prev"==method?"previousElementSibling,previousSibling":"nextElementSibling,nextSibling").split(",");if(fix[0]in this[0])result=$(this[0][fix[0]]);else{for(var result=this[0][fix[1]];result&&1!=result.nodeType;)result=result[fix[1]];result=result&&1==result.nodeType?$(result):$()}return selector&&(result=result.is(selector)?result:$()),result})}),"previousSiblings,nextSiblings".replace(/[^, ]+/g,function(method){$.fn[method]||($.fn[method]=function(selector){if(!this||!this[0])return $();var context=(this.index(),this.parent().find(">*")),start="previousSiblings"==method?0:this.index()+1,end="previousSiblings"==method?this.index():context.length,ret=context.slice(start,end);return selector?ret.filter(selector):ret})}),"scrollTop,scrollLeft,scrollHeight,scrollWidth".replace(/[^, ]+/g,function(method){$.fn[method]||($.fn[method]=function(){var dom=this[0];return dom.window==dom||"BODY"==dom.tagName||"HTML"==dom.tagName?document.body[method]||document.documentElement[method]:this[0][method]})}),$.fn.citySelect=function(fns){return fns=fns||{},this.each(function(_self){var _select=$(_self);if("1"!=_select.attr("citySelect")){var popId="J_citySelect"+(new Date).getTime(),groups=["ABCDEF","GHIJ","KLNM","PQRSTUVW","XYZ"],dataList=[];_select.find("option").each(function(_item){dataList.push({code:$(_item).attr("code"),pinyin:$(_item).attr("py"),id:$(_item).attr("value"),name:$(_item).text()})});for(var tabTemplate='<div id="'+popId+'" class="address_hot" style="display:none;"><div class="address_hotlist"><ol class="address_hot_abb">{tabHtml}</ol>{contentHtml}</div><iframe id="iframe" style="position:absolute;z-index:-1; top:0;left:0;" frameborder="no" border="0" scrolling="no" ></iframe></div>',tabHtml="",contentHtml="",i=0;i<groups.length;i++){for(var groupData=new Array,j=0;j<dataList.length;j++)dataList[j].pinyin&&dataList[j].pinyin.length>0&&groups[i].indexOf(dataList[j].pinyin.substr(0,1).toUpperCase())>-1&&groupData.push(dataList[j]);if(groupData.length>0){tabHtml+='<li groupid="'+groups[i]+'"><span>'+groups[i]+"</span></li>",contentHtml+='<ul groupid="'+groups[i]+'" class="address_hot_adress clearfix" style="display:none;">';for(var k=0;k<groupData.length;k++)contentHtml+='<li cid="'+groupData[k].id+'"><a href="javascript:void(0);" cid="'+groupData[k].id+'" code="'+groupData[k].code+'">'+groupData[k].name+"</a></li>";contentHtml+="</ul>"}}var displayLable=$.instance('<a href="javascript:void(0);" refid="'+popId+'" class="choose_city">'+_select.find("option").eq(_select[0].selectedIndex).text()+'<i class="ico ico_triangle down1"></i></a>');_select.hide(),_select.attr("ctid",popId),_select.parent().get(0).insertBefore(displayLable[0],_select[0]);var tab=tabTemplate.replace("{tabHtml}",tabHtml).replace("{contentHtml}",contentHtml);$("body").append($.instance(tab));var $selector=$("#"+popId);_select.prev().bind("click",function(e){e.preventDefault(),e.stopPropagation();var refid=$(this).attr("refid"),pop=$("#"+refid);if("block"==pop.css("display"))pop.hide();else{var pos=$(this).offset();pop.css({left:pos.left+"px",top:pos.top+this.offsetHeight+1+"px",display:"block"}),$selector.find("iframe").css({width:pop.get(0).offsetWidth+"px",height:pop.get(0).offsetHeight+"px"})}}),_select.bind("change",function(){_select.prev().html(_select.find("option").eq(_select[0].selectedIndex).text()+'<i class="ico ico_triangle down1"></i>'),fns.onChange&&fns.onChange(this.value)}),$selector.bind("click",function(e){e.preventDefault(),e.stopPropagation();var target=$(e.target),$parent=$(this);target.is("a")?(_select.val(target.attr("cid")),_select.next(".choose_city").html(target.text()+'<i class="ico ico_triangle down1"></i>'),$("#"+popId).hide(),_select.trigger("change")):(target.attr("groupid")||target.parent().attr("groupid"))&&(target=target.attr("groupid")?target:target.parent(),target.parent().find("li span").removeClass("hot_selected"),target.find("span").removeClass("hot_selected").addClass("hot_selected"),$parent.find("ul").hide(),$parent.find("ul[groupid='"+target.attr("groupid")+"']").show())}),$selector.find("ul").first().show(),$selector.find("ol li span").first().addClass("hot_selected"),$("body").bind("click",function(e){$selector.hide()}),_select.attr("citySelect","1")}}),this},$.fn.pagation=function(options){function createPager(){var pagerHtml="";if(pageCount>1){var prevPage=currentPageIndex-1<1?1:currentPageIndex-1,nextPage=currentPageIndex+1>pageCount?pageCount:currentPageIndex+1;pagerHtml+='<ul class="pagination">',prevPage==currentPageIndex||(pagerHtml+=$.tmpl.render(options.tpl_prev,{prevPage:prevPage}));var min=currentPageIndex-Math.floor(options.pageNumbers/2)>0?currentPageIndex-Math.floor(options.pageNumbers/2):1;min+options.pageNumbers-1>pageCount&&(min=pageCount-options.pageNumbers+1)<1&&(min=1),min>2&&(pagerHtml+=$.tmpl.render(options.tpl_page,{idx:1}),pagerHtml+=$.tmpl.render(options.tpl_unavailable));for(var i=min;i<min+options.pageNumbers&&i<=pageCount;i++)pagerHtml+=i!=currentPageIndex?$.tmpl.render(options.tpl_page,{idx:i}):$.tmpl.render(options.tpl_page_current,{idx:i});min+options.pageNumbers<pageCount&&(pagerHtml+=$.tmpl.render(options.tpl_unavailable),pagerHtml+=$.tmpl.render(options.tpl_page,{idx:i})),nextPage==currentPageIndex||(pagerHtml+=$.tmpl.render(options.tpl_next,{nextPage:nextPage})),pagerHtml+="</ul>",container.html(pagerHtml),bindPagerEvent()}}function bindPagerEvent(){container.find("ul li").bind("click",function(){var page=$(this).attr("page");page&&""!=page&&(currentPageIndex=parseInt(page),createPager(),pager(currentPageIndex))})}function pager(page){if(page>0&&(startIndex=(page-1)*options.pageSize,endIndex=page*options.pageSize-1,endIndex>options.dataList.length-1&&(endIndex=options.dataList.length-1),options.callback)){var data=getPageData(startIndex,endIndex);options.callback({currentPage:page,startIndex:startIndex,endIndex:endIndex},data)}}function getPageData(startIndex,endIndex){for(var data=[],i=startIndex;i<=endIndex;i++)data.push(options.dataList[i]);return data}var pageSize=10;window.screen.height<=1e3&&(pageSize=8),window.screen.height<=768&&(pageSize=6);var defaultOptions={dataList:[],pageSize:pageSize,pageNumbers:5,callback:function(){},tpl_prev:'<li class="arrow" page="${prevPage}"><a href="javascript:void(0);">&lt;-</a></li>',tpl_next:'<li class="arrow" page="${nextPage}"><a href="javascript:void(0);">-&gt;</a></li>',tpl_page:'<li class="number" page="${idx}"><a href="javascript:void(0);">${idx}</a></li>',tpl_page_current:'<li class="number cuurent" page="${idx}"><a href="javascript:void(0);">${idx}</a></li>',tpl_unavailable:'<li class="unavailable"><a href="javascript:void(0);">...</a></li>'},currentPageIndex=options.currentPage||1,options=$.extend(defaultOptions,options);options.dataList=options.dataList||[];var totalItemCount=options.dataList.length,pageCount=Math.floor((totalItemCount+options.pageSize-1)/options.pageSize),startIndex=0,endIndex=0,container=$(this);return currentPageIndex>pageCount&&(currentPageIndex=pageCount),currentPageIndex<1&&(currentPageIndex=1),createPager(),pager(currentPageIndex),{getCurrentIndex:function(){return currentPageIndex}}};var fnOnResizeList=[],setFixed=function(){for(var i=0;i<fnOnResizeList.length;i++)scrollFixed.apply(window,fnOnResizeList[i])};$(window).bind("scroll",function(){setFixed()});var resizeTimer=!1;$(window).bind("resize",function(){resizeTimer&&clearTimeout(resizeTimer),resizeTimer=setTimeout(function(){resizeTimer=!1,setFixed()},300)}),$.fn.scrollFixed=function(){return bindFixed(this),this},$.extend(!0,Array.prototype,{remove:function(el){for(var i=0,l=this.length;i<l;i++)this[i]==el&&this.splice(i,1)},associate:function(keys,obj){for(var r=obj||{},i=0,n=Math.min(keys.length,this.length);i<n;i++)r[keys[i]]=this[i];return r},contains:function(key){for(var i=0,l=this.length;i<l;)if(this[i++]==key)return!0;return!1}}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(callback,initialValue){var previous=initialValue,k=0,length=this.length;if(void 0===initialValue&&(previous=this[0],k=1),"function"==typeof callback)for(k;k<length;k++)this.hasOwnProperty(k)&&(previous=callback(previous,this[k],k,this));return previous});var _getFestival=function(){var festival={"0101":"元旦","0501":"劳动节",1001:"国庆节",1225:"圣诞节"},festivalNameConfig="除夕,春节,元宵节,清明节,端午节,中秋节".split(","),festivalConfig={2015:"0218,0219,0305,0405,0620,0927",2016:"0207,0208,0222,0404,0609,0915",2017:"0127,0128,0211,0404,0530,1004",2018:"0215,0216,0302,0405,0618,0924",2019:"0204,0205,0219,0405,0501,0913",2020:"0124,0125,0208,0404,0625,1001"},ArrayIndexOf=function(arr,val){if(arr.indexOf)return arr.indexOf(val);for(var i=0,len=arr.length;i<len;i++)if(arr[i]===val)return i;return-1};return function(_year,_month,_date){_year+="",_month=("0"+_month).slice(-2),_date=("0"+_date).slice(-2);var isfestival="";if(festival[_month+_date])isfestival=festival[_month+_date];else if(festivalConfig[_year]){var index=ArrayIndexOf(festivalConfig[_year].split(","),_month+_date);index>=0&&(isfestival=festivalNameConfig[index])}return isfestival}}();$.extend(!0,Date.prototype,{getTimeRangeText:function(){try{var h=this.getHours(),timeRangeConfig={"6-12":"上午","12-13":"中午","13-18":"下午","18-24":"晚上","0-6":"晚上"};for(var range in timeRangeConfig){var splitStr=range.split("-");if(h>=parseInt(splitStr[0])&&h<parseInt(splitStr[1]))return timeRangeConfig[range]}return""}catch(ex){return""}},getFestival:function(){var date=this.toFormatString("yyyy-MM-dd")||"";return date?(date=date.split("-"),_getFestival(date[0],date[1],date[2])):""}})}(cQuery),function($){var ctripDialog=function(options){void 0==window.CTRIP_UI_Dialogs&&(window.CTRIP_UI_Dialogs=[]);var defaultOptions={title:"",type:"content",content:"",showTitle:!0,showClose:!0,closeText:"×",customTitle:"",width:320,height:240,modal:!0,draggable:!1,autoShow:!0,fixed:!0,loading:'<img src="//pic.c-ctrip.com/myctripv2/loading_animation_20.gif" />',classNames:{dialog:"dialog",titleBar:"bar",title:"title",close:"close",content:"content"},open:null,close:null,loaded:null,template:'<div id="${id}" class="${dialogClassName}" style="position: ${position};width:${width};height:${height}; z-index: 2001;display:none;">{{if customTitle}}${customTitle}{{else}}<div class="${titleBarClassName}">{{if showTitle}}<span class="${titleClassName}">${title}</span>{{/if}}{{if showClose}}<a class="${closeClassName}" href="javascript:void(0);">${closeText}</a>{{/if}}</div>{{/if}}<div class="${contentClassName}"></div><div class="loading">${loading}</div></div>',style:".dialog{background-color: #FFFFFF;border: 1px solid #67A1E1;position: absolute;z-index: 2050; overflow:hidden;}                    .dialog .bar{background-color: #EFF6FC;width: 100%;overflow:hidden;}                    .dialog .title{float:left;font-size: 13px;padding: 5px 10px;font-weight:bold;}                    .dialog .close{float:right;color: #9ABBDE;cursor:pointer;font-family: Tahoma;font-size: 20px;font-weight: bold;line-height: 22px;padding: 0;text-shadow: 0 1px 0 #FFFFFF;  margin-right: 5px;}                    .dialog .content{display:none;position:relative;}                    .dialog .content iframe{position:absolute;top:0px;left:0px;z-index:2001;}                    .dialog .content .iframemask{display:none;position:absolute;top:0px;left:0px;z-index:2002;}                    .dialog .loading{text-align: center;width: 100%;}                    .dialog-overlay{opacity:0.5;filter:alpha(opacity:50);background:#000;top:0px;left:0px;position:absolute;z-index:2000;width:100%;}"},MAX_IMAGE_SIZE={WIDTH:960,HEIGHT:720},mouse={x:0,y:0},lastPosition={top:0,left:0},elements={},opt=$.extend(!0,defaultOptions,options),dialogid=opt.id?opt.id:"dialog_"+(new Date).getTime()+(1e10*Math.random()).toFixed(0),isNew=!0,_self=this,contentHeight=opt.height,optClassName=opt.classNames;return this.init=function(){if("id"==opt.type.toLowerCase()&&$("#"+opt.content).attr("dialog_instance_id"))dialogid=$("#"+opt.content).attr("dialog_instance_id"),isNew=!1;else{if(opt.modal){var overlay=$("#ctrip_ui_overlay");0==overlay.length&&(overlay=$.instance('<div id="ctrip_ui_overlay" class="dialog-overlay"></div>'),document.createElement("div"),$("body").append(overlay),overlay.css("height",document.documentElement.scrollHeight+"px")),$(overlay).bgiframe()}var dialogHtml=$.tmpl.render(opt.template,{id:dialogid,dialogClassName:optClassName.dialog,titleBarClassName:optClassName.titleBar,titleClassName:optClassName.title,closeClassName:optClassName.close,contentClassName:optClassName.content,title:opt.title,customTitle:opt.customTitle,closeText:opt.closeText,showTitle:opt.showTitle,showClose:opt.showClose,loading:opt.loading,position:1==opt.fixed?"fixed":"absolute",width:0==opt.width?"auto":opt.width+"px",height:0==opt.height?"auto":opt.height+"px"}),contentObj=$.instance(dialogHtml);$("body").append(contentObj)}elements={dialog:$("#"+dialogid),overlay:$("#ctrip_ui_overlay"),bar:$("#"+dialogid+" ."+optClassName.titleBar),loading:$("#"+dialogid+" .loading"),closeButton:$("#"+dialogid+" ."+optClassName.close),content:$("#"+dialogid+" ."+optClassName.content)},opt.autoShow&&this.show(),contentHeight=opt.height-elements.bar.offset().height,this.setLoading(),isNew&&(opt.draggable&&(elements.bar.bind("mousedown",function(event){elements.bar.css("cursor","move"),elements.iframeMask&&elements.iframeMask.show(),$("#"+dialogid+" .bgiframe").hide();var e=window.event||event;mouse.x=e.screenX,mouse.y=e.screenY,lastPosition.top=elements.dialog.offset().top,lastPosition.left=elements.dialog.offset().left,$(document).bind("mousemove",_self.dragDialog)}),$(document).bind("mouseup",function(event){elements.bar.css("cursor","default"),elements.iframeMask&&elements.iframeMask.hide(),$("#"+dialogid+" .bgiframe").show(),$(document).unbind("mousemove",_self.dragDialog)})),elements.closeButton.bind("click",function(){_self.close()}),$.browser.isIE6&&1==opt.fixed&&elements.dialog.css("position","absolute"),this.getContent(opt.type,opt.content),window.CTRIP_UI_Dialogs.push(this)),this.resize()},this.setLoading=function(){elements.loading.css("marginTop",(contentHeight-elements.loading.offset().height)/2+"px")},this.resize=function(){elements.overlay.length>0&&elements.overlay.css("height",$.bodyHeight()+"px"),$.browser.isIE6||!opt.fixed?(elements.dialog[0].style.left=document.documentElement.scrollLeft+document.body.scrollLeft+Math.max(0,(document.documentElement.clientWidth-elements.dialog[0].offsetWidth)/2)+"px",elements.dialog[0].style.top=document.documentElement.scrollTop+document.body.scrollTop+Math.max(0,(document.documentElement.clientHeight-elements.dialog[0].offsetHeight)/2)+"px"):(elements.dialog[0].style.left=Math.max(0,(document.documentElement.clientWidth-elements.dialog[0].offsetWidth)/2)+"px",elements.dialog[0].style.top=Math.max(0,(document.documentElement.clientHeight-elements.dialog[0].offsetHeight)/2)+"px")},this.getContent=function(type,content){switch(elements.content.html(""),opt.type.toLowerCase()){case"id":elements.content.append($("#"+opt.content)),$("#"+opt.content).show(),$("#"+opt.content).attr("dialog_instance_id",dialogid),_self.loaded();break;case"img":var img=document.createElement("img");img.onload=this.imgLoaded,img.src=opt.content,elements.content.append(img);break;case"iframe":var iframe=document.createElement("iframe");iframe.src=opt.content,iframe.width="100%",iframe.height=contentHeight,iframe.frameBorder="0",iframe.attachEvent?iframe.attachEvent("onload",function(){_self.iframeLoaded()}):iframe.onload=function(){_self.iframeLoaded()},elements.content.append(iframe);var mask=document.createElement("div");mask.className="iframemask",mask.style.width="100%",mask.style.height=contentHeight+"px",elements.content.append(mask),elements.iframeMask=$("#"+dialogid+" .iframemask");break;case"content":elements.content.html(opt.content),_self.loaded();break;case"url":$.ajax(content,{method:"GET",async:!0,onsuccess:function(xhr,txt){elements.content.html(txt),_self.loaded()}})}},this.creatStyle=function(opt){var styles=opt.style;if(!ctripDialog.isFirstRegister){ctripDialog.isFirstRegister||(ctripDialog.isFirstRegister=!0);try{sty=document.createStyleSheet(),sty.cssText=styles}catch(ex){sty=document.createElement("style"),sty.type="text/css",sty.textContent=styles,document.getElementsByTagName("head")[0].appendChild(sty)}}},this.imgLoaded=function(){_self.showContent();var img=this,size={width:opt.width>MAX_IMAGE_SIZE.WIDTH?MAX_IMAGE_SIZE.WIDTH:opt.width,height:opt.height>MAX_IMAGE_SIZE.HEIGHT?MAX_IMAGE_SIZE.HEIGHT:opt.height},rate=img.offsetWidth/img.offsetHeight;img.offsetWidth>size.width&&(img.style.width=size.width+"px",img.style.height=size.width/rate+"px"),img.offsetHeight>contentHeight&&(img.style.width=contentHeight*rate+"px",img.style.height=contentHeight+"px"),img.offsetHeight<contentHeight&&(img.style.marginTop=(contentHeight-img.offsetHeight)/2+"px"),img.offsetWidth<size.width&&(img.style.marginLeft=(size.width-img.offsetWidth)/2+"px"),_self.loaded()},this.iframeLoaded=function(){_self.showContent(),_self.loaded()},this.loaded=function(){this.showContent(),opt.loaded&&"function"==typeof opt.loaded&&opt.loaded()},this.showContent=function(){elements.loading.hide(),elements.content.show()},this.show=function(){this.creatStyle(opt);for(var i=0;i<window.CTRIP_UI_Dialogs.length;i++)window.CTRIP_UI_Dialogs[i].close();elements.overlay.show(),elements.dialog.show(),opt.open&&"function"==typeof opt.open&&opt.open(),clearInterval(elements.dialog.attr("resize_intervalid")),elements.dialog.attr("resize_intervalid",setInterval(function(){_self.resize()},500))},this.close=function(destory){clearInterval(elements.dialog.attr("resize_intervalid")),elements.dialog.attr("resize_intervalid",0),elements.dialog.hide(),elements.overlay.hide(),opt.close&&"function"==typeof opt.close&&opt.close()},this.dragDialog=function(event){var e=window.event||event,maxLeft=document.documentElement.clientWidth-elements.dialog.offset().width,maxTop=document.documentElement.clientHeight-elements.dialog.offset().height,top=lastPosition.top+(e.screenY-mouse.y),left=lastPosition.left+(e.screenX-mouse.x);left=left<0?0:left,top=top<0?0:top,left=left>maxLeft?maxLeft:left,top=top>maxTop?maxTop:top,elements.dialog.css("top",top+"px"),elements.dialog.css("left",left+"px"),e.preventDefault?e.preventDefault():e.returnValue=!1},this.init(),this};factory.create("Ctrip.UI.Dialog",ctripDialog);var eventFix={mouseenter:"mouseover",mouseleave:"mouseout"},eventFix2={focusin:"focus",focusout:"blur"},supportMouseenter="onmouseenter"in document.body,supportFocusIn=$.browser.isChrome||$.browser.isSafari||"onfocusin"in document.createElement("input");if(!supportMouseenter||!supportFocusIn){var oldBind=$.fn.bind,oldUnBind=$.fn.unbind,eventCache={},eventId=0;$.fn.bind=function(e,t,r){if(!supportMouseenter&&eventFix[e]){e=eventFix[e]
;return t._eventId&&eventCache[t.eventId]||(eventId++,t._eventId=eventId,eventCache[eventId]=function(e){e.currentTarget&&e.relatedTarget&&!$(e.currentTarget).contains(e.relatedTarget)&&e.currentTarget!=e.relatedTarget&&t.call(e.currentTarget,e)}),oldBind.apply(this,[e,eventCache[t._eventId],r])}return!supportFocusIn&&eventFix2[e]&&(e=eventFix2[e],r=!0),oldBind.apply(this,[e,t,r])},$.fn.unbind=function(e,t){return oldUnBind.apply(this,[e,t&&t._eventId?eventCache[t._eventId]:t])}}if(!$.browser.isIE6){var oldMask=$.fn.mask;$.fn.mask=function(){var mask=oldMask.apply(this,arguments).data("__mask__");return mask&&mask.maskDiv&&$(mask.maskDiv).css({position:"fixed",width:"100%",height:"100%"}),this}}}(cQuery),function($){var PicScoller=function(options){var index=0,defaultOptions={targetId:"body",changeInterval:1750,picArr:["//pic.c-ctrip.com/fltcommon/xproduct/rec_hotel.jpg","//pic.c-ctrip.com/fltcommon/xproduct/rec_cip.jpg","//pic.c-ctrip.com/fltcommon/xproduct/rec_lounge.jpg","//pic.c-ctrip.com/fltcommon/xproduct/rec_pickup.jpg"],template:'<div id = "${id}">{{each(k,pic) picArr}}<img alt="" src="${pic}" id = "picItem${k}" class="picItem" style="cursor:pointer;display:none">{{/each}}</div>'},elements={},opt=$.extend(!0,defaultOptions,options),scollerId=opt.id?opt.id:"scoller_"+(new Date).getTime()+(1e10*Math.random()).toFixed(0);return this.init=function(){var dialogHtml=$.tmpl.render(opt.template,{id:scollerId,picArr:opt.picArr}),contentObj=$.instance(dialogHtml);$.browser.isIE8&&$(".plusad-img").css({top:"60px"}),$("#"+opt.targetId).append(contentObj),elements={picImgs:$("#"+scollerId+" .picItem")},elements.picImgs[0].style.display="",elements.picImgs.bind("mouseenter",function(event){});setInterval(function(){index++;var picId=index%4;elements.picImgs.hide(),$("#"+scollerId+" #picItem"+picId).show()},opt.changeInterval)},this.init(),this};factory.create("Ctrip.UI.PicScoller",PicScoller)}(cQuery);;!function($){function address(obj,opt){this._init(obj,opt)}function defaultSuggestionInit(obj){function switchTab(){var _this=this;spans.each(function(span,i){span[0]==_this?(span.addClass("hot_selected"),uls[i].style.display=""):(span.removeClass("hot_selected"),uls[i].style.display="none")})}var spans=obj.find("span"),uls=obj.find("ul");if(spans.length){for(var w=30,i=0,n=spans.length;i<n;i++)w+=spans[i].offsetWidth;var t=obj.find("div").first();t[0]&&w>278&&t.css("width",w+"px"),spans.bind("mousedown",switchTab),switchTab.apply(spans[0])}}var cls={name:"address_poi",version:"1.0",module:address},ADDITION_EVENT={change:1,userinput:1,enter:1,suggestion:1,filter:1},EVENT_TAIL="_"+cls.name+"_"+cls.version;$.extend(address.prototype,{jsonpFilterDelay:0,delay:0,source:null,source_get:function(key){return key?key in this.source?$.copy(this.source[key]):null:$.copy(this.source)},source_set:function(val){if(this.source=val?$.extend(this.source||{},val):null,this.source&&this.source.suggestion){this.backData={};var list,len,item;for(var k in this.source.suggestion)if(!1!==this.source.suggestion.hasOwnProperty(k))for(list=this.source.suggestion[k],len=list&&list.length||0;len--;)item=list[len],this.backData[item.display]=item.data}this._refresh()},jsonpSource:null,jsonpFilter:null,jsonpFilter_get:function(){return this.jsonpFilter},jsonpFilter_set:function(val){this.jsonpFilter=val},display:{left:0,right:1,suggestion:1,value:1},offset:null,offset_set:function(val){this.offset=val?$.copy(val):null,this._refresh()},offset_get:function(val){return $.copy(this.offset)},minLength:1,isAutoCorrect:!1,template:{suggestion:"",suggestionStyle:"",suggestionInit:defaultSuggestionInit,filter:'<div class="poi_suggest"><table cellspacing="0" cellpadding="2">{{if length < 1  || isUseLastData}}<tbody><tr><th class="error">对不起，暂不支持该地点</th></tr></tbody>{{/if}}{{if exname}}<tbody><tr><th>您要找的是不是 <b>${exname}</b></th></tr></tbody>{{/if}}{{if length > 0}}{{enum(k, v) result}}<tbody>{{each(i, val, len) v}}<tr><td class="{{if i===0}}icon_${k} {{/if}}{{if (k===\'scenic\' || k===\'province\' || k===\'country\') && !val.isNearBy}}item_scenic {{/if}}{{if val.isNearBy || val.isAirport}}airport_nearby {{/if}}{{if k===\'city\' && !val.hasAirportCity && !val.isNearBy && !val.isAirport}}no_airport{{/if}}"{{if val.value}} data="${val.value}"{{/if}}{{if val.log}} log="${val.log}"{{/if}}>${getPoiItemName(i, k, val)}</td></tr>{{/each}}</tbody>{{/enum}}{{/if}}</table></div>',filterStyle:".poi_suggest{font-family:Tahoma,Arial,b8bf53,sans-serif;width:auto;position:absolute;left:0;top:0;*top:-1px;zoom:1;font-size:12px;border:1px solid #999;background-color:#fff}.poi_suggest tbody,.poi_suggest tr,.poi_suggest td{display:block}.poi_suggest table{width:300px}.poi_suggest td{padding:6px 30px 6px 10px;text-align:left;white-space:nowrap;cursor:pointer;background-color:#fff;color:#545454}.poi_suggest th{padding:6px 30px 6px 10px;font-weight:normal;background-color:#fff;color:#545454;text-align:left}.poi_suggest th b{color:#2577e3}.poi_suggest th.error{color:#c01111}.poi_suggest td b{color:#06c}.poi_suggest .active td{background-color:#2577e3;color:#fff}.poi_suggest .active td b{color:#fff}.poi_suggest .airport_nearby{background-image:url(//pic.c-ctrip.com/fltdomestic111027/icon_search_pop.png);background-repeat:no-repeat;background-position:12px -344px;*background-position:12px -346px;color:#000}.poi_suggest .airport_nearby{padding-left:30px}.poi_suggest .active .airport_nearby{background-position:12px -379px;*background-position:12px -381px;color:#fff}.poi_suggest .icon_city,.poi_suggest .icon_airport,.poi_suggest .icon_scenic,.poi_suggest .icon_province,.poi_suggest .icon_country{background-image:url(//pic.c-ctrip.com/fltdomestic111027/icon_search_pop.png);background-repeat:no-repeat;border-top:1px solid #ccc}.poi_suggest .item_first{border-top:0}.poi_suggest .icon_city{background-position:98% 5px}.poi_suggest .active .icon_city{background-position:98% -30px}.poi_suggest .icon_airport{background-position:98% -65px}.poi_suggest .active .icon_airport{background-position:98% -100px}.poi_suggest .icon_scenic{background-position:98% -135px}.poi_suggest .active .item_scenic,.poi_suggest .active .no_airport{background-color:#fff;cursor:default;color:#545454}.poi_suggest .active .item_scenic b,.poi_suggest .active .no_airport b{color:#06c}.poi_suggest .icon_country{background-position:98% -205px}.item_city .active .icon_country{background-position:98% -240px}.poi_suggest .icon_province{background-position:98% -275px}.item_city .active .icon_province{background-position:98% -310px}"},defaultSuggestionInit:defaultSuggestionInit,defaultSuggestionInit_get:function(){return defaultSuggestionInit},bind:function(types,handler,opt){return this._event("bind",types,handler,opt),this},unbind:function(types,handler){return this._event("unbind",types,handler),this},trigger:function(types,opt){return"userinput"===types&&(opt.arguments.status=null===this._lastFilterRendarData?0:this._lastFilterRendarData.isUseLastData?1:this._lastFilterRendarData.exname?2:0),this._event("trigger",types,opt),this},focus:function(opt){if(this._enabled){var _this=this;opt=$.extend({isHidden:!1,isSelected:!1},opt),opt.isSelected?_this.target[0].select():_this.target[0].focus(),opt.isHidden&&(_this.hidden(),setTimeout(function(){_this.hidden()},44))}},hidden:function(){this._isFocus&&(this._hideSuggestion(),this._hideFilter(),this._tmpValue=this._lastValue=this._fixVal(this.target.value()))},select:function(v){this._select(v)},_enable:!1,_parentDocument:null,_parentWindow:null,_iframeDocument:null,_iframeWindow:null,_iframeObject:null,_iframeContainter:null,_lastIframeSize:null,_iframeClock:null,_iframeStyle:"width:0;height:0;position:absolute;top:-100000px;left:-100000px;z-index:200;",_placeHolder:$.browser.isIE?'<pre style="display:none;">placeholder</pre>':"",_isFocus:!1,_focusClock:null,_checkClock:null,_jsonpFilterClock:null,_tmpValue:null,_lastValue:null,_isCharIn:!1,_suggestionContainer:null,_suggestionStyle:"position:absolute;top:-100000px;left:-100000px;z-index:200;",_isSuggestionRender:!1,_filterContainer:null,_filterStyle:"position:absolute;top:-100000px;left:-100000px;z-index:200;",_displayRegExp:null,_displayHash:null,_colsHash:null,_lastFilterRendarData:null,_lastSelect:null,_suggestionEnable:!1,_filterEnable:!1,_filterCount:0,_selectFlag:!1,_getLengthRe:/[^\x00-\xFF]/g,_init:function(obj,opt){var _this=this;this._enabled=!0,this.target=$(obj),opt.delay&&"number"==$.type(opt.delay)&&opt.delay>0&&(this.delay=opt.delay),this.source_set(opt.source),this.jsonpSource=opt.jsonpSource||this.jsonpSource,opt.jsonpFilterDelay&&"number"==$.type(opt.jsonpFilterDelay)&&opt.jsonpFilterDelay>0&&(this.jsonpFilterDelay=opt.jsonpFilterDelay),this.charset=opt.charset||cQuery.config("charset"),this.jsonpSource&&$.loader.jsonp(this.jsonpSource,{charset:this.charset,onload:function(data){this.source_set(data)}.bind(this)}),this.jsonpFilter=opt.jsonpFilter||this.jsonpFilter,opt.display&&(this.display=$.extend(!0,{},this.display,opt.display)),this.relate=opt.relate||this.relate,this.offset="offset"in opt?opt.offset:this.offset,this.minLength="minLength"in opt?opt.minLength:this.minLength,this.priority="priority"in opt?opt.priority:this.priority,this.isAutoCorrect="isAutoCorrect"in opt?opt.isAutoCorrect:this.isAutoCorrect,opt.template&&(this.template=$.extend(!0,{},this.template,opt.template)),this.isIframe=function(){if(opt.hasOwnProperty("isIframe")&&!opt.isIframe)return!1;var doc=_this.target[0].ownerDocument,win=doc.defaultView||doc.parentWindow;try{var t=win.frameElement||!!opt.isIframe&&_this.target[0];return t&&(_this._parentDocument=t.ownerDocument,_this._parentWindow=_this._parentDocument.defaultView||_this._parentDocument.parentWindow,_this._iframeObject=$(_this._parentDocument.createElement("iframe")),_this._iframeObject.css(_this._iframeStyle),_this._iframeObject[0].frameBorder=0,_this._iframeObject.prependTo(_this._parentDocument.body),_this._iframeObject.html('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><title>address</title><style>html,body{padding:0;margin:0;overflow:hidden;}</style></head><body></div></body></html>',function(){_this._iframeWindow=_this._iframeObject[0].contentWindow||_this._iframeObject[0].window,_this._iframeDocument=_this._iframeWindow.document,_this._iframeContainer=$(_this._iframeDocument.createElement("container")),_this._iframeContainer.css("position","absolute"),_this._iframeContainer.appendTo(_this._iframeDocument.body)})),!!t}catch(e){return!1}}(),$.bindMethod(this),this.target.attr("autoComplete","on"),this._initEvent()},_initEvent:function(){this.target.bind("focus",this._focus),this.target.bind("blur",this._blur),this.target.bind("keydown",this._keydown),this.target.bind("keypress",this._keypress),this.target.bind("mouseup",this._mouseup),this.target.bind("mousedown",this._focus)},_initCols:function(){if(!this._colsHash){var t={};if(this.source&&this.source.alias){for(var i=0,n=this.source.alias.length;i<n;i++)t[this.source.alias[i]]=i;this._colsHash=t,t=null}}},_initDisplay:function(){if(this._initCols(),!this._displayHash&&this._colsHash){var key,value,t=this._displayHash={};for(key in this.display)if(value=this.display[key],/^\d$/.test(value))t[key]=parseInt(value,10);else{if(!(value in this._colsHash)){t[key]=null;continue}t[key]=this._colsHash[value]}}},_refresh:function(){this._colsHash=null,this._tmpValue=this._lastValue=null,this._isSuggestionRender=!1,this._isFocus&&this._inputCheck()},_focus:function(e){if(this._enabled){if(this._isFocus)return void(!this.source||this._suggestionEnable||this._filterEnable||this._showSuggestion());if(this._isFocus=!0,this.target.attr("autoComplete","off"),this._isCharIn=!1,this._tmpValue=this._lastValue=null,this._clearFilter(),e&&e.type&&this._inputCheck(),clearTimeout(this._checkClock),clearInterval(this._focusClock),this._focusClock=setInterval(this._focusInterval,100),this.isIframe&&(clearInterval(this._iframeClock),this._iframeClock=setInterval(this._fixIframeSize,100)),e&&e.type){var t=this.target[0];switch(e.type){case"mousedown":setTimeout(function(){t.select()});break;case"focus":t.select()}}}},_blur:function(){if(this._enabled&&this._isFocus){if(this._isFocus=!1,this.target.attr("autoComplete","on"),!this._selectFlag){var v1=(this.target.value()||"").trim();if(this._filterEnable)if(this._lastSelect&&(null===this._lastFilterRendarData||this._lastFilterRendarData.length>0&&!0!==this._lastFilterRendarData.isUseLastData)){var data=this._lastSelect.attr("data"),tar=this._lastSelect[0];this._select(data),this.trigger("userinput",{arguments:{eventType:"blur",target:tar,value:v1,autoCorrectValue:this.target.value(),data:data}})}else this._unselect(),this.trigger("userinput",{arguments:{eventType:"blur",target:null,value:v1,autoCorrectValue:this.target.value(),data:null}});else v1&&this.backData&&this.backData[v1]?(this._suggestionEnable=!0,this._select(this.backData[v1])):""!==v1&&!1!==/.+\(.+\)/.test(v1)||this._unselect()}this._hideSuggestion(),this._hideFilter(),clearTimeout(this._checkClock),clearInterval(this._focusClock),this.isIframe&&clearInterval(this._iframeClock)}},_keypress:function(){this._isCharIn=!0},_keydown:function(e){if(this._isFocus||this._focus(),this.relate)for(var index in this.relate)if(this.relate.hasOwnProperty(index)){var relateEl=$(this.relate[index]);if(0===relateEl.length)continue;if(/^\d$/.test(index))index=parseInt(index,10);else{if(!(index in this._colsHash))continue;index=this._colsHash[index]}}switch(e.keyCode){case 13:if(this._filterEnable&&this._lastSelect){var v1=this.target.value(),data=this._lastSelect.attr("data"),tar=this._lastSelect[0];this._select(data);var v2=this.target.value();this.trigger("userinput",{arguments:{eventType:"keydown",target:tar,value:v1,autoCorrectValue:v2,data:data}});break}this.trigger("enter",{arguments:this.target.value()});break;case 38:case 40:if(38!=e.keyCode&&40!=e.keyCode)return!0;if(this._filterEnable){if(this._lastFilterRendarData){var direct=38===e.keyCode?-1:1,tab=this._filterContainer.find("table:first")[0];if(!tab)return!1;var act=this._filterContainer.find("tr.active"),index=0;act.length>0&&(index=act[0].rowIndex);for(var o,max=10;max--&&(index+=direct,direct>0?index>=tab.rows.length&&(index=0):index<0&&(index=tab.rows.length-1),o=$(tab.rows[index].cells[0]),o.hasClass("no_airport")||o.hasClass("item_scenic")||o.hasClass("error")););act.length>0&&(this._lastSelect=act.find("[data]:first")),this._showHover(tab.rows[index].cells[0])}}break;default:return $.browser.isIPadUCWeb&&(this._isCharIn=!0),!0}return e.stop(),!1},_mouseup:function(){var t=this.target[0];t.releaseCapture&&t.releaseCapture()},_getLength:function(str){return str.replace(this._getLengthRe,"  ").length},_focusInterval:function(){var val=this._fixVal(this.target.value());this.source&&this._tmpValue!==val&&(this._tmpValue=val,this.delay?(clearTimeout(this._checkClock),this._checkClock=setTimeout(this._inputCheck,this.delay)):this._inputCheck())},_fixVal:function(val){return val.trim().replace(/[\|@\u2006]/g,"")},_inputCheck:function(){var val=this._fixVal(this.target.value());this.source&&this._lastValue!==val&&(null!==this._lastValue&&(this._isCharIn=!0),this._lastValue=val,this._getLength(val)>=this.minLength&&this._isCharIn?this._showFilter(val):this._showSuggestion())},_showSuggestion:function(){if(this._lastFilterRendarData=null,this._suggestionEnable=!0,this._hideFilter(),this._clearFilter(),!this._suggestionContainer){if(this.isIframe){var el=this._iframeDocument.createElement("div");el.id="address_suggestionContainer_"+this.target.uid()}else{var el=document.createElement("div");el.id="address_suggestionContainer_"+this.target.uid(),el.style.cssText=this._suggestionStyle}this._suggestionContainer=$(el),this._suggestionContainer.bind("mousedown",this._filterMousedown)}if(this._suggestionContainer.appendTo(this.isIframe?this._iframeContainer:$.container),!this._isSuggestionRender){this._isSuggestionRender=!0;var arr=[],k=0,id=this._suggestionContainer[0].id;"string"==$.type(this.template.suggestionStyle)&&(arr[k++]=this._placeHolder+"<style>"+this.template.suggestionStyle.replace(/(\s*)([^\{\}]+)\{/g,function(a,b,c){return b+c.replace(/([^,]+)/g,"#"+id+" $1")+"{"})+"</style>");var t={data:this.source.suggestion};arr[k++]=$.tmpl.render(this.template.suggestion,t),this._suggestionContainer.html(arr.join("")),"function"==$.type(this.template.suggestionInit)&&this.template.suggestionInit(this._suggestionContainer),this.trigger("suggestion",{arguments:[this._suggestionContainer]})}this.isIframe?(this._fixIframeSize(),this._iframeObject.offsetA(this.target,this.offset)):(this._suggestionContainer.offset(this.target,this.offset),this._suggestionContainer.cover())},_fixIframeSize:function(){if(this.isIframe){var t=this._iframeContainer[0],w=t.offsetWidth+"px",h=t.offsetHeight+"px";this._lastIframeSize&&w==this._lastIframeSize.width&&h==this._lastIframeSize.height||(this._lastIframeSize={width:w,height:h},this._iframeObject.css(this._lastIframeSize))}},_hideSuggestion:function(){if(this._suggestionEnable=!1,this._suggestionContainer){try{this._suggestionContainer.remove()}catch(e){}this.isIframe?(this._iframeObject.css(this._iframeStyle),this._lastIframeSize=null):(this._suggestionContainer.css(this._suggestionStyle),this._suggestionContainer.uncover())}},_showFilter:function(val){if(this._filterEnable=!0,this._filterCount++,this._hideSuggestion(),!this._filterContainer){if(this.isIframe){var el=this._iframeDocument.createElement("div");el.id="address_filterContainer_"+this.target.uid()}else{var el=document.createElement("div");el.id="address_filterContainer_"+this.target.uid(),el.style.cssText=this._filterStyle}this._filterContainer=$(el),this._filterContainer.bind("mouseover",this._filterMouseover),this._filterContainer.bind("mousedown",this._filterMousedown)}val=val.match(/\((.+?机场)\)/)||val.match(/\(([A-Z]{3})\)/)?RegExp.$1:val.split("(").shift(),this.jsonpFilter&&this._filterDataByJsonp(this.jsonpFilter,val,!1,!1)},_clearFilter:function(){this._lastSelect=null},_filterMouseover:function(e){for(var t=e.target;t&&"TD"!==t.tagName;)t=t.parentNode;if(t){if(t.getAttribute("data"))return void this._showHover(t)}},_filterMousedown:function(e){var _this=this,t=e.target,name="TD",evtType="mousedown";for(this._suggestionEnable&&(evtType="suggestionMousedown",name="A"),this._filterEnable&&(evtType="filterMousedown");t&&t.tagName!=name;)t=t.parentNode;if(t){var data=t.getAttribute("data");if(data){var v1=this.target.value(),uiFn=function(){var v2=_this.target.value();_this.trigger("userinput",{arguments:{eventType:evtType,target:t,value:v1,autoCorrectValue:v2,data:data}})};$.browser.isIE?(t.onclick=function(){_this._select(data),uiFn()},this._isSuggestionRender=!1):(this._select(data),uiFn())}}return e.stop(),this.target[0].setCapture&&this.target[0].setCapture(),!1},_hideFilter:function(){if(this._filterEnable=!1,this._filterContainer){try{this._filterContainer.remove()}catch(e){}this.isIframe?(this._iframeObject.css(this._iframeStyle),this._lastIframeSize=null):(this._filterContainer.css(this._filterStyle),this._filterContainer.uncover())}},_filterDataByJsonp:function(url,val,isAccurate,isReturnBest,fn){this._initDisplay();var privateFilterCount=this._filterCount;if(val=(""+val).substr(0,150),url=$.tmpl.render(url,{key:encodeURIComponent(val),accurate:isAccurate?1:0}),$.loader.jsonp(url,{charset:this.charset,onload:function(source){if((this._filterEnable||isReturnBest)&&privateFilterCount==this._filterCount){var renderData=this._getList(source);if(renderData&&renderData.length<1&&this._lastFilterRendarData&&(renderData=$.copy(this._lastFilterRendarData),renderData.isUseLastData=!0),this._lastFilterRendarData=renderData,isReturnBest&&"function"===$.type(fn)){if(renderData.length<1)fn(null);else for(var k in renderData.result){fn(renderData.result[k][0].value);break}return}this._updateFilter(renderData)}try{window.$_bf&&!0===window.$_bf.loaded?window.$_bf.tracklog("fltind_poi_request",JSON.stringify({Input:val,POIstatus:source.Status+""})):setTimeout(function(){window.$_bf&&!0===window.$_bf.loaded&&window.$_bf.tracklog("fltind_poi_request",JSON.stringify({Input:val,POIstatus:source.Status+""}))},500)}catch(ex){$.log(ex,"setUTB_EDM")}}.bind(this)}),isReturnBest)return!1},_updateFilter:function(renderData){var arr=[];"string"==$.type(this.template.filterStyle)&&(arr.push(this._placeHolder),arr.push("<style>"),arr.push(this.template.filterStyle),arr.push("</style>")),arr.push($.tmpl.render(this.template.filter,renderData)),this._filterContainer.html(arr.join("")),this.trigger("filter",{arguments:[this._filterContainer]}),this._showHover(),this.isIframe?(this._filterContainer.appendTo(this._iframeContainer),this._fixIframeSize(),this._iframeObject.offsetA(this.target,this.offset)):(this._filterContainer.appendTo($.container),this._filterContainer.offset(this.target,this.offset),this._filterContainer.cover())},_showHover:function(obj){if(obj=obj?$(obj):this._filterContainer.find("*[data]:first"),this._lastSelect){if(obj.length>0&&this._lastSelect[0]==obj[0])return;this._lastSelect.parentNode().removeClass("active")}obj.length>0?(obj.parentNode().addClass("active"),this._lastSelect=obj):this._lastSelect=null},_checkCountry:function(v){return"中国"===v||"中國"===v},_getExtInfo:function(k,arr,isEnglish){var t,r;for(r=new RegExp("("+k.replace(/(\(|\)|\\|\[|\])/g,"\\$1")+")","i");void 0!==(t=arr.shift());)if(t&&(r.test(t)||r.test(t.replace(/\s/g,"")))){if(t&&r.test(t))t=t.replace(r,"<b>$1</b>");else if(t&&r.test(t.replace(/\s/g,""))){var s=t.replace(/\s/g,"");s=s.replace(r,"$'");var t2Len=s.length/2,tLen=t.length,t1=t.substr(0,tLen-t2Len),t2=t.substr(tLen-t2Len);t="<b>"+t1+"</b>"+t2}return isEnglish?"("+t+")":t}return""},_getList:function(data){if(!data)return null;var t,node,k,kk,isEnglish,key,ret={},index=0,exname="";if(key=(data.Key||"").trim().replace(/\s{2,}/g," "),null!==(data=data.Data)&&data.length>0){isEnglish=/^[a-z ]+$/i.test(key);for(var i=0,j=data.length;i<j&&!(index++>11);i++){switch(t=data[i],node={},k=null,kk=null,t.Country?node.isChina=this._checkCountry(t.Country):1!==t.Type&&2!==t.Type||(node.isChina=this._checkCountry(1===t.Type?t.Name:t.Datas[0].Country)),node.name=t.Name,node.extInfo="",node.isChina||(node.country=t.Country||"",node.province=t.Province||""),node.log=[t.Type,t.Name].join("|"),t.EName=(t.EName||"").trim().toLowerCase(),t.Spell=(t.Spell||"").trim().toLowerCase(),t.ShortSpell=(t.ShortSpell||"").trim().toUpperCase(),3!==t.Type&&(isEnglish?(node.extInfo=this._getExtInfo(key,[t.ShortSpell],isEnglish),""===node.extInfo&&(node.extInfo=this._getExtInfo(key,[t.Code],node.isChina),""!==node.extInfo&&(node.code="")),""===node.extInfo&&(node.extInfo=this._getExtInfo(key,[t.EName,t.Spell],isEnglish))):(node.name=this._getExtInfo(key,[t.Name],isEnglish),""===node.name&&(exname=node.name=t.Name))),t.Type){case 5:case 4:case 0:if(kk=k=0===t.Type?"scenic":"city",void 0===node.code&&"city"===k&&(node.code=t.Code),5===t.Type&&(node.value=[t.EName||t.Spell,t.Name+"("+t.Code+")",t.CityId,t.Code,t.TimeZone].join("|")),node.hasAirportCity=5===t.Type,0!==t.Type&&(node.value=[t.EName||t.Spell,t.Name+(t.Code?"("+t.Code+")":""),t.CityId||0,t.Code?t.Code:t.CityId,t.TimeZone||0].join("|"),node.hasAirportCity=!0),node.hasAirportCity){if(void 0===t.Datas||t.Datas.length<1)break;ret[k]=(ret[k]||[]).concat(node);for(var airport,td,airports=[],m=0,n=t.Datas.length;m<n;m++)td=t.Datas[m],airport={},airport.name="",airport.airportName=td.Name,airport.dist=td.Dist,airport.isAirport=!0,airport.log=[t.Type,t.Name].join("|"),airport.code=td.Code,airport.value=[t.EName||t.Spell,t.Name+"("+td.Name+")("+td.Code+")",t.CityId,t.Code,td.Code].join("|"),airports.push(airport);ret[k]=(ret[k]||[]).concat(airports),k=null}else{if(void 0!==t.Nearby&&(t.Datas=t.Nearby,delete t.Nearby),void 0===t.Datas||t.Datas.length<1){k=null;break}ret[k]=(ret[k]||[]).concat(node);var td,name,airports=[],tk={},ts={};if(t.Datas.length>1)for(var m=0,n=t.Datas.length;m<n;m++)td=t.Datas[m],td.Datas&&td.Datas.length&&(name=td.Datas[0].Name,tk[name]=(tk[name]||0)+1,ts[name]={name:td.Datas[0].EName||td.Datas[0].Spell,code:td.Datas[0].Code,id:td.Datas[0].CityId});for(var airport,kn,m=0,n=t.Datas.length;m<n;m++)td=t.Datas[m],airport={},td.Datas&&td.Datas.length&&(airport.name=td.Datas[0].Name,airport.value=[td.Datas[0].EName||td.Datas[0].Spell,airport.name+"("+td.Name+")("+td.Code+")",td.Datas[0].CityId,td.Datas[0].Code,td.Code].join("|")),airport.airportName=td.Name,airport.dist=td.Dist,airport.isNearBy=!0,airport.log=[t.Type,t.Name].join("|"),kn=airport.name,tk[kn]&&tk[kn]>1&&(airports.push({isCity:!0,isNearBy:!0,log:[t.Type,t.Name].join("|"),value:[ts[kn].name,kn+"("+ts[kn].code+")",ts[kn].id,ts[kn].code].join("|"),name:kn}),++index,delete tk[airport.name]),airports.push(airport),++index;ret[k]=(ret[k]||[]).concat(airports),k=null}break;case 3:if(kk=k="airport",void 0===t.Datas||t.Datas.length<1){k=null;break}node.name=t.Datas[0].Name,node.airportName=isEnglish?t.Name:this._getExtInfo(key,[t.Name],isEnglish),node.code=isEnglish?this._getExtInfo(key,[t.Code],!1):t.Code,""===node.code&&(node.extInfo=this._getExtInfo(key,[t.ShortSpell,t.Spell],isEnglish),node.code=t.Code),node.value=[t.Datas[0].EName||t.Datas[0].Spell,t.Datas[0].Name+"("+t.Name+")("+t.Code+")",t.Datas[0].CityId,t.Datas[0].Code,t.Code].join("|");break;case 2:case 1:kk=k=2===t.Type?"province":"country",node.country=t.Datas[0].Country,node.isCountry=1===t.Type,ret[k]=(ret[k]||[]).concat(node);for(var tnode=[],m=0,n=t.Datas.length;m<n;m++)tnode.push({name:node.name,isNearBy:!0,extInfo:node.extInfo,log:[t.Type,t.Name].join("|"),value:[t.Datas[m].EName||t.Datas[m].Spell,t.Datas[m].Name+"("+t.Datas[m].Code+")",t.Datas[m].CityId,t.Datas[m].Code].join("|"),isCountry:1===t.Type,sName:t.Datas[m].Name}),++index;ret[k]=(ret[k]||[]).concat(tnode),k=null}if(null!==k&&(ret[k]=(ret[k]||[]).concat(node)),!(void 0===t.Nearby||t.Nearby.length<1)){k=kk;for(var airport,td,airports=[],m=0,n=t.Nearby.length;m<n;m++)td=t.Nearby[m],airport={},void 0!==td.Datas&&(td.Datas&&td.Datas.length&&(airport.name=td.Datas[0].Name,airport.value=[td.Datas[0].EName||td.Datas[0].Spell,airport.name+"("+td.Name+")("+td.Code+")",td.Datas[0].CityId,td.Datas[0].Code,td.Code].join("|")),airport.airportName=td.Name,airport.dist=td.Dist,airport.isNearBy=!0,airport.log=[t.Type,t.Name].join("|"),airports.push(airport));ret[k]=(ret[k]||[]).concat(airports)}}}return{result:ret,length:index,exname:exname}},_getItemName:function(i,type,val){var ret="";switch(type){case"city":val.isNearBy?ret+="邻近机场: "+val.name+" "+(val.isCity?" 所有机场":" "+val.airportName+(val.dist?" - "+val.dist+"公里":"")):val.isAirport?ret+=val.airportName+" "+val.code:ret+=val.name+" "+(val.isChina?"":val.country+" "+val.province+" "+(val.code||""))+" "+val.extInfo,val.hasAirportCity||val.isNearBy||val.isAirport||(ret+=" - 该城市无机场");break;case"airport":val.isNearBy?ret+="邻近机场: "+val.name+" "+(val.isCity?" 所有机场":" "+val.airportName+(val.dist?" - "+val.dist+"公里":"")):(ret=val.name+" "+val.airportName,val.isChina||(ret+=" "+val.country),ret+=" "+val.code+" "+val.extInfo);break;case"scenic":val.isNearBy?ret+="邻近机场: "+val.name+(val.isCity?" 所有机场":" "+val.airportName+(val.dist?" - "+val.dist+"公里":"")):ret+=val.name+" "+val.extInfo,val.isNearBy||val.isChina||(ret+=" "+val.country),val.isNearBy||(ret+=" - 该地点为景点");break;case"province":case"country":val.isNearBy?ret+="相关城市: "+val.sName:ret+=(val.isCountry||val.isChina?"":val.country+" ")+val.name+" "+val.extInfo+" - 该地点为"+("province"===type?"省份":"国家")}return ret},_select:function(data){var _this=this;this._selectFlag=!0,setTimeout(function(){_this._selectFlag=!1}),this._initDisplay();var val=data,t=val.split("|");if(t.length>1&&(val=t[this._displayHash?this._displayHash.value:1]||""),3===t.length){try{t.push(t[1].match(/\(([a-z]{3})\)/i)[1])}catch(e){}data=t.join("|")}if(this._tmpValue=this._lastValue=val,this.target.value(val),this._clearFilter(),this._hideSuggestion(),this._hideFilter(),this.relate)for(var index in this.relate)if(this.relate.hasOwnProperty(index)){var relateEl=$(this.relate[index]);if(0===relateEl.length)continue;if(/^\d$/.test(index))index=parseInt(index,10);else{if(!(index in this._colsHash))continue;index=this._colsHash[index]}"PEK"==t[index+1]||"PVG"==t[index+1]||"NAY"==t[index+1]||"SHA"==t[index+1]?relateEl.value(t[index]+","+t[index+1]||""):relateEl.value(t[index]||"")}this.trigger("change",{arguments:{value:val,data:data}})},_unselect:function(isClearTarget){isClearTarget&&(this._tmpValue=this._lastValue=null,this.target.value(""),this._clearFilter(),this._hideSuggestion(),this._hideFilter(),this.trigger("change",{arguments:{value:"",data:""}}))},_event:function(operate,types){switch($.type(types)){case"string":types=[types];break;case"array":break;default:return}for(var type,i=0,n=types.length;i<n;i++)(type=types[i].trim())&&"string"==$.type(type)&&type in ADDITION_EVENT&&this.target[operate].apply(this.target,[type+EVENT_TAIL].concat(Array.prototype.slice.call(arguments,2)))}}),window.getPoiItemName=address.prototype._getItemName,$.mod.reg(cls)}(cQuery);;!function($){function lowestPriceCalendar(obj,opt){var _this=this;_this.isShow=!1,_this.option={DCityInput:opt.DCityInput||null,ACityInput:opt.ACityInput||null,minDate:opt.minDate?new Date(opt.minDate.replace(/-/g,"/")).getTime()<(new Date).getTime()?(new Date).toFormatString("yyyy-MM-dd"):opt.minDate:(new Date).toFormatString("yyyy-MM-dd"),maxDate:opt.maxDate||"",showPrice:opt.showPrice||!1,showWeek:opt.showWeek||!1,description:opt.description||"机票价格变动频繁，以实际成交价为准。",tipText:opt.tipText||"yyyy-MM-dd",prevEl:""!=opt.prevEl?opt.prevEl:null,listener:{Show:opt.Show||null,onFocus:opt.onFocus||null,onChange:opt.onChange||function(){},onBlur:opt.onBlur||function(){},onChangeMonth:opt.onChangeMonth||function(){},renderBefore:opt.renderBefore||function(){}}},_this.isSearchListFlag=opt.isSearchListFlag||!1,_this.isSearchListFlag&&(_this.onClickId=opt.onClickId,_this.searchType=opt.searchType),_this.data={},_this.target=$(obj),_this.value=""!=_this.target.value()?_this.target.value():(new Date).toFormatString("yyyy-MM-dd"),this.selectedDate=_this.value,_this.uid="calendar"+_this.target.uid(),_this.MaxDate=opt.MaxDate||"",_this.firstSelectedDate=_this.selectedDate,_this.workTipData={work:["2017-05-27","2017-09-30"],rest:["2017-05-28","2017-05-29","2017-05-30","2017-10-01","2017-10-02","2017-10-03","2017-10-04","2017-10-05","2017-10-06","2017-10-07","2017-10-08"]},_this.target.bind("focus",function(event){if(!_this.isShow&&(_this.init(_this.target),_this.option.listener.onFocus&&_this.option.listener.onFocus(_this),pageConfig.calendarRemouldSwitch))switch(cQuery.storage.get("calenderSource")){case"direct":_this.layOut.find("[data-bind='directCalender']").addClass("active"),_this.layOut.find("[data-bind='needChangeText']").html("直飞"),_this.layOut.find("[data-bind='wholeCalender']").removeClass("active");break;case"whole":_this.layOut.find("[data-bind='directCalender']").removeClass("active"),_this.layOut.find("[data-bind='needChangeText']").html(""),_this.layOut.find("[data-bind='wholeCalender']").addClass("active")}}),_this.target.bind("mousedown",function(event){if(_this.isSearchListFlag&&(_this.searchType=$("#FlightSearchType").value()),!_this.isShow&&(_this.init(_this.target),_this.option.listener.onFocus&&_this.option.listener.onFocus(_this),pageConfig.calendarRemouldSwitch))switch(cQuery.storage.get("calenderSource")){case"direct":_this.layOut.find("[data-bind='directCalender']").addClass("active"),_this.layOut.find("[data-bind='needChangeText']").html("直飞"),_this.layOut.find("[data-bind='wholeCalender']").removeClass("active");break;case"whole":_this.layOut.find("[data-bind='directCalender']").removeClass("active"),_this.layOut.find("[data-bind='needChangeText']").html(""),_this.layOut.find("[data-bind='wholeCalender']").addClass("active")}}),_this.target.bind("blur",function(event){_this.blur(event)}),_this.target.bind("mouseup",function(){var t=_this.target[0];t.releaseCapture&&t.releaseCapture()})}var cls={name:"lowestPrice_calendar",version:"1.0",module:lowestPriceCalendar},isMaxFlag=!1,isPastFlag=!1,isPreDisabled=!1;$.extend(lowestPriceCalendar.prototype,{template:{wrapper:'\t\t\t\t<div class="new-calendar" data-bind="all">                    <div><div class="ico prev-ico prev" data-bind="prev"></div><div class="ico next-ico next" data-bind="next"></div></div>                    <div id="${uid}" class="months-area J_calendar-box"></div>                    <div style="clear:both;"></div>                    <div class="remarks">${description}</div>                </div>',calendar:'                <div class="month">                    <div class="short-date">${dateDataList.shortdate}</div>                    <div class="week-tit"><span class="weekend">日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span class="weekend last">六</span></div>                    <table class="" >                        <tbody>                            {{each(i,dateData) dateDataList}}                                {{if i%7==0}}                                    <tr>                                {{/if}}                                    <td data-value="${dateData.id}" class="{{if dateData.None||dateData.Past||dateData.maxDate}}disabled {{/if}}{{if dateData.isSelected}} selected{{/if}} {{if dateData.LowestPrice}} lowest {{/if}}" data-bind="select">                                        <div class="ctrl-pos" style="position: relative;background-position-x:${dateData.positionX};background-position-Y:${dateData.positionY};background-image:url(${dateData.backgroundImage})">                                            {{if !dateData.None}}                                                {{if dateData.Festival}}                                                    {{if dateData.Past}}                                                        <div class="date festival" style="font-weight:bold">${dateData.Festival}</div>                                                    {{else}}                                                        <div class="date festival" style="color:#FF6600;font-weight:bold">${dateData.Festival}</div>                                                    {{/if}}                                                {{else}}                                                    <div class="date{{if dateData.today}} today{{/if}}"><strong>${dateData.date}</strong></div>                                                {{/if}}                                                {{if dateData.workTip === 1}}                                                    <div class="tip1">休</div>                                                {{else dateData.workTip === 2}}                                                    <div class="tip2">班</div>                                                {{/if}}                                                {{if dateData.showPrice}}                                                    <div class="price">{{if dateData.Price&&dateData.Price!=="--"}}<dfn>&yen;</dfn>{{/if}}{{if dateData.Price}}${dateData.Price}{{/if}}</div>                                                {{/if}}                                            {{/if}}                                        </div>                                    </td>                                {{if (i+1)%7==0}}                                    </tr>                                {{/if}}                            {{/each}}                        </tbody>                    </table>                </div>'},weekText:["pic_sun","pic_mon","pic_tue","pic_wed","pic_thu","pic_fir","pic_sat"],todayText:["pic_today","pic_tomorrow","pic_aftertomorrow"],MASK:"yyyy-MM-dd",festival:{"除夕":"c_chuxi","春节":"c_chunjie","元宵":"c_yuanxiao","清明":"c_qingming","端午":"c_duanwu","中秋":"c_zhongqiu","元旦":"c_yuandan","劳动":"c_wuyi","国庆":"c_guoqing","圣诞":"c_shengdan"},pad:function(num,len){for(num+="",len=len||2;num.length<len;)num="0"+num;return num},checkFestival:function(date){var festival=date.toDate().getFestival();for(var i in this.festival)if(this.festival.hasOwnProperty(i)&&festival.indexOf(i)>-1)return this.festival[i];return!1},getWhatDay:function(t){var a=t.toDate().toFormatString("yyyy-MM-dd"),n=this.checkFestival(a);if(n)return n.replace("c_","pic_");var i=new Date,s=new Date(i.getFullYear(),i.getMonth(),i.getDate()),r=parseInt((t-s)/864e5,10);return r>=0&&3>r?this.todayText[r]:this.weekText[t.getDay()]},setWeek:function(target){var showTarget=null;showTarget=target?$(target):this.target;var date=showTarget.value().toDate();if(date){var i=this.getWhatDay(date);i&&showTarget.offset().width>=105&&showTarget.css({"background-image":"url(//pic.c-ctrip.com/cquery/"+i+".png)","background-position":"right center","background-repeat":"no-repeat"})}else showTarget.css({"background-image":"none"})},init:function(obj){var _this=this,opt=_this.option;if(_this.initTpl(),opt.prevEl){var prevDate=$("#"+_this.option.prevEl).value();""!=prevDate&&(_this.option.minDate=prevDate,pageConfig.lowestCalendarTypeSwitch?_this.selectedDate=$("#"+_this.option.prevEl).attr("selectedDate")||_this.selectedDate:_this.selectedDate=prevDate)}0==$("#"+_this.uid).length&&$.container.append(_this.layOut),_this.value=""!=_this.target.value()?_this.target.value():_this.selectedDate,_this.layOut=$("#"+_this.uid),_this.content=$("#c_"+_this.uid),_this.content.html(""),_this.showAllDay(_this.selectedDate),_this.show()},initTpl:function(){var _this=this,uid=_this.uid,template=_this.template,calendarDiv=document.createElement("div");calendarDiv.id=uid;var calendarDivObj=$(calendarDiv);this.hostData=_this.option.listener.renderBefore(),calendarDivObj.html($.tmpl.render(template.wrapper,{uid:"c_"+uid,description:_this.option.description})),_this.layOut=calendarDivObj,_this.initLayoutEvent(),_this.content=calendarDivObj.find("#c_"+uid)},show:function(){this.updateRange(this.hostData.startDate,this.hostData.endDate),this.setOffset(),this.isShow=!0},blur:function(event){var _this=this;_this.hide(),_this.option.listener.onBlur&&setTimeout(function(){_this.option.listener.onBlur(this,_this.target)})},setOffset:function(){var _this=this;if(_this.isSearchListFlag){var _left=_this.target.offset().left,_disOffset=_this.layOut.find(".new-calendar").offset().width-_this.target.offset().width;"M"!==_this.searchType&&"DDate1"===_this.onClickId&&(_left+=203),_this.layOut.offset({top:_this.target.offset().top+_this.target.offset().height,left:_left-_disOffset})}else _this.layOut.offset({top:_this.target.offset().top+_this.target.offset().height,left:_this.target.offset().left})},hide:function(){$("#"+this.uid).remove(),this.isShow=!1},showAllDay:function(str,directorStr,data){isMaxFlag=!1,isPastFlag=!1,isPreDisabled=!1,str=str.replace(/-/g,"/");var _this=this;_this.update(str),newDd=new Date(str);var dateDataList=_this.handleData("new","firstMonth",data),html=[$.tmpl.render(_this.template.calendar,{dateDataList:dateDataList[0]}),$.tmpl.render(_this.template.calendar,{dateDataList:dateDataList[1]})].join("").replace(/    /g,"");"next"!=directorStr&&directorStr?"prev"==directorStr&&_this.content.prepend($.instance(html)):_this.content.append($.instance(html)),_this.initContentEvent(),isPastFlag||isPreDisabled?_this.layOut.find("[data-bind='prev']").removeClass("prev-ico").addClass("un-prev-ico"):_this.layOut.find("[data-bind='prev']").removeClass("un-prev-ico").addClass("prev-ico"),isMaxFlag?_this.layOut.find("[data-bind='next']").removeClass("next-ico").addClass("un-next-ico"):_this.layOut.find("[data-bind='next']").removeClass("un-next-ico").addClass("next-ico")},initLayoutEvent:function(){var _this=this;_this.layOut.bind("mousedown",function(event){var target=$(event.target||event.srcElement);if(target.attr("data-bind")||(target=target.parents("[data-bind]")),target.length>0){if("close"==target.attr("data-bind"))return void _this.hide();"prev"==target.attr("data-bind")&&!target.hasClass("un-prev-ico")||"next"==target.attr("data-bind")&&!target.hasClass("un-next-ico")?_this.changeMn(target.attr("data-bind")):"wholeCalender"==target.attr("data-bind")?(cQuery.storage.set("calenderSource","whole"),_this.option.listener.onFocus&&_this.option.listener.onFocus(_this),$(target).addClass("active"),_this.layOut.find("[data-bind='directCalender']").removeClass("active"),_this.layOut.find("[data-bind='needChangeText']").html(""),window.IndexCalendarClickUbt&&window.IndexCalendarClickUbt.wholeCalenderaction++,Ctrip.Flight&&Ctrip.Flight.Moudule&&Ctrip.Flight.Moudule.PriceCalendar&&Ctrip.Flight.Moudule.PriceCalendar.lowestPriceLinkInited&&Ctrip.Flight.Moudule.PriceCalendar.update(window.FlightData.lps,window.FlightData.todayLowestSalePriceForBackfill||window.FlightData.lp)):"directCalender"==target.attr("data-bind")&&(cQuery.storage.set("calenderSource","direct"),_this.option.listener.onFocus&&_this.option.listener.onFocus(_this,"direct"),$(target).addClass("active"),_this.layOut.find("[data-bind='wholeCalender']").removeClass("active"),_this.layOut.find("[data-bind='needChangeText']").html("直飞"),window.IndexCalendarClickUbt&&window.IndexCalendarClickUbt.directCalenderaction++,Ctrip.Flight&&Ctrip.Flight.Moudule&&Ctrip.Flight.Moudule.PriceCalendar&&Ctrip.Flight.Moudule.PriceCalendar.lowestPriceLinkInited&&Ctrip.Flight.Moudule.PriceCalendar.update(window.FlightData.lpsd,ResultList.getDirectFlightLowestPrice(window.FlightData))),event.stop(),_this.target[0].setCapture&&_this.target[0].setCapture()}}),_this.layOut.bind("mouseover",function(event){var target=$(event.target||event.srcElement);if(target.attr("data-value")||(target=target.parents("[data-value]")),target.length&&target.attr("data-value")&&!target.hasClass("selected")&&!target.hasClass("disabled"))if("start"===_this.hostData.type){if(!_this.hostData.endDate)return $(target).addClass("hover"),event.stop(),!1;var start=new Date(target.attr("data-value").replace(/-/g,"/")).getTime(),end=new Date(_this.hostData.endDate.replace(/-/g,"/")).getTime();start<end?(_this.updateRange(target.attr("data-value"),_this.hostData.endDate),$(target).addClass("hover")):start>end&&(_this.layOut.find("[data-value]").each(function(item,index){item.removeClass("selected-range")}),$prev=_this.layOut.find("[data-value="+_this.hostData.startDate+"]"),$prev.removeClass("selected"),$(target).addClass("hover"))}else"end"===_this.hostData.type&&_this.updateRange(_this.hostData.startDate,target.attr("data-value"))}),_this.layOut.bind("mouseout",function(event){var target=$(event.target||event.srcElement);target.attr("data-value")||(target=target.parents("[data-value]")),target.length&&target.attr("data-value")&&!target.hasClass("selected")&&!target.hasClass("disabled")?($(target).removeClass("hover"),event.stop()):_this.updateRange(_this.hostData.startDate,_this.hostData.endDate)})},updateRange:function(startDate,endDate){var end,start=new Date(startDate.replace(/-/g,"/")).getTime();end=endDate?new Date(endDate.replace(/-/g,"/")).getTime():-1,this.layOut.find("[data-value]").each(function(item,index){var cur=item.attr("data-value");cur&&(cur=new Date(cur.replace(/-/g,"/")).getTime(),cur===start||cur===end?item.removeClass("selected-range").removeClass("hover").addClass("selected"):cur>start&&cur<end?item.addClass("selected-range").removeClass("hover").removeClass("selected"):item.removeClass("selected-range").removeClass("hover").removeClass("selected"))})},initContentEvent:function(){var _this=this;_this.content.bind("mousedown",function(event){var target=$(event.target||event.srcElement);target.attr("data-value")||(target=target.parents("[data-value]")),!target.attr("data-value")||target.hasClass("none")||target.hasClass("disabled")||_this.select(target),event.stop()})},handleData:function(type,firstMonth,data){function createData(curMonth){for(var sumDays=new Date(_this.showYear,curMonth,0).getDate(),nowDate=new Date(_this.showYear,curMonth-1,1),firstDay=nowDate.getDay(),dateDataList=[],dayLen=sumDays,dateDataOri={LowestPrice:!1,None:!0,festival:!1,today:!1,isSelected:!1,Price:"",Disabled:!1},j=0;j<cycleLen;j++){var monthPic=curMonth<10?"0"+curMonth:13==curMonth?"01":curMonth;if(j<firstDay||j>=dayLen+firstDay){var dateNone=$.extend({},dateDataOri);dateNone.backgroundImage="//pic.c-ctrip.com/flight/fdo/itinerary/mouths/"+monthPic+".png",dateNone.positionX=j%7*-54+"px",dateNone.positionY=-43*(Math.ceil(j/7)-1)+"px",dateDataList.push(dateNone)}else{var Price="",lowestPrice=!1,isToday=!1,days=j+1-firstDay,date=new Date(_this.showYear,curMonth-1,days),key=date.toFormatString(_this.MASK),today=(new Date).toFormatString(_this.MASK),selected=_this.value==key||_this.hostData.startDate==key||_this.hostData.endDate==key,dateTime=date.getTime(),minDateTime=new Date(_this.option.minDate.replace(/-/g,"/")).getTime(),isPastTag=dateTime<minDateTime,preDisabled=dateTime<=minDateTime,festival=key.toDate()?key.toDate().getFestival():"";today==key&&(days="今",isToday=!0);var workTip=_this.getWorkTip(key),month=curMonth<10?"0"+curMonth:curMonth,ismaxDate=!!_this.MaxDate&&dateTime>new Date(_this.MaxDate).getTime();showPrice&&data&&data[key]?Price=data[key]:showPrice&&data&&0===data[key]&&(Price="--"),data&&data[key]==_this.lowestPrice[month]&&(lowestPrice=!0);var month=curMonth<10?"0"+curMonth:curMonth,dateData={date:days,today:isToday,Festival:festival.substring(0,2).replace(/\u52b3\u52a8/,"五一"),None:!1,Price:Price||"",LowestPrice:lowestPrice,Past:isPastTag,id:key,workTip:workTip,Month:month,maxDate:ismaxDate,isSelected:selected,preDisabled:preDisabled,showPrice:showPrice,backgroundImage:"//pic.c-ctrip.com/flight/fdo/itinerary/mouths/"+monthPic+".png",positionX:j%7*-54+"px",positionY:-43*(Math.ceil(j/7)-1)+"px"};dateData.Past&&!isPastFlag&&(isPastFlag=!0),dateData.preDisabled&&!isPreDisabled&&(isPreDisabled=!0),dateData.maxDate&&!isMaxFlag&&(isMaxFlag=!0),dateDataList.push(dateData)}}var now=nowDate.toFormatString(_this.MASK).split("-");return dateDataList.shortdate="<span>"+now[0]+"</span>年<strong>"+now[1]+"</strong>月",dateDataList}var _this=this,cycleLen=42,dateDataList=[],showPrice=_this.option.showPrice;return dateDataList[0]=createData(parseInt(_this.showMonth,10)),dateDataList[1]=createData(parseInt(_this.showMonth,10)+1),dateDataList},getWorkTip:function(str){return this.workTipData.work.indexOf(str)>-1?2:this.workTipData.rest.indexOf(str)>-1?1:""},update:function(str){var curDate,_this=this;curDate=str.indexOf("日期")>-1?new Date:new Date(str),_this.showYear=curDate.toFormatString("yyyy"),_this.showMonth=curDate.toFormatString("MM"),_this.showDay=curDate.toFormatString("dd")},select:function(target){var id=target.attr("data-value"),_this=this,value=new Date(id.replace(/-/g,"/")).toFormatString(this.option.tipText);_this.target.value(value),pageConfig.lowestCalendarTypeSwitch?_this.target.attr("selectedDate",_this.selectedDate):_this.selectedDate=id,_this.value=_this.selectedDate,_this.hide(),_this.option.listener.onChange&&setTimeout(function(){_this.option.listener.onChange(this,_this.target,value,!1)}),this.option.showWeek&&_this.setWeek(_this.target)},handleChangeMn:function(directorStr){var _this=this;this.showYear=parseInt(_this.showYear,10),this.showMonth=parseInt(_this.showMonth,10),"next"==directorStr?this.showMonth+=2:this.showMonth-=2,this.showMonth<1?(this.showMonth+=12,this.showYear-=1):_this.showMonth>12&&(this.showMonth-=12,this.showYear=_this.showYear+1)},changeMn:function(directorStr){var _this=this;if(!_this.animate){this.handleChangeMn(directorStr);var minDate=new Date(_this.option.minDate.replace(/-/g,"/")),minDateMonth=minDate.toFormatString("MM"),minDay=minDate.toFormatString("dd");minDateMonth!=_this.showMonth?_this.showDay="01":_this.showDay=minDay,this.selectedDate=_this.showYear+"-"+_this.showMonth+"-"+_this.showDay;var data=_this.option.listener.onChangeMonth&&_this.option.listener.onChangeMonth(_this);_this.showAllDay(_this.selectedDate,directorStr,data),_this.slideEffect(directorStr),this.updateRange(this.hostData.startDate,this.hostData.endDate)}},slideEffect:function(directorStr){var _this=this;_this.animate=!0,"next"==directorStr?setTimeout(function(){window.Utils.animate(_this.content[0],"marginLeft",-1*_this.content[0].offsetWidth+"px",200,function(){$(_this.content.find(".month")).eq(0).remove(),$(_this.content.find(".month")).eq(0).remove(),_this.content[0].style.marginLeft=0,_this.animate=!1})}):(_this.content[0].style.marginLeft=-_this.content[0].offsetWidth+"px",setTimeout(function(){window.Utils.animate(_this.content[0],"marginLeft",0,200,function(){$(_this.content.find(".month")).eq(2).remove(),$(_this.content.find(".month")).eq(2).remove(),_this.option.listener.onChangeMonth&&_this.option.listener.onChangeMonth(_this),_this.animate=!1})}))}}),$.mod.reg(cls)}(cQuery);;function isLeapYear(pYear){return!isNaN(parseInt(pYear))&&(pYear%4==0&&pYear%100!=0||pYear%100==0&&pYear%400==0)}function guessClick(dcity,acity,ddate,index,type,price){var num=1,ctmType="",traceType="";"favData"==type?(num=index+1,ctmType="fld_hp_rec_fav_t_",traceType="rec"):(num=8+(index+1),ctmType="fld_hp_rec_xstj_t_",traceType="hot");var url="/booking/"+dcity+"-"+acity+"-day-1.html?SortByPrice=true&DDate1="+ddate+"#ctm_ref="+ctmType+(index+1),prod=dcity+"-"+acity,log={dcity:dcity,prod:prod,type:traceType,price:price,date:ddate,num:num},value=$.tmpl.render("total=12&city=${dcity}&prod${num}=${prod}&type${num}=${type}&price${num}=${price}&date${num}=${date}",log);try{window.$_bf&&!0===window.$_bf.loaded?window.$_bf.tracklog("fld.hp.rec",value):setTimeout(function(){window.$_bf&&!0===window.$_bf.loaded&&window.$_bf.tracklog("fltdomestic.poi",value)},500)}catch(ex){$.log(ex,"setUTB_EDM")}window.open(url,"_blank")}window.ShowPassagerPro||(window.ShowPassagerPro=function(){}),window.ToSearchA||(window.ToSearchA=function(){}),window.DomReadyIndex||(window.DomReadyIndex=function(){}),window.disableEnter||(window.disableEnter=function(){}),$.browser.isIE6&&document.getElementById("cui_hd")&&(document.getElementById("cui_hd").style.width="1180px"),window.GetServiceAnnouncements=function(){if(!window.recommendTxt){var rmtjobj=document.createElement("script");rmtjobj.type="text/javascript",rmtjobj.async=!0,rmtjobj.src=$("#rmtjurl")[0].value+"/webhome/chs/fltDomestic/rmtj.txt";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(rmtjobj,s);var setData=function(){var obj=window.recommendTxt;if(obj&&obj.length>0){for(var html="",i=0;i<obj.length;i++)if(obj[i]){var array=obj[i].split("|"),_ubtinx=i+1,_ubt="ServicePost"+_ubtinx;null!=array&&3==array.length&&(html+='<li><a rel="nofollow" href="'+array[2]+'" target="_blank" data-ubt='+_ubt+">&middot;"+array[0]+"</a>")}html+='<li class="more"><a rel="nofollow" data-ubt="MoreServicePost" href="http://pages.c-ctrip.com/webhome/chs/fltDomestic/newsindex.htm#ctm_ref=fld_hp_srvan_def_t_7" target="_blank">'+online.IndexJsTip.moreAnnouncement+" &gt;&gt;</a></li>",$("#ulAnnouncement").html(html)}else setTimeout(setData,300)};setData()}},function(window,$,online){function LoadLowestPriceTop10(){return}function LowPriceTop10Click(dCity,aCity){var oDCity=dCity.split("|"),oACity=aCity.split("|");document.getElementById("HiddenLowestPriceDepartCity").value=oDCity[0],document.getElementById("HiddenLowestPriceArriveCity").value=oACity[0],document.getElementById("LowestPriceDepartCity").value=oDCity[1],document.getElementById("LowestPriceArriveCity").value=oACity[1],LoadLowestPriceCalendarData()}function SetLowPriceSelectedItemStyle(){return}function initAnimate(mini){var directContent=$("#DirectSpecialPrice"),directPrev=$("#DirectPrev"),directNext=$("#DirectNext");directContent.length&&(directContent[0].style.width="2260px",sliderAnimate(directContent,directNext,directPrev,"dl",mini?500:708,mini?2:3)),RecommendContainer.length&&sliderAnimate(RecommendContainer,RecommendContainer.parent().find(">.next"),RecommendContainer.parent().find(">.prev"),">div",780,mini?3:4)}function ShowValidateSeachSee(inputId,num){online.validateObj.method("show",{$obj:$("#"+inputId),data:online.msg.ERROR_FLIGHT[num],removeErrorClass:!0,hideEvent:"blur",isFocus:!0})}function SetDynamicTimer(){var repeater2={currentPageNo:1,options:null,setOptions:function(options){this.options=options||{}},run:function(){for(var totalPages=this.options.elements.length%this.options.pageSize==0?parseInt(this.options.elements.length/this.options.pageSize):parseInt(this.options.elements.length/this.options.pageSize)+1,pageStartIndex=(this.currentPageNo-1)*this.options.pageSize,pageEndIndex=this.currentPageNo*this.options.pageSize-1,i=0;i<this.options.elements.length;i++)this.options.elements[i].style.display=i>=pageStartIndex&&i<=pageEndIndex?"":"none";++this.currentPageNo>totalPages&&(this.currentPageNo=1);var thisobj=this,wrapperFun=function(thisobj){thisobj.run()};setTimeout(function(){wrapperFun(thisobj)},this.options.delay)}};repeater2.setOptions({elements:$("#pDynamicShowList").find("span"),pageSize:3,delay:5e3}),repeater2.run()}var document=window.document,ServerTime=window.ServerTime?window.ServerTime.toDate():new Date;$.log("serverTime",ServerTime),cQuery.storage.set("FD_SearchPage_filterClasses",null),cQuery.storage.set("FD_SearchPage_onlyCf","");var _fn={};_fn.releaseno=$("#releaseno").length?$("#releaseno").value():"?"+Math.random(),window.adCookieDomain=window.location.host.substr(window.location.host.indexOf(".")+1)+"/";var R_v=((window.WebResourcePath||"R1").match(/ResFlightOnline\/(\w*)\/Booking/i)||[])[1]||"R1";window.g_adsconfig="//webresource.c-ctrip.com/ResFlightOnline/"+R_v+"/Booking/html/bkupjs/showNew1.js"+_fn.releaseno,window.$LAB.script({src:"//crm.ws.ctrip.com/Customer-Market-Proxy/AdCallProxyV2.aspx?biztype=101&adlist=%5B%7B%22pagecode%22%3A1%2C%22domid%22%3A%22adpic%22%2C%22type%22%3A0%7D%5D&fscreen=0"}),$.fn.val=$.fn.val||$.fn.value,$.noop=$.noop||function(){},$.fn.parent=$.fn.parent||function(){return this[0]?$(this[0].parentNode||null):$()},$.fn.eq=$.fn.eq||function(n){var end=n>=0?n+1:n-1;return this.slice(n,end)},$.fn.index=$.fn.index||function(finder){var context=finder?this:this.parent(),item=finder||this;return context.indexOf(item)},$.fn.siblings=$.fn.siblings||function(selector){selector=selector||"*";var self=this[0],all=this.parent().find(">"+selector),i=all.index(self);return i>=0?all.splice(i,1):all};var hasOwn=Object.prototype.hasOwnProperty;$.each=function(obj,callback){if(obj.forEach)obj.forEach(callback);else if(obj.each)obj.each(callback);else if("array"==$.type[obj])for(var item,i=0,len=obj.length;(item=len[i++])&&0!=callback.call(item,i););else for(var k in obj)if(hasOwn.call(obj,k)&&0==callback.call(obj[k],k))break},$.each(["next","prev"],function(v){$.fn[v]=$.fn[v]||function(){for(var fix="prev"==v?"previousSibling":"nextSibling",result=this[fix]();result&&1!=result[0].nodeType;)result=result[fix]();return 1==result[0].nodeType?result:$()}}),_fn.now=function(type){var now=new Date,res=now;switch(type){case"timestamp":res=now.getTime();break;case"Ymd":res=now.toFormatString("yyyy/MM/dd"),void 0!=arguments[1]&&(res=res.replace(/\//g,arguments[1]));break;case"week":res=now.getDay()}return res},_fn.css3supports=function(){var div=document.createElement("div"),vendors="Khtml O Moz Webkit".split(" "),len=vendors.length;return function(prop){if(document.all&&!document.addEventListener)return!1;if(prop in div.style)return!0;if("-ms-"+prop in div.style)return!0;for(prop=prop.replace(/^[a-z]/,function(val){return val.toUpperCase()});len--;)if(vendors[len]+prop in div.style)return!0;return!1}}(),_fn.animate=function(){var css3Animate=_fn.css3supports("transition"),interval=!1;if(css3Animate)return function(element,cssName,cssVal,speed,callback){clearTimeout(interval),speed/=1e3,!$(element).data("defaultCss")&&$(element).data("defaultCss",element.style.cssText||""),$(element).css("-moz-transition","all "+speed+"s ease-out"),$(element).css("-webkit-transition","all "+speed+"s ease-out"),$(element).css("-ms-transition","all "+speed+"s ease-out"),$(element).css("transition","all "+speed+"s ease-out"),element.style.cssText=$(element).data("defaultCss")+";-moz-transition:all {speed}s ease-out;-webkit-transition:all {speed}s ease-out;-ms-transition:all {speed}s ease-out;-o-transition:all {speed}s ease-out;transition:all {speed}s ease-out".replace(/\{speed\}/g,speed),$(element).css(cssName,cssVal);var start=(new Date).getTime();interval&&clearInterval(interval),interval=setInterval(function(){(new Date).getTime()-start>=1e3*speed&&(clearInterval(interval),$(element).css("-moz-transition","none"),$(element).css("-webkit-transition","none"),$(element).css("-ms-transition","none"),$(element).css("transition","none"),callback&&callback())},20)};var easeFn={easeInSine:function(pos){return 1-Math.cos(pos*(Math.PI/2))},easeOutSine:function(pos){return Math.sin(pos*(Math.PI/2))}},transition=function(el){el.animateTimeId&&clearTimeout(el.animateTimeId);var options=arguments[1]||{},begin=options.begin,change=options.change,duration=options.duration||500,field=options.field,ftp=options.ftp||50,onEnd=options.onEnd||function(){},ease=options.ease||easeFn.easeOutSine,end=begin+change,startTime=_fn.now("timestamp"),run=function(){el.animateTimeId=setTimeout(function(){var newTime=_fn.now("timestamp"),timestamp=newTime-startTime,delta=ease(timestamp/duration);el.style[field]=Math.ceil(begin+delta*change)+"px",duration<=timestamp?(el.style[field]=end+"px",onEnd(),clearTimeout(el.animateTimeId)):run()},1e3/ftp)};run()};return function(element,cssName,cssVal,speed,callback){var $element=$(element);element.animateTimeId&&clearTimeout(element.animateTimeId);var begin=parseInt($element.css(cssName),10)||0;transition(element,{begin:begin,change:parseInt(cssVal,10)-begin,duration:speed,field:cssName,onEnd:callback})}}(),_fn.Cookie={set:function(name,val,days,domain){days=days||7;var exp=_fn.now();exp.setTime(exp.getTime()+24*days*3600*1e3),document.cookie=name+"="+val+"; expires="+exp.toGMTString()+"; path=/"+(domain?"; domain="+domain:"")},get:function(name){var arr=document.cookie.match(new RegExp("(^| )"+name+"=([^;]*)(;|$)"));return null!=arr?unescape(arr[2]):null},del:function(name){var exp=_fn.now();exp.setTime(exp.getTime()-1);var cval=_fn.cookies(name);null!=cval&&(document.cookie=name+"="+cval+";expires="+exp.toGMTString())}},_fn.ALLCITY={},_fn.CITYCODE=function(){var isReady=!1,readyList=[],_code2name={},_name2code={},returnFn={ready:function(fn){isReady?fn&&fn(_code2name,_name2code):readyList.push(fn)}},resource="//webresource.c-ctrip.com/code/cquery/resource/address/flight/flight_new_poi_gb2312.js"+_fn.releaseno;return $.jsonp(resource,{onload:function(data){if(isReady=!0,readyList.length)for(var i=0,len=readyList.length;i<=len;)returnFn.ready(readyList[i]),i++;var d=data.suggestion,suggestionArr=[],reg=new RegExp("[A-Z]+");for(var letter in d)reg.test(letter)&&suggestionArr.push(d[letter]);for(var i=0,len=suggestionArr.length;i<len;i++)for(var key in suggestionArr[i])for(var k=0,cityNum=suggestionArr[i][key].length;k<cityNum;k++){var res=suggestionArr[i][key][k].data.split("|");_code2name[res[3]]?_code2name[res[3]]=_code2name[res[3]]+"|"+res[1]:_code2name[res[3]]=res[1],_name2code[res[1]]=res[3],res[3]&&(_fn.ALLCITY[res[3]]={PingYin:res[0],Id:res[2]})}_fn.ALLCITY.Inited=!0}}),returnFn}(),_fn.getFestival=function(){var festival={"0101":"元旦","0501":"劳动节",1001:"国庆节",1225:"圣诞节"},festivalNameConfig="除夕,春节,元宵节,清明节,端午节,中秋节".split(","),festivalConfig={2015:"0218,0219,0305,0405,0620,0927",2016:"0207,0208,0222,0404,0609,0915",2017:"0127,0128,0211,0404,0530,1004",2018:"0215,0216,0302,0405,0618,0924",2019:"0204,0205,0219,0405,0501,0913",2020:"0124,0125,0208,0404,0625,1001"},ArrayIndexOf=function(arr,val){if(arr.indexOf)return arr.indexOf(val);for(var i=0,len=arr.length;i<len;i++)if(arr[i]===val)return i;return-1};return function(_year,_month,_date){_year+="",_month=("0"+_month).slice(-2),_date=("0"+_date).slice(-2);var isfestival="";if(festival[_month+_date])isfestival=festival[_month+_date];else if(festivalConfig[_year]){var index=ArrayIndexOf(festivalConfig[_year].split(","),_month+_date);index>=0&&(isfestival=festivalNameConfig[index])}return isfestival}}(),_fn.Calendar=function(){var $tableCalendar,Date=window.Date,$loading=$("#divLowestPriceCalendarLoading,#pLowestPriceCalendarIocLoading"),$departInput=$("#HiddenLowestPriceDepartCity"),$arriveInput=$("#HiddenLowestPriceArriveCity"),$depart=$("#LowestPriceDepartCity"),$arrive=$("#LowestPriceArriveCity"),$calendarContainer=$("#spanCalendar"),$prev=$("#CalendarPrev"),$next=$("#CalendarNext"),jsTip=window.online.IndexJsTip;$calendarContainer[0].style.cssText="height: 389px; overflow: hidden;width: 100%; margin-top: 0px;";var tipNoResult=document.createElement("div");tipNoResult.className="alert_box",tipNoResult.style.cssText="left:0px;top:0px",$calendarContainer.parent().append(tipNoResult);var page=0,animateTop=[],tip_none=$("p.tip_none")[0],isGb2312="gb2312"==$.config("charset"),tips={noAriLine:isGb2312?"无直飞航班":"無直飛航班",noAriport:isGb2312?"没有机场":"沒有機場",noData:isGb2312?"暂无低价数据":"暫無低價數據",searchPrice:isGb2312?"查询实时机票价格":"查詢實時機票價格"},_calendar={lowestPriCalDays:pageConfig.LowestPriCalQueryDaysOneway?pageConfig.LowestPriCalQueryDaysOneway:90,init:function(){var lastSearchCity=cQuery.storage.get("FD_Index_LowestPriceCalendarCity");lastSearchCity?(lastSearchCity=lastSearchCity.split("|"),lastSearchCity.length&&lastSearchCity[0]!=lastSearchCity[1]&&($departInput.value(lastSearchCity[0]),$arriveInput.value(lastSearchCity[1]),lastSearchCity[2]&&lastSearchCity[3]?($depart.value(lastSearchCity[2]),$arrive.value(lastSearchCity[3]),$depart.attr("data-oldval",$depart.value()),$arrive.attr("data-oldval",$arrive.value()),_calendar.render()):_fn.CITYCODE.ready(function(code2name,name2code){$depart.value(code2name[lastSearchCity[0]].indexOf("|")>-1?code2name[lastSearchCity[0]].split("|")[0]:code2name[lastSearchCity[0]]),$arrive.value(code2name[lastSearchCity[1]].indexOf("|")>-1?code2name[lastSearchCity[1]].split("|")[0]:code2name[lastSearchCity[1]]),$depart.attr("data-oldval",$depart.value()),$arrive.attr("data-oldval",$arrive.value()),_calendar.render()}))):""==$departInput.value()||""==$arriveInput.value()||""==$depart.value()||""==$arrive.value()?($departInput.value("SHA"),$arriveInput.value("BJS"),$depart.value("上海"),$arrive.value("北京"),$depart.attr("data-oldval",$depart.value()),$arrive.attr("data-oldval",$arrive.value()),_calendar.render()):_calendar.render(),$depart.parent().find("a.lowprice_change").attr("hidefocus","true").attr("tabindex",-1).css("outline","none").bind("click",function(e){if(e.preventDefault(),$departInput.value()==$arriveInput.value())return!1;if(""!=$depart.attr("data-oldval")&&""!=$arrive.attr("data-oldval")){var departInputVal=$departInput.value();$departInput.value($arriveInput.value()),$arriveInput.value(departInputVal);var departVal=$depart.value();$depart.value($arrive.value()),$arrive.value(departVal),$depart.attr("data-oldval",$depart.value()),$arrive.attr("data-oldval",$arrive.value()),_calendar.render()}}),$calendarContainer.bind("click",function(e){e.preventDefault();var target=$(e.target);(target.is("td[data-date]")||target.parent().is("td[data-date]")||target.parent().parent().is("td[data-date]"))&&(target.parent().is("td[data-date]")&&(target=target.parent()),target.parent().parent().is("td[data-date]")&&(target=target.parent().parent()),ubt&&(target.hasClass("lowest")?ubt.c_select_lp_price=(ubt.c_select_lp_price||0)+1:ubt.c_select_price=(ubt.c_select_price||0)+1),window.location.href="/domestic/booking/"+$departInput.value().split(",")[0]+"-"+$arriveInput.value().split(",")[0]+"-day-1.html?SortByPrice=true&ddate1="+target.attr("data-date").replace(/\//g,"-")+"#ctm_ref=fld_hp_lp_def_p_1")});var animate=function(){0===page?$prev.addClass("prev_disable"):page===animateTop.length-1?$next.addClass("next_disable"):($prev.removeClass("prev_disable"),$next.removeClass("next_disable")),_fn.animate($tableCalendar[0],"marginTop",-animateTop[page]+"px",200),1==page&&animateTop[page]<390?($tableCalendar.find("tr[data-key=0]").last().removeClass("prevmonth"),$tableCalendar.find("tr[data-key=1]").first().removeClass("nextmonth")):0==page&&animateTop[1]<390&&($tableCalendar.find("tr[data-key=0]").last().addClass("prevmonth"),$tableCalendar.find("tr[data-key=1]").first().addClass("nextmonth"));var CalendarFix=document.getElementById("CalendarFix");CalendarFix&&(0==page?_fn.animate(CalendarFix,"marginTop","65px",200):1==page&&_fn.animate(CalendarFix,"marginTop",0,200))};$prev.bind("click",function(e){e.preventDefault(),ubt&&(ubt.c_leftmore_calender=(ubt.c_leftmore_calender||0)+1),page>0&&(page--,animate())}),$next.bind("click",function(e){e.preventDefault(),ubt&&(ubt.c_rightmore_calender=(ubt.c_rightmore_calender||0)+1),page<animateTop.length-1&&(page++,animate())})},setEmpty:function(){$calendarContainer.html('<table class="calendar"><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><th></th></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><th></th></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><th></th></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><th></th></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><th></th></tr><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><th></th></tr></table>'),$prev.addClass("prev_disable"),$next.addClass("next_disable")},renderAjax:null,render:function(){try{this.renderAjax&&this.renderAjax.abort&&this.renderAjax.abort()}catch(ex){}if(""!=$depart.attr("data-oldval")&&""!=$arrive.attr("data-oldval")){var depart=$departInput.value(),arrive=$arriveInput.value();depart.indexOf(",")>-1&&(depart=depart.split(",")[0]),arrive.indexOf(",")>-1&&(arrive=arrive.split(",")[0]);var url="/Domestic/ajax/Get90DaysLowestPrice?dcity="+depart.toUpperCase()+"&acity="+arrive.toUpperCase()+"&searchType=S&r="+Math.random();_calendar.loading.show(),this.renderAjax=$.ajax(url,{onabort:function(){},onerror:function(){_calendar.renderAjax=null},onsuccess:function(data){_calendar.renderAjax=null,cQuery.storage.set("FD_Index_LowestPriceCalendarCity",depart+"|"+arrive+"|"+$depart.value()+"|"+$arrive.value()),cQuery.storage.expire("FD_Index_LowestPriceCalendarCity",21600);try{var calendarData=$.parseJSON(data.responseText)}catch(ex){var calendarData={ResultCode:null,Prices:{}}}_calendar.loading.hide(),$calendarContainer.css("marginTop",0),page=0,$prev[0].className="prev prev_disable",$next[0].className="next";var firstDay;if(calendarData.Prices)for(var k in calendarData.Prices){if(firstDay)break;firstDay=k}var calendar=_calendar.getHTML(calendarData.Prices);$calendarContainer.html(calendar.html),$tableCalendar=$("#tableCalendar");try{var lowestPriCalMonths=3;_calendar.lowestPriCalDays&&(lowestPriCalMonths=Math.floor(_calendar.lowestPriCalDays/30));var lastMonthStr=$tableCalendar.find("tr[data-key="+lowestPriCalMonths+"]").eq(1).find("th");if(""==lastMonthStr.html()){var month=lastMonthStr.parent().attr("data-m").split("-");lastMonthStr.html("<span>"+month[0]+jsTip.year+"</span>"+parseInt(month[1],10)+jsTip.month),lastMonthStr.addClass("calendarThPadding")}}catch(ex){}try{for(var k in calendar.lowest)calendar.lowest.hasOwnProperty(k)&&!1!==calendar.lowest[k]&&$calendarContainer.find("tr[data-m="+k.replace("/","-")+'] td[price="'+calendar.lowest[k]+'"]').addClass("lowest");if(1==calendar.isEmpty){_calendar.setEmpty(),_calendar.loading.hide();var url="/domestic/booking/"+$departInput.value()+"-"+$arriveInput.value()+"-day-1.html?SortByPrice=true#ctm_ref=fld_hp_lp_his";_calendar.showTipNoResult($depart.value(),$arrive.value(),url)}else tip_none.style.display="none",$("#divLowestPriceCalendarLoading")[0].style.display="none";var firstMonthCols=$tableCalendar.find("tr[data-key=0]"),containerTop=$calendarContainer.offset().top;animateTop=[0];var lowestPriCalMonths=3;_calendar.lowestPriCalDays&&(lowestPriCalMonths=Math.floor(_calendar.lowestPriCalDays/30));for(var aMonth=1;aMonth<=lowestPriCalMonths;aMonth++){var trKey="tr[data-key="+aMonth+"]";$tableCalendar.find(trKey)&&$tableCalendar.find(trKey).length&&animateTop.push($tableCalendar.find(trKey).first().offset().top-containerTop)}if(firstMonthCols.length<=2){var th=$tableCalendar.find("tr[data-key=1]").eq(1).find("th").get(0);th.style.cssText="position:relative;vertical-align:top;height:65px;text-align:left",th.innerHTML='<div id="CalendarFix" style="width:'+(th.clientWidth||118)+'px;padding:10px 0;height:45px;text-align:center;border:none;position:absolute;margin-top:65px">'+th.innerHTML+"</div>",animateTop[1]++}animateTop[1]<390&&(firstMonthCols.last().addClass("prevmonth"),$tableCalendar.find("tr[data-key=1]").first().addClass("nextmonth"))}catch(ex){}}})}},getHTML:function(data){var monthLength=0,self=this,dataByMonth=function(data){for(var arr={},today=_fn.now("Ymd","/"),firstMonth=today.substr(0,today.lastIndexOf("/")),curMonth=new Date(Date.parse(firstMonth.replace("-","/")+"/01")).getTime(),i=0;i<_calendar.lowestPriCalDays;i++){var now=new Date,dateFormate=now.addDays(i).toFormatString("yyyy/MM/dd"),month=dateFormate.substr(0,dateFormate.lastIndexOf("/"));if(new Date(Date.parse(month.replace("-","/")+"/01")).getTime()>=curMonth){arr[month]||(monthLength++,arr[month]=[]);var arrData={DepartTime:dateFormate,Price:data[now.addDays(i).toFormatString("yyyy-MM-dd")]||0};arr[month].push(arrData)}}var needLength,firstDay=arr[firstMonth][0].DepartTime.toDate(),lastDay=arr[firstMonth][arr[firstMonth].length-1].DepartTime.toDate(),nowLength=lastDay.getDate()-firstDay.getDate()+1+(7-lastDay.getDay()-1);if(needLength=nowLength+firstDay.getDay()>21?firstDay.getDate()-1:21-nowLength,nowLength)for(var i=0;i<needLength;){var dtime=arr[firstMonth][0].DepartTime.toDate().addDays(-1).toFormatString("yyyy/MM/dd");arr[firstMonth].unshift({DepartTime:dtime,Price:0}),i++}return arr}(data),html="",lowest={},isToady=void 0,l=0,today=new Date(Date.parse(_fn.now("Ymd","/"))).getTime(),isEmpty=!1;for(var k in dataByMonth)if(dataByMonth.hasOwnProperty(k)){var lastDay,_data=dataByMonth[k],i=0,weekCount=0;lowest[k]=!1;for(var monthHtml="";_data[i];){if(0==i){weekCount++,monthHtml+='<tr data-key="'+l+'" data-m="'+k.replace("/","-")+'">';var firstDayWeekNum=new Date(Date.parse(_data[0].DepartTime)).getDay();monthHtml+=firstDayWeekNum>0?new Array(firstDayWeekNum+1).join('<td class="none"></td>'):""}var day=new Date(Date.parse(_data[i].DepartTime)),week=day.getDay(),monthData=k.split("/"),endStr=2==weekCount?'<th class="calendarThPadding"><span>'+monthData[0]+jsTip.year+"</span>"+monthData[1]+jsTip.month+"</th>":"<th></th>";if(0!=i&&0==week&&(weekCount++,monthHtml+='<tr data-key="'+l+'" data-m="'+k.replace("/","-")+'">'),0===_data[i].Price){var spanData='<span class="date">'+day.getDate()+"</span>";day.getTime()<today?(spanData=this.getDateStr(_data[i].DepartTime,today,day),monthHtml+='<td class="none" data>'+spanData+"<span>"+(today>=day.getTime()?"--":"暂无数据")+"</span></td>"):monthHtml+='<td data-date="'+_data[i].DepartTime+'">'+self.getDateStr(_data[i].DepartTime,today,day)+'<span style="cursor:pointer;" class="search">点击查询</span></td>'}else isEmpty=!1,isToady=0==l&&void 0==isToady,lowest[k]=!1===lowest[k]||_data[i].Price<lowest[k]?_data[i].Price:lowest[k],monthHtml+="<td price="+_data[i].Price+' data-date="'+_data[i].DepartTime+'">'+this.getDateStr(_data[i].DepartTime,today,day)+'<span class="price"><dfn>&yen;</dfn>'+_data[i].Price+"</span></td>";6==week&&(monthHtml+=endStr+"</tr>"),lastDay=day,i++}if(l==monthLength-1)for(var len=new Date(lastDay.getFullYear(),lastDay.getMonth()+1,0).getDate(),lastDayDate=lastDay.getDate(),m=lastDayDate+1;m<=len;m++){var data=lastDay.getFullYear()+"/"+("0"+(lastDay.getMonth()+1)).slice(-2)+"/"+("0"+m).slice(-2),week=new Date(Date.parse(data)).getDay();0==week&&(weekCount++,monthHtml+='<tr data-key="'+l+'" data-m="'+k.replace("/","-")+'">');var day=new Date(Date.parse(data));monthHtml+='<td data-date="'+data+'">'+self.getDateStr(data,today,day)+'<span style="cursor:pointer;" class="search">点击查询</span></td>',6==week&&(monthHtml+="<th></th></tr>"),lastDay=new Date(Date.parse(data))}if(6!=lastDay.getDay()&&(monthHtml+=new Array(Number(6-lastDay.getDay()+1)).join('<td class="none"></td>'),monthHtml+="<th></th></tr>"),weekCount<6&&weekCount>3){var emptyWeek='<tr data-key="'+l+'" data-m="'+k.replace("/","-")+'"><td class="none"></td><td class="none"></td><td class="none"></td><td class="none"></td><td class="none"></td><td class="none"></td><td class="none"></td><th></th></tr>';weekCount<5&&(monthHtml+=emptyWeek),monthHtml+=emptyWeek}html+=monthHtml,l++}return{html:'<table id="tableCalendar" class="calendar"><tbody>'+html+"</tbody></table>",lowest:lowest,isEmpty:isEmpty}},getDateStr:function(time,_today,_day){time=time.split("/");var year=time[0],_month=("0"+time[1]).slice(-2),_date=("0"+time[2]).slice(-2),isfestival=window.Utils.getFestival(year,_month,_date);return'<span class="date '+(isfestival?"festival":"")+'">'+(isfestival||(_today==_day.getTime()?jsTip.today:_day.getDate()))+"</span>"},showTip:function(tipNoResult){var tip=$("p.tip_none"),defaultStr=tip.html();return tip.css("white-space","nowrap"),function(str){tip.html(str||defaultStr),tip[0].style.display="block",tip[0].offsetWidth&&(tip[0].style.marginLeft=-tip[0].offsetWidth/2+"px"),$("#divLowestPriceCalendarLoading")[0].style.display="block",tipNoResult.style.display="none"}}(tipNoResult),showTipNoResult:function(Dcity,Acity,href){tipNoResult.innerHTML="<p>很抱歉，"+Dcity+"-"+Acity+tips.noData+'。 <br/><a class="alert_box_btn" href="'+href+'" target="_blank">'+tips.searchPrice+"</a></p>",tipNoResult.style.display="block",$("#divLowestPriceCalendarLoading")[0].style.display="block",$("p.tip_none")[0].style.display="none"},loading:{show:function(){tipNoResult.style.display="none",tip_none.style.display="none",$loading.each(function(k){k[0].style.display="block"})},hide:function(){$loading.each(function(k){k[0].style.display="none"})}}};return{init:_calendar.init,render:_calendar.render,showTip:_calendar.showTip}}();var guessFav={init:function(){var _this=this;!function check_bf_loaded(){if(window.$_bf&&!0===window.$_bf.loaded){var pvid=window.$_bf._getFullPV(),vid=pvid.split(".").slice(0,2).join(".");$.ajax("/domestic/ajax/getguessfavorite?vid="+vid+"&r="+Math.random(),{onsuccess:function(data){if((data=$.parseJSON(data.responseText))&&data.FavoriteItems&&data.FavoriteItems.length>0&&data.LowestItems&&data.LowestItems.length>0){var allData=_this.handleData(data),html=$.tmpl.render(_this.template,allData);$(".jp_tab_index .bd .pane .guess_box").html(html),_this.showGuessModel(),_this.initEvent()}else _this.hideGuessModel(),window.Utils.Calendar.init()}})}else setTimeout(check_bf_loaded,50)}()},showGuessModel:function(){$(".jp_tab_index .hd [model='guessFav']").length>0&&($(".jp_tab_index .hd [model='guessFav']")[0].style.display="block",$(".jp_tab_index .hd [model='guessFav']").addClass("cur")),$(".jp_tab_index .bd [model='guessBox']").length>0&&$(".jp_tab_index .bd [model='lowestCalendarBox']").length>0&&($(".jp_tab_index .bd [model='guessBox']")[0].style.display="block",$(".jp_tab_index .bd [model='lowestCalendarBox']")[0].style.display="none")},hideGuessModel:function(){$(".jp_tab_index .hd [model='guessFav']").length>0&&($(".jp_tab_index .hd [model='guessFav']")[0].style.display="none",$(".jp_tab_index .hd").removeClass("cur")),$(".jp_tab_index .bd [model='guessBox']").length>0&&$(".jp_tab_index .bd [model='lowestCalendarBox']").length>0&&($(".jp_tab_index .bd [model='guessBox']")[0].style.display="none",$(".jp_tab_index .bd [model='lowestCalendarBox']")[0].style.display="block")},initEvent:function(){var tabIndex=$(".jp_tab_index"),CalendarInited=!1,panes=tabIndex.find(".pane"),hd=tabIndex.find(".hd a");hd.bind("click",function(e){if(e.preventDefault(),!$(this).hasClass("cur")){hd.removeClass("cur"),$(this).addClass("cur");var index=hd.indexOf($(this));panes.hide(),panes.eq(index).show(),1!=index||CalendarInited||(CalendarInited=!0,window.Utils.Calendar.init())}})},getRate:function(rate){return 0==rate?"":1==rate?"<span>全价</span>":"<span>"+(10*rate).toFixed(1)+"</span>折"},handleData:function(data){for(var _this=this,allData={favDataList:[],lowestDataList:[]},favData=data.FavoriteItems,lowestData=data.LowestItems,j=0;j<favData.length;j++){var date=favData[j].DDate.toDate(),singleData={DCityName:favData[j].DCityName,ACityCode:favData[j].ACity.toLowerCase(),ACityName:favData[j].ACityName,Date:"<span>"+date.toFormatString("MM")+"</span>月<span>"+date.toFormatString("dd")+"</span>日",Price:"<em><dfn>&yen;</dfn></em>"+favData[j].Price,priceNum:favData[j].Price,DCity:favData[j].DCity,ACity:favData[j].ACity,DDate:favData[j].DDate,Rate:_this.getRate(favData[j].Rate)};allData.favDataList.push(singleData)}for(var j=0;j<lowestData.length;j++){var date=lowestData[j].DDate.toDate(),singleData={DCityName:lowestData[j].DCityName,ACityCode:lowestData[j].ACity.toLowerCase(),ACityName:lowestData[j].ACityName,Date:"<span>"+date.toFormatString("MM")+"</span>月<span>"+date.toFormatString("dd")+"</span>日",Price:"<em><dfn>&yen;</dfn></em>"+lowestData[j].Price,priceNum:lowestData[j].Price,DCity:lowestData[j].DCity,ACity:lowestData[j].ACity,DDate:lowestData[j].DDate,Rate:_this.getRate(lowestData[j].Rate),specialTag:_this.getSpecialTag(j)};allData.lowestDataList.push(singleData)}return allData},getSpecialTag:function(index){if(!(pageConfig&&pageConfig.flightTemplate&&pageConfig.flightTemplate.length>0))return"";index+=1;for(var i=0;i<pageConfig.flightTemplate.length;i++)if(pageConfig.flightTemplate[i].Key=="guessfavoriteicon_"+index)return pageConfig.flightTemplate[i].Content},
template:'                {{each(i,data) favDataList}}                    {{if i%4==0}}                        <div class="items clearfix">                    {{/if}}                            <a class="item {{if i%4==0}}item_first{{else (i+1)%4==0}}item_last{{/if}}"  onclick="javascript:guessClick(\'${data.DCity}\',\'${data.ACity}\',\'${data.DDate}\',${i},\'favData\',${data.priceNum});return false;" target="_blank">                                {{if i<=3}}                                    <div class="item_pic">                                        <span class="tag_guess">                                            ${data.ACityName}                                            <span class="tag_bg"></span>                                            <b></b>                                        </span>                                        <img alt="" src="//pic.c-ctrip.com/fltdomestic111027/city/${data.ACityCode}.jpg"/>                                    </div>                                {{/if}}                                <div class="item_con">                                    <div class="round">                                        ${data.DCityName}<span>→</span>${data.ACityName}                                    </div>                                    <p class="date">${data.Date}</p>                                    <div class="info">                                        <span class="discount">                                            ${data.Rate}                                        </span>                                        <span class="price">                                            ${data.Price}                                        </span>                                    </div>                                </div>                            </a>                    {{if (i+1)%4==0}}                        </div>                    {{/if}}                {{/each}}                <div class="items clearfix">                    {{each(j,lowestData) lowestDataList}}                        <a class="item {{if j==0}}item_first{{else j==lowestDataList.length-1}}item_last{{/if}}" data-ubt="GuessLikeDetial"  onclick="javascript:guessClick(\'${lowestData.DCity}\',\'${lowestData.ACity}\',\'${lowestData.DDate}\',${j},\'lowestData\',${lowestData.priceNum});return false;" target="_blank">                                <div class="item_con {{if !specialTag}}item_con_normal {{/if}}">                                    {{if specialTag}}<div class="tag_orange">${specialTag}</div>{{/if}}                                    <div class="round">                                       ${lowestData.DCityName}<span>→</span>${lowestData.ACityName}                                    </div>                                    <p class="date">${lowestData.Date}</p>                                    <div class="info">                                        <span class="discount">                                            ${lowestData.Rate}                                        </span>                                        <span class="price">                                            ${lowestData.Price}                                        </span>                                    </div>                                </div>                        </a>                    {{/each}}                </div>        '};_fn.Lazyload=function(){var loadElements,selector=[],getBoundingClientRect=function(el){if(!el.getBoundingClientRect){var offset=function(){for(var mOffsetTop=el.offsetTop,mOffsetLeft=el.offsetLeft,mOffsetParent=el.offsetParent;mOffsetParent;)mOffsetTop+=mOffsetParent.offsetTop,mOffsetLeft+=mOffsetParent.offsetLeft,mOffsetParent=mOffsetParent.offsetParent;return{left:mOffsetLeft,top:mOffsetTop}}();return{left:offset.left-Math.max(document.documentElement.scrollTop,document.body.scrollTop),top:offset.top-Math.min(document.documentElement.clientHeight,document.body.clientHeight)}}var result=el.getBoundingClientRect();return result.top=result.top-(document.documentElement.clientTop||0),result.left=result.top-(document.documentElement.clientLeft||0),result},getWinHeight=function(){return Math.min(document.documentElement.clientHeight,document.body.clientHeight)},scrollCallback=function(){if(loadElements.length)for(var i=0;loadElements[i]&&1==loadElements[i].nodeType;){var offset=getBoundingClientRect(loadElements[i])||{left:0,top:0};if(offset.top>0&&offset.top<getWinHeight()){var loader=loadElements[i].getAttribute("data-lazyload")||loadElements[i].getAttribute("_src");window[loader]&&"function"==typeof window[loader]?window[loader].call(loadElements[i]):loadElements[i].src=loader+"?r="+Math.random(),loadElements[i].removeAttribute("data-lazyload"),loadElements[i].removeAttribute("_src"),loadElements[i]=null}i++}},updateElementsTimer=null,addTag=function(){var sel=arguments[0];if(arguments.length>1&&(sel=Array.prototype.slice.call(arguments)),"string"==typeof sel&&sel.indexOf(",")>-1&&(sel=sel.split(",")),"[object Array]"==Object.prototype.toString.call(sel))for(var i=0,len=sel.length;i<len;i++)addTag(sel[i]);else if("string"==typeof sel){if((","+selector.join(",")+",").indexOf(","+sel+",")>-1)return;selector.push(sel),updateElementsTimer&&clearTimeout(updateElementsTimer),updateElementsTimer=setTimeout(function(){loadElements=$(selector.join(",")).toArray(),scrollCallback()},30)}};return{init:function(){var scrollTimer=!1;loadElements=$(selector.join(",")).toArray(),$(window).bind("scroll",function(e){scrollTimer&&clearTimeout(scrollTimer),scrollTimer=setTimeout(function(){scrollCallback()},100)}),scrollCallback()},add:addTag}}(),window.Utils=_fn,$.ready(function(){function isNull(a){return""==a.value.trim()||a.value==a.getAttribute("mod_notice_tip")}function GetDDate2(){var _date="";return"M"==g_SearchType?_date=$("#DepartDate2TextBox")[0]:"D"==g_SearchType&&(_date=$("#ReturnDepartDate1TextBox")[0]),_date&&!isNull(_date)?($("#DDate2").value(_date.value),_date=escape(_date.value)):_date="",_date}function getOtherRouter(){var url="",dcitypara=escape($("#DCity1")[0].value),acitypara=escape($("#ACity1")[0].value);if(pageConfig.DomesticOpenJaw&&"M"==g_SearchType)var dcityname1=$("#M_DepartCity1TextBox")[0].value,acityname1=$("#M_ArriveCity1TextBox")[0].value;else var dcityname1=$("#DepartCity1TextBox")[0].value,acityname1=$("#ArriveCity1TextBox")[0].value;if(""==dcitypara||""==acitypara||dcityname1&&dcityname1.indexOf("(")<0||acityname1&&acityname1.indexOf("(")<0){var Parameter={DCity1:escape($("#DCity1")[0].value.split(",")[0]),ACity1:escape($("#ACity1")[0].value.split(",")[0]),DCityName1:escape($("#DepartCity1TextBox")[0].value),ACityName1:escape($("#ArriveCity1TextBox")[0].value),DDate1:escape($("#DepartDate1TextBox")[0].value)};"M"==g_SearchType?pageConfig.DomesticOpenJaw?(Parameter.ACityName1=escape($("#M_ArriveCity1TextBox")[0].value),Parameter.ACityName2=escape($("#M_ArriveCity2TextBox")[0].value),Parameter.ACity1=escape($("#ACity1")[0].value),Parameter.ACity2=escape($("#ACity2")[0].value),Parameter.DDate2=escape($("#DepartDate2TextBox")[0].value)):(Parameter.ACityName1=escape($("#TransitCityTextBox")[0].value),Parameter.ACityName2=escape($("#ArriveCity1TextBox")[0].value),Parameter.ACity1=escape($("#TransitCity")[0].value),Parameter.ACity2=escape($("#ArriveCity1TextBox")[0].value),Parameter.DDate2=escape($("#DepartDate2TextBox")[0].value)):"D"!=g_SearchType||isNull($("#ReturnDepartDate1TextBox")[0])||(Parameter.DDate2=escape($("#ReturnDepartDate1TextBox")[0].value)),url="/domestic/Search/FirstRoute/?",url+=serialize(Parameter)}return url}function OpenShowFareFirst(){if(!ValidateForm())return!1;SetSearchCookie();var isOtherRouter=getOtherRouter();if(isOtherRouter)window.location.href=isOtherRouter;else if("M"!=g_SearchType&&isNull($("#ReturnDepartDate1TextBox")[0])){$("#ReturnDepartDate1TextBox")[0].value="",$("#DDate2").value(""),$("#IsSingleSearchPost")[0].value="T",$("#DDate1")[0].value=escape($("#DepartDate1TextBox")[0].value),$("#SEOAirlineDibitCode")[0].value=escape($("#AirlineSelect").value()),$("#DCityName1")[0].value=$("#DepartCity1TextBox")[0].value,$("#ACityName1")[0].value=$("#ArriveCity1TextBox")[0].value,$("#RDate").length>0&&($("#RDate")[0].value=""),$(":radio[name=FlightSearchType]")[0].checked="checked",$("#IsSensitive").length&&($("#IsSensitive")[0].value="F");var aladingParams=pageConfig.ALadingValue?"&mkt_header="+pageConfig.ALadingValue:"",url=("//"+window.location.host+"/booking/"+$("#DCity1")[0].value+"-"+$("#ACity1")[0].value+"-day-1.html?DDate1="+$("#DDate1")[0].value+aladingParams).toLowerCase();$("#HasChild").attr("checked")&&(url+="&HasChild=T"),$("#HasBaby").attr("checked")&&(url+="&HasBaby=T"),J_filghtSearch[0].action=url,J_filghtSearch[0].submit()}else{var goUrlParam={dcity1:$Doms.DepartCity1Control.value,acity1:"M"!=g_SearchType?$Doms.ArriveCity1Control.value:$("#TransitCity")[0].value,classType:$Doms.ClassTypeControl.filter(":checked").value(),airLine:$("#AirlineSelect").value(),searchType:g_SearchType,ddate1:"M"==g_SearchType?$("#DepartDate1TextBox2").value():$("#DepartDate1TextBox").value(),ddate2:GetDDate2(),acity2:"M"==g_SearchType?$Doms.ArriveCity1Control.value:""};pageConfig.DomesticOpenJaw&&"M"==g_SearchType&&(goUrlParam.acity1=$("#ACity1")[0].value,goUrlParam.acity2=$Doms.ArriveCity2Control.value,goUrlParam.dcity2=$Doms.DepartCity2Control.value);var action=$.tmpl.render("//"+window.location.host+"/booking/${dcity1}-${acity1}-${classType}-${airLine}-${searchType}-adu-1/?ddate1=${ddate1}&ddate2=${ddate2}{{if dcity2}}&dcity2=${dcity2}{{/if}}{{if acity2}}&acity2=${acity2}{{/if}}{{if pageConfig.ALadingValue}}&mkt_header=${pageConfig.ALadingValue}{{/if}}",goUrlParam);$("#HasChild").attr("checked")&&(action+="&HasChild=T"),$("#HasBaby").attr("checked")&&(action+="&HasBaby=T"),window.location.href=action}}function getDayNumber(date){var now=ServerTime,inputDate=new Date(date),dateSeconds=inputDate.getTime()-now.getTime();return Math.floor(dateSeconds/864e5)+1}function ProcessTwoDateFlyDays(dpartdate,arrivedate){var flyDays=Math.round((arrivedate.toDate()-dpartdate.toDate())/6e4/60/24);return flyDays>0?flyDays:1}function createHiddenElemByObj(data,formId,type){var fragMent=document.createDocumentFragment();for(var key in data)if(0===$("#"+key).length){var element=document.createElement(type);element.id=key,element.name=key,element.value=data[key],element.type="hidden",$(element).appendTo(fragMent)}else $("#"+key).value(data[key]);$(fragMent).appendTo($("#"+formId))}function createHiddenElem(id,value,pId,elems){if(0==$("#"+id).length){var element=document.createElement(elems);element.id=id,element.name=id,element.value=value,element.type="hidden",$(element).appendTo($("#"+pId))}else $("#"+id).value(value)}function ProcessAddDays(datetime,days){return datetime.toDate().addDays(days).toFormatString("yyyy-MM-dd")}function focusNextInput(thisId,isEnter,value){var refInput=$("#"+$("#"+thisId).attr("mod_address_reference"));setTimeout(function(){if(!refInput.value()&&value){var mval=value.match(/[^\x00-\xff]+\((\w+)\)/);refInput.value(mval&&mval[1])}},50),setTimeout(function(){var nextEl;if("true"==$("#"+thisId).attr("mod_address_focusnext")&&$("#"+thisId).attr("nextfocusid"))nextEl=$("#"+$("#"+thisId).attr("nextfocusid"))[0];else{var nextElId=focusConfig[g_SearchType][thisId];!nextElId&&isEnter&&$("#search_btn").trigger("click"),nextEl=nextElId?$("#"+nextElId)[0]:null}if(nextEl&&"input"==nextEl.tagName.toLowerCase()&&(isEnter||""==nextEl.value||nextEl.value==nextEl.getAttribute("mod_notice_tip")||$("#"+thisId).value()==nextEl.value)){var container=$("container:first");2==container.find(">div").length&&"FD_TranDate"==id&&"FD_DestCity"==focusEL.id&&container.find(">div:last").remove(),nextEl.focus()}},10)}function handlePriceData(_this,key){var data=_this.data[key];for(var i in data)if(data.hasOwnProperty(i)&&_this.layOut&&_this.layOut.find("td[data-value="+i+"]").length>0){0==data[i]?_this.layOut.find("td[data-value="+i+"]").find(".price").html("--"):_this.layOut.find("td[data-value="+i+"]").find(".price").html("<dfn>&yen;</dfn>"+data[i]);var month=new Date(i.replace(/-/g,"/")).toFormatString("MM");data[i]==1*_this.lowestPrice[month]&&_this.layOut.find("td[data-value="+i+"]").addClass("lowest")}}function getDataKey(element){var eleKey=element.attr("id"),configKey=lowestCalenderConfig[eleKey],dcity=configKey.DCity,acity=configKey.ACity,dCityValue=$("#"+dcity).value().toUpperCase(),aCityValue=$("#"+acity).value().toUpperCase();return{dCityValue:dCityValue,aCityValue:aCityValue,keyName:"data_"+dCityValue+"_"+aCityValue+"_"+(new Date).toFormatString("yyyy-MM-dd"),preElement:configKey.preElement,DCityInputVal:$("#"+configKey.DCityInput).value(),ACityInputVal:$("#"+configKey.ACityInput).value(),startDate:$("#"+configKey.startDate).value(),endDate:$("#"+configKey.endDate).value(),type:configKey.type}}function getLowestPrice(_this,key){_this.lowestPrice={};var data=_this.data[key];for(var i in data)if(data.hasOwnProperty(i)){var month=new Date(i.replace(/-/g,"/")).toFormatString("MM");0!=data[i]&&(!_this.lowestPrice[month]||0!=_this.lowestPrice[month]&&_this.lowestPrice[month]>data[i])&&(_this.lowestPrice[month]=data[i])}return _this.lowestPrice}function getCalenderDescription(id){return pageConfig.calendarRemouldSwitch?"direct"==cQuery.storage.get("calenderSource")?"<span>"+lowestCalenderConfig[id].calendarTips.replace("</strong>","<span data-bind='needChangeText'>直飞</span></strong>")+'</span><span class="tabs"><span data-bind="wholeCalender" data-ubt="wholeCalenderaction" class="tab">航班最低价</span><span data-bind="directCalender" data-ubt="directCalenderaction" class="tab active">直飞航班最低价</span></span>':"<span>"+lowestCalenderConfig[id].calendarTips.replace("</strong>","<span data-bind='needChangeText'></span></strong>")+'</span><span class="tabs"><span data-bind="wholeCalender" data-ubt="wholeCalenderaction" class="tab active">航班最低价</span><span data-bind="directCalender" data-ubt="directCalenderaction" class="tab">直飞航班最低价</span></span>':lowestCalenderConfig[id].calendarTips}var SearchIntention=function(){var config={timeout:1e3},STATUS={INIT:"INIT",LOADING:"LOADING",FINISHED:"FINISHED",FAILED:"FAILED",TIMEOUT:"TIMEOUT"},exports={res:null,status:STATUS.LOADING,onTimeout:function(){},onSuccess:function(res){},onFailed:function(){},S_STATUS:STATUS,init:function(){var vid;try{vid=window.$_bf?window.$_bf._getFullPV().split(".").slice(0,2).join("."):""}catch(e){$.log("window.$_bf error"),vid=""}cQuery.ajax("/domestic/ajax/GetSearchIntention?vid="+encodeURIComponent(vid),{method:"GET",onsuccess:function(xhr,resStr){var res;exports.status!==STATUS.TIMEOUT&&(res=cQuery.parseJSON(resStr),res&&"Success"===res.result&&res.data?(exports.status=STATUS.FINISHED,exports.res=res.data,res.data.DCityName&&res.data.DCityCode&&(res.data.DCityName=res.data.DCityName+"("+res.data.DCityCode+")"),res.data.ACityName&&res.data.ACityCode&&(res.data.ACityName=res.data.ACityName+"("+res.data.ACityCode+")"),exports.onSuccess&&exports.onSuccess(res.data)):(exports.status=STATUS.FAILED,exports.onFailed&&exports.onFailed(res.data)))}}),setTimeout(function(){exports.status===STATUS.LOADING&&(exports.status=STATUS.TIMEOUT,exports.onTimeout&&exports.onTimeout())},config.timeout)}};return exports}();window.pageConfig&&pageConfig.isNewHome?guessFav.init():window.Utils.Calendar.init(),setTimeout(function(){window.WebResourcePath&&!cQuery.storage.get("FD_BookIndex_CityData")&&cQuery.jsonp(WebResourcePath+"/javascript/CityData.js",{charset:"gb2312",onload:function(data){cQuery.storage.set("FD_BookIndex_CityData",cQuery.stringifyJSON(data)),cQuery.storage.expire("FD_BookIndex_CityData",21600)}})},2e3);try{document.documentElement.scrollTop=0}catch(ex){document.body.scrollTop=0}$("#ulAnnouncement").attr("data-lazyload","GetServiceAnnouncements"),window.Utils.Lazyload.add("#ulAnnouncement,#HomePageRecommendContainer img[_src]"),window.Utils.Lazyload.init();var Recommend=document.getElementById("HomePageRecommendContainer");Recommend&&Recommend.style&&(Recommend.style.width=278*(Recommend.children.length+4)+"px");var $advancePanel=$("#search_advform"),$searchForm=$($advancePanel[0].parentNode),$searchbox=$(".searchbox"),isOpen=!1;$advancePanel.css("display","none"),$("#btnAdvancdSearch").bind("click",function(e){e.preventDefault(),!1===isOpen?($advancePanel.show("slow"),this.className="unshow",isOpen=!0):(isOpen=!1,this.className="show",$advancePanel.hide("slow"))}),$("#btnAdvancdSearch").attr("tabindex",-1).bind("mousedown",function(){return!1}),$("#btnAdvancdSearch").attr("tabindex",-1).attr("hidefocus",!0).css("outline","none"),$.browser.isIE6&&($("#btnAdvancdSearch").attr("unselectable","on"),$("#btnAdvancdSearch")[0].onfocus=function(){this.blur()}),SetDynamicTimer();var errorMsgList=online.msg.ERROR_FLIGHT,M=["DepartCity1TextBox|empty","DepartDate1TextBox2|empty,errorDate,before,limit","TransitCityTextBox|empty,same.DepartCity1TextBox,same.ArriveCity1TextBox","DepartDate2TextBox|empty,errorDate,before.DepartDate1TextBox2,limit","ArriveCity1TextBox|empty"],M2=["M_DepartCity1TextBox|empty","M_ArriveCity1TextBox|empty,same.M_DepartCity1TextBox","DepartDate1TextBox2|empty,errorDate,before,limit","M_DepartCity2TextBox|empty","M_ArriveCity2TextBox|empty,same.M_DepartCity2TextBox","DepartDate2TextBox|empty,errorDate,before.DepartDate1TextBox2,limit"],validate={elemCache:{},config:{S:["DepartCity1TextBox|empty","ArriveCity1TextBox|empty,same.DepartCity1TextBox","DepartDate1TextBox|empty,errorDate,before,limit"],D:["DepartCity1TextBox|empty","ArriveCity1TextBox|empty,same.DepartCity1TextBox","DepartDate1TextBox|empty,errorDate,before,limit","ReturnDepartDate1TextBox|errorDate,before.DepartDate1TextBox,limit"],M:pageConfig.DomesticOpenJaw?M2:M},errorTips:{empty:{DepartCity1TextBox:errorMsgList[0],ArriveCity1TextBox:errorMsgList[1],DepartDate1TextBox:errorMsgList[3],DepartDate1TextBox2:errorMsgList[3],TransitCityTextBox:errorMsgList[13],ReturnDepartDate1TextBox:errorMsgList[15],DepartDate2TextBox:errorMsgList[3],M_DepartCity1TextBox:errorMsgList[0],M_DepartCity2TextBox:errorMsgList[0],M_ArriveCity1TextBox:errorMsgList[1],M_ArriveCity2TextBox:errorMsgList[1]},same:{M_DepartCity1TextBox:errorMsgList[2],M_DepartCity2TextBox:errorMsgList[2],M_ArriveCity1TextBox:errorMsgList[2],M_ArriveCity2TextBox:errorMsgList[2],DepartCity1TextBox:errorMsgList[2],ArriveCity1TextBox:errorMsgList[2],TransitCityTextBox:errorMsgList[14]},before:{ReturnDepartDate1TextBox:errorMsgList[11],DepartDate2TextBox:errorMsgList[12],DepartDate1TextBox:errorMsgList[4],DepartDate1TextBox2:errorMsgList[4]},limit:{DepartDate1TextBox:errorMsgList[6],DepartDate1TextBox2:errorMsgList[6],ReturnDepartDate1TextBox:errorMsgList[6],DepartDate2TextBox:errorMsgList[6]}},getCityCode:function(id){return this.getElement(this.getElement(id).getAttribute("mod_address_reference")).value.split(",")[0]},getValue:function(id){var val=this.getElement(id).value.trim();return val==this.getElement(id).getAttribute("mod_notice_tip")?"":val},isbefore:function(id,aid){var time=(aid?this.getValue(aid):ServerTime.toStdDateString()).toDate();return""!=this.getValue(id)&&this.getValue(id).toDate()<time&&this.errorTips.before[id]},issame:function(id,aid){return!!(this.getValue(id)==this.getValue(aid)||this.getCityCode(id)&&this.getCityCode(aid)&&this.getCityCode(id)==this.getCityCode(aid))&&this.errorTips.same[id]},isempty:function(id){return""==this.getValue(id)&&this.errorTips.empty[id]},iserrorDate:function(id){var val=this.getValue(id);return""!=val&&!val.toDate()&&this.errorTips.empty[id]},islimit:function(id){var today=ServerTime.toStdDateString().toDate();return today.getMonth()+1==2&&29==today.getDate()&&today.setDate(28),today.setFullYear(parseInt(today.getFullYear())+1),today<this.getValue(id).toDate()&&this.errorTips.limit[id]},getElement:function(id){return this.elemCache[id]||(this.elemCache[id]=document.getElementById(id)),this.elemCache[id]}},ValidateForm=function(Flthotel){validate.errorTips.limit.DepartDate1TextBox=Flthotel?errorMsgList[9]:errorMsgList[6],validate.errorTips.limit.DepartDate1TextBox2=validate.errorTips.limit.ReturnDepartDate1TextBox=validate.errorTips.limit.DepartDate2TextBox=validate.errorTips.limit.DepartDate1TextBox;for(var validateConfig=validate.config[g_SearchType],msg=!1,el=!1,i=0;i<validateConfig.length;i++){for(var data=validateConfig[i].split("|"),id=data[0],fnArgs=data[1].split(","),j=0;j<fnArgs.length;j++){var _fnArgs=fnArgs[j].split("."),fnName=_fnArgs[0];if(_fnArgs.shift(),msg=validate["is"+fnName].apply(validate,[id].concat(_fnArgs)))break}if(msg){el=$("#"+id);break}}if(Flthotel&&(!el||!msg)){var _ddate=$("#DepartDate1TextBox").value(),_rdate=$("#ReturnDepartDate1TextBox").value();_ddate.toDate()-0<(new Date).toStdDateString().toDate().addDays(1)?(el=$("#DepartDate1TextBox"),msg=online.msg.AirHotelTipText[6]):_ddate.toDate()-0==_rdate.toDate()-0&&(el=$("#ReturnDepartDate1TextBox"),msg=online.msg.AirHotelTipText[12]||"行程需大于1天")}return!msg||(setTimeout(function(){online.validateObj.method("show",{$obj:el,data:msg,removeErrorClass:!0,hideEvent:"blur",isFocus:!0})},30),!1)};$Doms={Route1InputArea:$("#Route1InputArea")[0],Route1Title:$("#Route1Title")[0],Route1ReturnDepartDateInputArea:$("#Route1ReturnDepartDateInputArea")[0],Route2InputArea:$("#Route2InputArea")[0],Route2Title:$("#Route2Title")[0],AdvanceSearchOptionArea:$("#AdvanceSearchOptionArea")[0],SimpleSearchOptionSwitch:$("#SimpleSearchOptionSwitch")[0],AdvanceSearchOptionSwitch:$("#AdvanceSearchOptionSwitch")[0],DepartCity1TextBoxControl:$("#DepartCity1TextBox")[0],ArriveCity1TextBoxControl:$("#ArriveCity1TextBox")[0],DepartDate1TextBoxControl:$("#DepartDate1TextBox")[0],ReturnDepartDate1Control:$("#ReturnDepartDate1TextBox")[0],DepartCity2TextBoxControl:$("#DepartCity2TextBox")[0],ArriveCity2TextBoxControl:$("#ArriveCity2TextBox")[0],DepartDate2TextBoxControl:$("#DepartDate2TextBox")[0],DepartCity1Control:$("#DCity1")[0],ArriveCity1Control:$("#ACity1")[0],DepartDate1Control:$("#DDate1")[0],DepartCity2Control:$("#DCity2")[0],ArriveCity2Control:$("#ACity2")[0],DepartDate2Control:$("#DDate2")[0],ClassTypeControl:$(":radio[name=ClassType]")},$("#AirlineSelect")&&($Doms.AirlineSelectControl=$("#AirlineSelect")[0]),$("#Airline")&&($Doms.AirlineControl=$("#Airline")[0]);var $searchCont=$(".searchbox"),$returnDepart=$("#ReturnDepartDate1TextBox"),$changecity=$("#changecityid"),_DDate2=document.getElementById("DDate2"),type=$("#searchBox li:first label"),radio=$("#searchBox :radio[name=FlightSearchType]"),radioLabel=$("#searchBox>li:first label"),setLastSearchArr,g_SearchType="S";$returnDepart.bind("blur",function(){""!=this.value&&this.value!=this.getAttribute("mod_notice_tip")&&"S"==g_SearchType&&($("#radio_D").attr("disSelect",1),$("#radio_D").trigger("click"))}),$changecity.attr("tabindex",-1).attr("hidefocus",!0),$changecity.bind("click",function(e){e.preventDefault();var temp=$("#DepartCity1TextBox")[0].value;$("#DepartCity1TextBox")[0].value=$("#ArriveCity1TextBox")[0].value,$("#ArriveCity1TextBox")[0].value=temp;var dcity1=$("#DCity1")[0].value;$("#DCity1")[0].value=$("#ACity1")[0].value,$("#ACity1")[0].value=dcity1,$("#DepartCity1TextBox").trigger("change"),$("#ArriveCity1TextBox").trigger("change");var Cclass=$("#DepartCity1TextBox")[0].className+"";$("#DepartCity1TextBox")[0].className=$("#ArriveCity1TextBox")[0].className+"",$("#ArriveCity1TextBox")[0].className=Cclass}),$.browser.isIE6&&($changecity.attr("unselectable","on"),$changecity[0].onfocus=function(){this.blur()});var isPad=$.browser.isIPad||$.browser.isIPhone||$.browser.isIPadUCWeb,changeSearchType=function(SearchType,inited){g_SearchType=SearchType,$("#radio_"+SearchType)[0].checked=!0,$changecity.css("display","inline-block");var className="";switch(SearchType){case"S":className="search_single",$returnDepart.value(""),online.inits[$returnDepart.attr("id")].method("checkValue"),_DDate2.value="";break;case"D":className="search_goback",setTimeout(function(){online.canlendarRef.DepartDate1TextBox.method("setWeek",$("#DepartDate1TextBox")),online.canlendarRef.ReturnDepartDate1TextBox.method("setWeek",$("#ReturnDepartDate1TextBox"))});break;case"M":className="search_multiple",pageConfig.DomesticOpenJaw&&$("#search_box").addClass("search_abt"),$changecity.css("display","none"),setTimeout(function(){online.canlendarRef.DepartDate1TextBox2.method("setWeek",$("#DepartDate1TextBox2")),online.canlendarRef.DepartDate2TextBox.method("setWeek",$("#DepartDate2TextBox"))})}$searchCont.removeClass("search_single").removeClass("search_goback").removeClass("search_multiple").addClass(className),inited?setLastSearchArr(SearchType):isPad||("D"==SearchType&&1==$("#radio_D").attr("disSelect")?$("#radio_D").attr("disSelect",0):setTimeout(function(){online.adressMod.DepartCity1TextBox.method("focus",{isHidden:!0,isSelected:!0})},100))};setLastSearchArr=function(searchIntention){function transCookie(){var result,arr=[];try{arr=cQuery.parseJSON(window.Utils.Cookie.get("FD_SearchHistorty")).data.split("$"),result={DCityName:arr[2]?arr[1]:"",DCityCode:arr[2]||"",DDate:arr[3]||"",ACityName:arr[5]?arr[4]:"",ACityCode:arr[5]||"",RDate:arr[6]||"",TransCityName:arr[8]?arr[7]:"",TransCityCode:arr[8]||""}}catch(e){result=!1}return result}function handler(searchItem,SearchType){if(searchItem){var d=searchItem.DDate?Date.parse(searchItem.DDate.replace(/-/g,"/")):0;d<now&&(searchItem.DDate=""),searchItem.DCityName&&($("#DepartCity1TextBox").value(searchItem.DCityName),online.inits.DepartCity1TextBox.method("checkValue")),searchItem.DCityCode&&$("#DCity1").value(searchItem.DCityCode),searchItem.ACityName&&($("#ArriveCity1TextBox").value(searchItem.ACityName),online.inits.ArriveCity1TextBox.method("checkValue")),searchItem.ACityCode&&$("#ACity1").value(searchItem.ACityCode),$("#DepartDate1TextBox").value(searchItem.DDate),online.inits.DepartDate1TextBox.method("checkValue"),$("#DepartDate1TextBox2").value(searchItem.DDate),online.inits.DepartDate1TextBox2.method("checkValue"),$("#DepartDate2TextBox").data("minDate",searchItem.DDate),$("#ReturnDepartDate1TextBox").data("minDate",searchItem.DDate);var returnDate=searchItem.RDate?Date.parse(searchItem.RDate.replace(/-/g,"/")):0;"S"==SearchType||"D"==SearchType?("D"==SearchType&&returnDate>=now&&returnDate>=d?$("#ReturnDepartDate1TextBox").value(searchItem.RDate):$("#ReturnDepartDate1TextBox").value(""),setTimeout(function(){$("#DepartDate2TextBox").value(""),online.inits.DepartDate2TextBox.method("checkValue"),online.inits.ReturnDepartDate1TextBox.method("checkValue")},1)):(returnDate>=now&&returnDate>=d?($("#DepartDate2TextBox").value(searchItem.RDate),online.canlendarRef.DepartDate2TextBox.method("setWeek",$("#DepartDate2TextBox"))):$("#DepartDate2TextBox").value(""),online.inits.DepartDate2TextBox.method("checkValue"),online.canlendarRef.DepartDate1TextBox2.method("setWeek",$("#DepartDate1TextBox2")),searchItem.TransCityName=searchItem.TransCityName||"",$("#TransitCityTextBox").value(searchItem.TransCityName),$("#TransitCityTextBox").trigger("change").trigger("blur"),pageConfig.DomesticOpenJaw||online.inits.TransitCityTextBox.method("checkValue"),searchItem.TransCityCode&&$("#TransitCity").value(searchItem.TransCityCode))}else if(""==$("#DepartCity1TextBox").value()||""==$("#DCity1").value()){var defCity=$("#hiddenDefaltDepartCity").val(),defCityCode=$("#hiddenUserHostCityCode").val();if(defCity&&defCityCode){var defCityInfo=defCity.split("|");defCityInfo.length>1&&($("#DepartCity1TextBox").value(defCityInfo[1]+"("+defCityInfo[0]+")"),online.inits.DepartCity1TextBox.method("checkValue"),$("#DCity1").value(defCityCode))}else $("#DepartCity1TextBox").value("上海(SHA)"),online.inits.DepartCity1TextBox.method("checkValue"),$("#DCity1").value("SHA");var _today=today.replace(/\//g,"-");$("#DepartDate1TextBox").value(""),online.inits.DepartDate1TextBox.method("checkValue"),$("#DepartDate1TextBox2").value(""),online.inits.DepartDate1TextBox2.method("checkValue"),$("#DepartDate2TextBox").data("minDate",_today),$("#ReturnDepartDate1TextBox").data("minDate",_today)}isPad||setTimeout(function(){online.adressMod.DepartCity1TextBox.method("focus",{isHidden:!0,isSelected:!0})},100)}function searchIntentionHandler(SearchType){if(window.Utils.Cookie.get("FD_SearchHistorty"))return searchHandler(SearchType);searchIntention.init(),"S"===SearchType?searchIntention.res?handler(searchIntention.res,SearchType):searchIntention.status===searchIntention.S_STATUS.FAILED?handler(transCookie(),SearchType):(searchIntention.onSuccess=function(res){handler(res,SearchType)},searchIntention.onTimeout=function(){handler(transCookie(),SearchType)},searchIntention.onFailed=function(){handler(transCookie(),SearchType)}):handler(transCookie(),SearchType)}function searchHandler(SearchType){var searchArr=window.Utils.Cookie.get("FD_SearchHistorty");if(searchArr){searchArr=cQuery.parseJSON(searchArr).data.split("$");var d=searchArr[3]?Date.parse(searchArr[3].replace(/-/g,"/")):0;searchArr[1]&&searchArr[2]&&($("#DepartCity1TextBox").value(searchArr[1]),online.inits.DepartCity1TextBox.method("checkValue")),searchArr[2]&&$("#DCity1").value(searchArr[2]),searchArr[4]&&searchArr[5]&&($("#ArriveCity1TextBox").value(searchArr[4]),online.inits.ArriveCity1TextBox.method("checkValue")),searchArr[5]&&$("#ACity1").value(searchArr[5]),d<now&&(searchArr[3]=""),$("#DepartDate1TextBox").value(searchArr[3]),online.inits.DepartDate1TextBox.method("checkValue"),pageConfig.DomesticOpenJaw||($("#DepartDate1TextBox2").value(searchArr[3]),online.inits.DepartDate1TextBox2.method("checkValue")),$("#DepartDate2TextBox").data("minDate",searchArr[3]),$("#ReturnDepartDate1TextBox").data("minDate",searchArr[3]);var returnDate=searchArr[6]?Date.parse(searchArr[6].replace(/-/g,"/")):0;"S"==SearchType||"D"==SearchType?("D"==SearchType&&returnDate>=now&&returnDate>=d?$("#ReturnDepartDate1TextBox").value(searchArr[6]):$("#ReturnDepartDate1TextBox").value(""),setTimeout(function(){$("#DepartDate2TextBox").value(""),online.inits.DepartDate2TextBox&&online.inits.DepartDate2TextBox.method("checkValue"),online.inits.ReturnDepartDate1TextBox.method("checkValue")},1)):(returnDate>=now&&returnDate>=d?($("#DepartDate2TextBox").value(searchArr[6]),online.canlendarRef.DepartDate2TextBox.method("setWeek",$("#DepartDate2TextBox"))):$("#DepartDate2TextBox").value(""),online.inits.DepartDate2TextBox.method("checkValue"),online.canlendarRef.DepartDate1TextBox2.method("setWeek",$("#DepartDate1TextBox2")),searchArr[7]=searchArr[7]&&searchArr[8]?searchArr[7]:"",pageConfig.DomesticOpenJaw?(searchArr[1]&&searchArr[2]&&($("#M_DepartCity1TextBox").value(searchArr[1]),online.inits.M_DepartCity1TextBox.method("checkValue")),searchArr[2]&&$("#DCity1").value(searchArr[2]),searchArr[4]&&searchArr[5]&&($("#M_ArriveCity1TextBox").value(searchArr[4]),online.inits.M_ArriveCity1TextBox.method("checkValue")),searchArr[5]&&$("#ACity1").value(searchArr[5]),searchArr[7]&&searchArr[8]&&($("#M_ArriveCity2TextBox").value(searchArr[7]),online.inits.M_ArriveCity2TextBox.method("checkValue")),searchArr[8]&&$("#ACity2").value(searchArr[8]),searchArr[9]&&searchArr[10]&&($("#M_DepartCity2TextBox").value(searchArr[9]),online.inits.M_DepartCity2TextBox.method("checkValue")),searchArr[10]&&$("#DCity2").value(searchArr[10]),$("#DepartDate1TextBox2").value(searchArr[3]),online.canlendarRef.DepartDate1TextBox2.method("setWeek",$("#DepartDate1TextBox2")),$("#DepartDate1TextBox2").removeClass("inputSel")):($("#TransitCityTextBox").value(searchArr[7]),$("#TransitCityTextBox").trigger("change").trigger("blur"),online.inits.TransitCityTextBox.method("checkValue"),searchArr[8]&&$("#TransitCity").value(searchArr[8])))}else if(""==$("#DepartCity1TextBox").value()||""==$("#DCity1").value()){$("#DepartCity1TextBox").value("上海(SHA)"),online.inits.DepartCity1TextBox.method("checkValue"),$("#DCity1").value("SHA");var _today=today.replace(/\//g,"-");$("#DepartDate1TextBox").value(""),
online.inits.DepartDate1TextBox.method("checkValue"),$("#DepartDate1TextBox2").value(""),online.inits.DepartDate1TextBox2.method("checkValue"),$("#DepartDate2TextBox").data("minDate",_today),$("#ReturnDepartDate1TextBox").data("minDate",_today)}isPad||setTimeout(function(){online.adressMod.DepartCity1TextBox.method("focus",{isHidden:!0,isSelected:!0})},100)}var today=window.Utils.now("Ymd","/"),now=Date.parse(today);return window.pageConfig.IsOpenSearchIntention?searchIntentionHandler:searchHandler}(SearchIntention);var ClassTypeControl=$(":radio[name=ClassType]");$.browser.isIE6&&ClassTypeControl.each(function(el){el.parent().bind("click",function(e){$(e.target).is("label")&&($(e.target).find("input").trigger("click"),$(e.target).find("input")[0].checked=!0)})});try{$("#AirlineSelect").find("option")[0].selected=!0,ClassTypeControl[0].checked=!0}catch(ex){}var registed=!1;window.registerAdressEvent=function(){if(!registed){registed=!0,radio.bind("click",function(e){var val=this.value;setTimeout(function(){changeSearchType(val)},20)}),$.browser.isIE6&&radioLabel.bind("click",function(e){var target=$(e.target);target.is("label")&&target.find(":radio").trigger("click")}),"jbh"===function(query){for(var vars=query.split("&"),query_string={},i=0;i<vars.length;i++){var pair=vars[i].split("="),key=decodeURIComponent(pair[0]),value=decodeURIComponent(pair[1]);if(void 0===query_string[key])query_string[key]=decodeURIComponent(value);else if("string"==typeof query_string[key]){var arr=[query_string[key],decodeURIComponent(value)];query_string[key]=arr}else query_string[key].push(decodeURIComponent(value))}return query_string}(location.search.substring(1)).mkt_header&&($(".intl-tit").css("display","none"),$(".find-tit").css("display","none"));var search=window.location.search.substr(1),pageData={};search=search.split("&");for(var i=0;i<search.length;i++)search[i]&&search[i].indexOf("=")>-1&&(search[i]=search[i].split("="),search[i][0]&&(pageData[search[i][0]]=search[i][1]));if(search&&pageData.AutoInput&&"true"==pageData.AutoInput){var ACity=pageData.ACity1,RelDDate=pageData.RelDDate||"";if(RelDDate){var now=window.Utils.now();now.setDate(1*now.getDate()+1*RelDDate),DDate_str=now.getFullYear()+"-",DDate_str+=now.getMonth()+1+"-",now.getDate()<10?DDate_str+="0"+now.getDate():DDate_str+=now.getDate()}setTimeout(function(){$("#radio_S").trigger("click"),document.getElementById("DepartDate1TextBox").value=DDate_str,document.getElementById("DDate1").value=DDate_str,online.inits.DepartDate1TextBox.method("checkValue"),DDate_str&&online.canlendarRef.DepartDate1TextBox.method("setWeek",$("#DepartDate1TextBox"))},100),window.Utils.CITYCODE.ready(function(code2name,name2code){document.getElementById("ACity1").value=ACity,document.getElementById("ArriveCity1TextBox").value=code2name[ACity].split("|")[0],online.inits.ArriveCity1TextBox.method("checkValue")})}else{var FD_SearchHistorty=window.Utils.Cookie.get("FD_SearchHistorty");FD_SearchHistorty=FD_SearchHistorty?cQuery.parseJSON(FD_SearchHistorty):{},changeSearchType(FD_SearchHistorty.type||"S",!0)}}},window.SetSearchCookie=function(){var searchTxt="",SearchType=g_SearchType;switch("D"==SearchType&&isNull($("#ReturnDepartDate1TextBox")[0])&&(SearchType="S"),SearchType){case"S":searchTxt="S$"+$("#DepartCity1TextBox").value()+"$"+$("#DCity1").value()+"$"+$("#DepartDate1TextBox").value()+"$"+$("#ArriveCity1TextBox").value()+"$"+$("#ACity1").value();break;case"D":searchTxt="D$"+$("#DepartCity1TextBox").value()+"$"+$("#DCity1").value()+"$"+$("#DepartDate1TextBox").value()+"$"+$("#ArriveCity1TextBox").value()+"$"+$("#ACity1").value()+"$"+$("#ReturnDepartDate1TextBox").value();break;case"M":searchTxt="M$"+$("#DepartCity1TextBox").value()+"$"+$("#DCity1").value()+"$"+$("#DepartDate1TextBox2").value()+"$"+$("#ArriveCity1TextBox").value()+"$"+$("#ACity1").value()+"$"+$("#DepartDate2TextBox").value()+"$"+$("#TransitCityTextBox").value()+"$"+$("#TransitCity").value()}pageConfig.DomesticOpenJaw&&"M"==SearchType&&(searchTxt="M$"+$("#M_DepartCity1TextBox").value()+"$"+$("#DCity1").value()+"$"+$("#DepartDate1TextBox2").value()+"$"+$("#M_ArriveCity1TextBox").value()+"$"+$("#ACity1").value()+"$"+$("#DepartDate2TextBox").value()+"$"+$("#M_ArriveCity2TextBox").value()+"$"+$("#ACity2").value()+"$"+$("#M_DepartCity2TextBox").value()+"$"+$("#DCity2").value()),searchTxt=escape(searchTxt);var domain=document.domain.split(".").slice(-1!==document.domain.indexOf(".hk")?-3:-2).join("."),FD_SearchHistorty={type:SearchType,data:searchTxt};window.Utils.Cookie.set("FD_SearchHistorty",cQuery.stringifyJSON(FD_SearchHistorty),30,domain)};var serialize=function(obj){var str=[];for(var k in obj)obj.hasOwnProperty(k)&&str.push(k+"="+obj[k]);return str.join("&")},J_filghtSearch=$("#J_filghtSearch"),J_filghtSearch2=document.getElementById("J_filghtSearch2"),aBoxDCity=$("#DepartCity1TextBox")[0],aBoxACity=$("#ArriveCity1TextBox")[0],aBoxDDate=$("#DepartDate1TextBox")[0],aBoxADate=$("#ReturnDepartDate1TextBox")[0],airHotelPame=document.getElementById("airHotelPame"),airHotelParameter=airHotelPame.action;window.RedirectToFlthotelAction=function(){if(ValidateForm(!0)&&window.Utils.ALLCITY.Inited){var dCityCode=$("#DCity1")[0].value,aCityCode=$("#ACity1")[0].value,dCityObj=window.Utils.ALLCITY[dCityCode],aCityObj=window.Utils.ALLCITY[aCityCode];if(!dCityObj)return setTimeout(function(){online.validateObj.method("show",{$obj:$("#DepartCity1TextBox"),data:$("#DepartCity1TextBox")[0].value+" 没有机场",removeErrorClass:!0,hideEvent:"blur",isFocus:!0})},30),!1;if(!aCityObj)return setTimeout(function(){online.validateObj.method("show",{$obj:$("#ArriveCity1TextBox"),data:$("#ArriveCity1TextBox")[0].value+" 没有机场",removeErrorClass:!0,hideEvent:"blur",isFocus:!0})},30),!1;var _totime=aBoxADate.value&&"yyyy-mm-dd"!==aBoxADate.value?aBoxADate.value:ProcessAddDays(aBoxDDate.value,2);createHiddenElemByObj({from:dCityObj.Id,to:aCityObj.Id,h:aCityObj.Id,fromtime:aBoxDDate.value,totime:_totime,checkindate:aBoxDDate.value,checkoutdate:_totime,adults:1,children:0},"airHotelPame","input"),airHotelPame.method="GET",airHotelPame.submit()}return!1},$("#DCityCodeFlightSearch")[0].value="",$("#ACityCodeFlightSearch")[0].value="";var focusConfig={S:{DepartCity1TextBox:"ArriveCity1TextBox",ArriveCity1TextBox:"DepartDate1TextBox"},D:{DepartCity1TextBox:"ArriveCity1TextBox",ArriveCity1TextBox:"DepartDate1TextBox",DepartDate1TextBox:"ReturnDepartDate1TextBox"},M:{DepartCity1TextBox:"DepartDate1TextBox2",DepartDate1TextBox2:"TransitCityTextBox",TransitCityTextBox:"DepartDate2TextBox",DepartDate2TextBox:"ArriveCity1TextBox"}};if(pageConfig.DomesticOpenJaw&&(focusConfig.M={M_DepartCity1TextBox:"M_ArriveCity1TextBox",M_ArriveCity1TextBox:"DepartDate1TextBox2",DepartDate1TextBox2:"M_DepartCity2TextBox",M_DepartCity2TextBox:"M_ArriveCity2TextBox",M_ArriveCity2TextBox:"DepartDate2TextBox"}),$("#search_btn").bind("click",function(e){return e.preventDefault(),OpenShowFareFirst(),!1}),$("#search_btn").bind("keydown",function(e){13==e.keyCode&&$(this).trigger("click")}),pageConfig.AlertFioMessage&&!$.cookie.get("showFioMessageFirst_flag")){for(var div='<div class="basic-popups popup-tips" id="alert_fio_message" style="margin:0 20px;display: inline-block;">                <i class="ico-error-max"></i>                <div class="popup-body">                <div class="popup-info">                <p class="text"><strong class="f-red">紧急公告：</strong>{message}</p>            </div>            </div>            <div class="popup-footer">                <div class="btn-group">                <a href="javascript:;" class="button">确认</a>                </div>                </div>                </div>',messageList=pageConfig.AlertFioMessage,message="",i=0;i<messageList.Messages.length;i++)message+=1==messageList.Messages.length?messageList.Messages[i]:i+1+"."+messageList.Messages[i]+"</br>";$("body").append($.instance(div.replace("{message}",message)));var alertFioMessageMask=new Ctrip.UI.Dialog({showTitle:!1,type:"id",content:"alert_fio_message",height:0,width:0,showClose:!1,classNames:{dialog:"basic-popups",content:"pop_bd",close:"delete"}});$.cookie.set("showFioMessageFirst_flag","flag",!0),$("#alert_fio_message .button").bind("click",function(){alertFioMessageMask.close()})}$("#commitment").bind("click",function(e){if(0==$("#FlightCommitmentMask").length){$("body").append($.instance('<div style="display: inline-block;" id = "FlightCommitmentMask" class="basic-popups commitment-popup"><a class="close" href="javascript:;">×</a><div class="popup-body"><img alt="" src="http://pic.c-ctrip.com/fltcommon/index/commitment-detail.jpg"></div></div>'))}var CommitmentMask=new Ctrip.UI.Dialog({showTitle:!1,type:"id",content:"FlightCommitmentMask",height:0,width:0,showClose:!1,classNames:{dialog:"base_pop",content:"pop_bd",close:"delete"}});$("#FlightCommitmentMask .close").bind("click",function(e){CommitmentMask.close()})}),$("div.search_form input").bind("keydown",function(e){var target=$(this),key=e.keyCode||e.charCode;9==key&&($.browser.isIE6||$.browser.isIE7)&&"DepartCity1TextBox"==target.attr("id")&&"none"!=$("#changecityid").css("display")&&setTimeout(function(){$("#ArriveCity1TextBox")[0].focus()},10),(9==key||13==key)&&focusNextInput(this.id,13==key,target.value())});var addressFocusFlag=!0,version={address:"1.0",animate:"1.0",calendar:"6.0",jmp:"1.1",notice:"1.1",sideBar:"2.0",validate:"1.1"},resource=["//webresource.c-ctrip.com/code/cquery/resource/address/"],suggestionStyle=".address_hot{background-color:#FFFFFF;font-size:12px;width:332px;padding-top:5px;border:1px solid #999;"+($.browser.isIE6?"position:static;":"")+"}.address_hotcity{color:#999;height:24px;line-height:24px;padding:0 10px}.address_hotcity .close{float:right;width:20px;height:20px;margin-top:3px;text-align:center;font:bold 16px/20px Simsun;text-decoration:none;color:#666}.address_hotlist{overflow:hidden;padding:5px}address_hot li,.address_hot_abb,.address_hot_adress{list-style:none outside none;margin:0;padding:0}.address_hot_abb{border-bottom:1px solid #5DA9E2;padding-bottom:20px}.address_hot_abb li{color:#005DAA;cursor:pointer;float:left;height:20px;line-height:20px;list-style-type:none;text-align:center}.address_hot_abb li span{padding:0 8px}.address_hot_abb li .hot_selected{background-color:#FFFFFF;border-color:#5DA9E2;border-style:solid;border-width:1px 1px 0;color:#000000;display:block;font-weight:bold;padding:0 7px}ul.address_hot_adress{padding-left:30px;padding-top:4px}dl.address_hot_adress{padding-left:30px;padding-top:4px}.address_hot_adress li{float:left;height:24px;overflow:hidden;width:67px}.address_hot_adress li a{border:1px solid #FFFFFF;color:#000000;display:block;height:22px;line-height:22px;padding-left:5px}.address_hot_adress li a:hover{background-color:#E8F4FF;border:1px solid #ACCCEF;text-decoration:none}.address_hot_adress a{text-decoration:none}.address_hot_adress dt{float:left;_display:inline;width:20px;margin-left:-25px;text-align:center;font-family:Verdana;color:#E56700;line-height:22px}.address_hot_adress dd{overflow:hidden;*zoom:1}.address_hot_adress dd a{float:left;width:65px;height:22px;padding-left:5px;float:left;border:1px solid #FFFFFF;color:#000;line-height:22px;overflow:hidden}.address_hot_adress dd a:hover{border:1px solid #ACCCEF;background-color:#E8F4FF;text-decoration:none}",suggResult=null,MySortFunction=function(data,val,isAccurate,isReturnBest){suggResult={};var ret=[],k=0,reg1=new RegExp("@"+val.toReString()+".+","i"),reg2=new RegExp("@.+\\|([a-z]{3},)*"+val.toReString()+".+","i"),reg3=new RegExp("[a-z]","i"),MyFliter=function(a,b){var sortPrioity=0,isMath=!1,arr=b.split("|");if(isReturnBest){if(arr[1]!=val)return;ret[k++]={left:arr[0],right:arr[1],data:b,sortPrioity:sortPrioity}}else""!=arr[6]&&(sortPrioity-=200),arr[1].indexOf("(")>0&&(sortPrioity-=1),arr[0].indexOf("Shanhaiguan")>-1&&(sortPrioity-=5),1==val.length?reg3.test(val)?(isMath=reg1.test(a),sortPrioity+=100):(isMath=reg2.test(a),sortPrioity+=50):1<val.length&&(reg1.test(a)&&(sortPrioity+=100,isMath=!0),reg2.test(a)&&(0==arr[4].indexOf(val.toUpperCase())&&(sortPrioity+=50),0==arr[2].indexOf(val.toUpperCase())&&(sortPrioity+=10),isMath=!0)),isMath&&isNaN(val)&&(ret[k++]={left:arr[0],right:arr[1],data:b,priority:sortPrioity})};return data.replace(new RegExp("@([^@]*"+val.toReString()+"[^@]*)","gi"),MyFliter),isReturnBest||ret.sort(function(a,b){return a.priority==b.priority?a.data<b.data?-1:a.data>b.data?1:0:a.priority>b.priority?-1:1}),suggResult=ret,ret};online.extend=function(){var arg=arguments,a=1==arg.length?online:arg[0],b=arg.length>1?arg[1]:arg[0];if(null==b)return a;try{for(var n in b)!a.hasOwnProperty(b[n])&&("object"==typeof a&&(a[n]=b[n])||"function"==typeof a&&(a.prototype[n]=b[n]));return a}catch(ex){}},online.extend({matchNode:function(element,direction,start){for(var node=element[start];node;node=node[direction])if(1==node.nodeType)return node;return null},next:function(){return online.matchNode(arguments[0],"nextSibling","nextSibling")}}),online.extend({inits:{},canlendarRef:{},elements:$("[mod]"),charset:cQuery.config("charset"),getValidate:function(){return $(document).regMod("validate",version.validate)},registerAll:function(){for(var els=online.elements,sp=[],i=0,len=els.length;i<len;i++){var element=els[i],mod=element.getAttribute("mod");if(mod)if("string"!=typeof(sp=-1!=mod.indexOf("|")?mod.split("|"):mod))for(var j=0,l=sp.length;j<l;j++)pageConfig.isOpenPOIAddress&&"address"==sp[j]&&(sp[j]="poi_address"),"calendar"==sp[j]&&pageConfig&&pageConfig.isNewHome&&(sp[j]="lowestCalendar"),online["register_"+sp[j]]($(element));else pageConfig.isOpenPOIAddress&&"address"==sp&&(sp="poi_address"),"calendar"==sp&&pageConfig&&pageConfig.isNewHome&&(sp="lowestCalendar"),online["register_"+sp]($(element))}},register_address:function(element){var parent=$("#LowestPriceDepartCity").parent(),poptip=document.getElementById("CityPopTip");if(!poptip){poptip=document.createElement("div"),poptip.id="CityPopTip",poptip.className="poptip",poptip.style.display="none";try{poptip.innerHTML='<span class="poptip-arrow poptip-arrow-left"><em>◆</em><i>◆</i></span>'+online.msg.ERROR_FLIGHT[2]}catch(ex){poptip.innerHTML='<span class="poptip-arrow poptip-arrow-left"><em>◆</em><i>◆</i></span>出发城市不能和到达城市相同'}parent.append(poptip)}var focusLoader=element[0].getAttribute("focus_loader"),pcTemplateOn={};pcTemplateOn.suggestion=newPageTemp,pcTemplateOn.filter=newFliterTemp,pcTemplateOn.filterPageSize=10,pcTemplateOn.suggestionStyle=suggestionStyle,pcTemplateOn.filterStyle=".c_address_select {font-family: Arial,Simsun;font-size: 12px;}.c_address_select .c_address_wrap {background: none repeat scroll 0 0 #FFFFFF;border: 1px solid #7F9DB9;margin: 0;padding: 0 0 4px;text-align: left;width: 300px;}.c_address_select .c_address_wrong{height:auto;overflow:hidden;padding:5px 10px;line-height:18px;color:#C01111;word-break:break-all;word-wrap:break-word;}.c_address_select .c_address_list {margin: 0;max-height: 600px;padding: 0;}.c_address_select .c_address_list a {border-bottom: 1px solid #FFFFFF;border-top: 1px solid #FFFFFF;color: #0055AA;cursor: pointer;display: block;height: 22px;line-height: 22px;min-height: 22px;overflow: hidden;padding: 1px 9px 0;text-align: left;text-decoration: none;}.c_address_select .c_address_list a:hover {background: none repeat scroll 0 0 #E8F4FF;border-bottom: 1px solid #7F9DB9;border-top: 1px solid #7F9DB9;}.c_address_select .c_address_list span {float: right;font: 10px/22px verdana;margin: 0;overflow: hidden;padding: 0;text-align: right;white-space: nowrap;width: 110px;}.c_address_select .c_address_pagebreak {display: none;line-height: 25px;margin: 0;padding: 0;text-align: center;}.c_address_select .c_address_pagebreak a {color: #0055AA;display: inline-block;font-family: Arial,Simsun,sans-serif;font-size: 14px;margin: 0;padding: 0 4px;text-align: center;text-decoration: underline;width: 15px;}.c_address_select .c_address_pagebreak a.address_current {color: #000; text-decoration: none;}.c_address_select .c_address_list .nearby {color:#333;}.c_address_select .c_address_list .none {cursor:default;}.c_address_select .c_address_list .none:hover {border-top:1px solid #FFF;border-bottom:1px solid #FFF;background-color:#FFF;}.c_address_select .c_address_list i {font-style:normal;color:#999;}.address_selected { background: none repeat scroll 0 0 #FFE6A6; color: #FFFFFF; height: 22px; }.c_address_list .hover {background: none repeat scroll 0 0 #E8F4FF;border-bottom: 1px solid #7F9DB9;border-top: 1px solid #7F9DB9;}",pcTemplateOn.suggestionInit=function(obj){function switchTab(){var _this=this;spans.each(function(span,i){span[0]==_this?(span.addClass("hot_selected"),uls[i].style.display=""):(span.removeClass("hot_selected"),uls[i].style.display="none")}),obj.cover()}for(var spans=obj.find("span"),uls=obj.find("dl"),hotul=obj.find("ul"),i=0;i<uls.length;i++)hotul.push(uls[i]);if(uls=hotul,spans.length){for(var w=30,i=0,n=spans.length;i<n;i++)w+=spans[i].offsetWidth;var t=obj.find("div").first();t[0]&&t.css("width","335px"),spans.bind("mousedown",switchTab),switchTab.apply(spans[0]),obj.find(".close").bind("mousedown",function(){addressFocusFlag=!1,element[0].blur(),setTimeout(function(){addressFocusFlag=!0},10)})}};var get=function(element){var fileName=element[0].getAttribute("mod_address_source"),id=element[0].getAttribute("id"),relate=$("#"+element[0].getAttribute("mod_address_reference")),mysort=["^0$","^1$","^2$","^3$","^4$","^5$","^0","^1","^2","^3","^4","^5","0","1","2","3","4","5"];$.browser.isIPad||(mysort=MySortFunction);var template={};"on"!=element[0].getAttribute("mod_address_tpl")||$.browser.isIPad||(template=pcTemplateOn),"fltDomestic"==fileName&&(fileName="flight"),$.browser.isIPad&&(fileName="flight/flight"),online.adressMod||(online.adressMod={});var ele=online.adressMod[element.attr("id")]=element.regMod("address",version.address,{name:id,jsonpSource:resource[0]+fileName+"_"+online.charset+".js"+window.Utils.releaseno,template:template,isAutoCorrect:!0,relate:{2:relate},sort:mysort});element.bind("keydown",function(e){9==e.keyCode&&(suggResult&&suggResult[0]&&element.value()!=suggResult[0].right&&(element.value(suggResult[0].right),relate.value(suggResult[0].data.split("|")[2]),element.trigger("chage")),suggResult=[])}),ele.method("bind","change",function(e,data){if(suggResult=[],element.is("#LowestPriceDepartCity")||element.is("#LowestPriceArriveCity")){if(""==data.value)return element.value(element.attr("data-oldval")),_fn.CITYCODE.ready(function(code2name,name2code){setTimeout(function(){$("#"+element.attr("mod_address_reference")).value(name2code[element.value()])},30)}),!1;var callback=function(cityName){if(element[0].blur(),element.attr("data-oldval")!=cityName){element.attr("data-oldval",cityName);var Did=$("#HiddenLowestPriceDepartCity").value(),Aid=$("#HiddenLowestPriceArriveCity").value();if(Did=Did.split(",")[0],Aid=Aid.split(",")[0],$("#HiddenLowestPriceDepartCity").value(Did),$("#HiddenLowestPriceArriveCity").value(Aid),Aid==Did||$("#LowestPriceDepartCity").value()==$("#LowestPriceArriveCity").value())return poptip.style.display="block",element.addClass("error"),element.attr("data-oldval",$("#LowestPriceDepartCity").value()),!1;poptip.style.display="none",$("#LowestPriceDepartCity").removeClass("error"),$("#LowestPriceArriveCity").removeClass("error"),window.Utils.Calendar.render()}},cityCode=data.items.code,cityName=data.items.name;return _fn.CITYCODE.ready(function(code2name,name2code){if(cityName.indexOf("__")>-1)cityName=cityName.replace("__","").replace("-",""),element.value(cityName),$("#"+element.attr("mod_address_reference")).value(name2code[cityName]),callback(cityName);else if(code2name[cityCode.indexOf(",")?cityCode.split(",")[0]:cityCode]||"GOQ"==cityCode||"ENY"==cityCode)callback(cityName);else{element.attr("data-oldval","");var noAriPort="gb2312"==$.config("charset")?"没有机场":"沒有機場";window.Utils.Calendar.showTip("很抱歉，"+cityName+noAriPort)}}),!1}if(""==data.value)return this.blur(),!1;if(this.value.indexOf("__")>0)for(var city=this.value.replace("__","").replace("-",""),cityData=ele.get("source").data.split("@"),i=0;i<cityData.length;i++)if(city==cityData[i].split("|")[1]){this.value=city,document.getElementById(this.getAttribute("mod_address_reference")).value=cityData[i].split("|")[2];break}1==addressFocusFlag&&focusNextInput(this.id)})};focusLoader?element.bind("focus",get.bind(this,element)):get(element),setTimeout(function(){window.registerAdressEvent&&window.registerAdressEvent()},30)},register_poi_address:function(element){var parent=$("#LowestPriceDepartCity").parent(),poptip=document.getElementById("CityPopTip");if(!poptip){poptip=document.createElement("div"),poptip.id="CityPopTip",poptip.className="poptip",poptip.style.display="none";try{poptip.innerHTML='<span class="poptip-arrow poptip-arrow-left"><em>◆</em><i>◆</i></span>'+online.msg.ERROR_FLIGHT[2]}catch(ex){poptip.innerHTML='<span class="poptip-arrow poptip-arrow-left"><em>◆</em><i>◆</i></span>出发城市不能和到达城市相同'}parent.append(poptip)}var focusLoader=element[0].getAttribute("focus_loader"),pcTemplateOn={};pcTemplateOn.suggestion='<div class="address_hot" id="address_hot" style="padding:10px;">                            <div class="address_hotcity_fd"><a href="" class="close">×</a>支持中文/拼音/简拼输入</div>                            <div class="address_hotlist">                                <ol class="address_hot_abb">                                    {{enum(key) data}}                                    <li><span class="hot_selected">${key}</span></li>                                    {{/enum}}                                </ol>                                {{enum(key,arr) data}}                                    {{if key=="热门"}}                                        <ul class="address_hot_adress layoutfix">                                        {{each arr}}                                        <li><a data="${data}" href="javascript:void(0);">${display}</a></li>                                        {{/each}}                                        </ul>                                    {{else}}                                        <dl class="address_hot_adress layoutfix">                                        {{enum(subKey,subArr) arr}}                                            <dt>${subKey}</dt>                                            <dd>                                        {{if !subArr.length>0}}                                        &nbsp;                                        {{/if}}                                            {{each subArr}}                                            <a href="javascript:;" title="${display}" data="${data}">${display}</a>                                            {{/each}}                                        </dd>                                        {{/enum}}                                        </dl>                                    {{/if}}                                {{/enum}}                            </div>                        </div>',pcTemplateOn.suggestionStyle=".address_hot { background-color: #FFFFFF; font-size: 12px; width: 332px; padding-top:5px; border:1px solid #999; position:static }                         .address_hotcity_fd { color: #999; margin-bottom: 10px;}                         .address_hotcity_fd .close { float:right; width:20px; height:20px; margin-top:3px; text-align:center; font:bold 16px/20px Simsun; text-decoration:none; color:#666; }                         .address_hotlist { overflow: hidden; }                         .address_hot li,  .address_hot_abb,  .address_hot_adress { list-style: none outside none; margin: 0; padding: 0; }                         .address_hot_abb { width: 100%;height: 22px;margin-bottom: 2px;margin-top: 0;border-bottom: 2px solid #ccc;}                         .address_hot_abb li {position: relative;float: left;display: inline;margin-right: 2px;line-height: 22px;cursor: pointer;margin-bottom: -2px;}                         .address_hot_abb li span { padding: 0 8px; font-family: Verdana; }                         .address_hot_abb li .hot_selected {border-top:0;border-left:0;border-right:0;border-bottom: 2px solid #06c;font-weight: bold;color: #06c; height: 22px; display: inline-block;}                         ul.address_hot_adress { padding-top: 4px; }                         dl.address_hot_adress { padding-left:30px; padding-top: 4px; clear:both; }                         .address_hot_adress li { float: left; height: 24px; overflow: hidden; width: 67px;padding-right: 2px; }                         .address_hot_adress li a { color: #000; display: block; height: 22px; line-height: 22px; padding-left: 8px; }                         .address_hot_adress li a:hover { background-color:#2577E3; color: #FFF; text-decoration: none; }                         .address_hot_adress a { text-decoration: none; }                         .address_hot_adress dt { float:left; _display:inline; width:20px; margin-left:-25px; text-align:center; font-family:Verdana; color:#E56700; line-height:22px; }                         .address_hot_adress dd { overflow:hidden; *zoom:1;}                         .address_hot_adress dd a { width:52px; padding-left: 8px; height:22px; float:left; color:#000; line-height:22px; overflow:hidden; margin:0 2px 2px 0; }                         .address_hot_adress dd a:hover { background-color:#2577E3; color: #FFF; text-decoration: none; }",pcTemplateOn.suggestionInit=function(obj){function switchTab(){var _this=this;spans.each(function(span,i){span[0]==_this?(span.addClass("hot_selected"),uls[i].style.display=""):(span.removeClass("hot_selected"),uls[i].style.display="none")}),obj.cover()}for(var spans=obj.find("span"),uls=obj.find("dl"),hotul=obj.find("ul"),i=0;i<uls.length;i++)hotul.push(uls[i]);if(uls=hotul,spans.length){for(var w=30,i=0,n=spans.length;i<n;i++)w+=spans[i].offsetWidth;var t=obj.find("div").first();t[0]&&t.css("width","365px"),spans.bind("mousedown",switchTab),switchTab.apply(spans[0]),obj.find(".close").bind("mousedown",function(){addressFocusFlag=!1,element[0].blur(),setTimeout(function(){addressFocusFlag=!0},10)})}};var get=function(element){var fileName=element[0].getAttribute("mod_address_source"),id=element[0].getAttribute("id"),relate=$("#"+element[0].getAttribute("mod_address_reference")),template=pcTemplateOn;online.adressMod||(online.adressMod={});var InitSuggestionSource={suggestion:{"热门":[{display:"北京",data:"|北京(BJS)||BJS"},{display:"上海",data:"|上海(SHA)||SHA"},{display:"广州",data:"|广州(CAN)||CAN"},{display:"深圳",data:"|深圳(SZX)||SZX"},{display:"成都",data:"|成都(CTU)||CTU"},{display:"杭州",data:"|杭州(HGH)||HGH"},{display:"武汉",data:"|武汉(WUH)||WUH"},{display:"西安",data:"|西安(SIA)||SIA"},{display:"重庆",data:"|重庆(CKG)||CKG"},{display:"青岛",data:"|青岛(TAO)||TAO"},{display:"长沙",data:"|长沙(CSX)||CSX"},{display:"南京",data:"|南京(NKG)||NKG"},{display:"厦门",data:"|厦门(XMN)||XMN"},{display:"昆明",data:"|昆明(KMG)||KMG"},{display:"大连",data:"|大连(DLC)||DLC"},{display:"天津",data:"|天津(TSN)||TSN"},{display:"郑州",data:"|郑州(CGO)||CGO"},{display:"三亚",data:"|三亚(SYX)||SYX"},{display:"济南",data:"|济南(TNA)||TNA"},{display:"福州",data:"|福州(FOC)||FOC"}],ABCDEF:{A:[{display:"阿勒泰",data:"Aletai|阿勒泰(AAT)|175|AAT"},{display:"安康",data:"Ankang|安康(AKA)|171|AKA"},{display:"阿克苏",data:"Akesu|阿克苏(AKU)|173|AKU"},{display:"鞍山",data:"Anshan|鞍山(AOG)|178|AOG"},{display:"安庆",data:"Anqing|安庆(AQG)|177|AQG"},{display:"安顺",data:"Anshun|安顺(AVA)|179|AVA"},{display:"阿拉善左旗",data:"Alashanzuoqi|阿拉善左旗(AXF)|21269|AXF"},{display:"阿里",data:"Ali|阿里(NGQ)|97|NGQ"},{display:"阿拉善右旗",data:"Alashanyouqi|阿拉善右旗(RHT)|21863|RHT"},{display:"阿尔山",data:"Aershan|阿尔山(YIE)|1658|YIE"}],B:[{display:"百色",data:"Baise|百色(AEB)|1140|AEB"},{display:"包头",data:"Baotou|包头(BAV)|141|BAV"},{display:"毕节",data:"Bijie|毕节(BFJ)|22031|BFJ"},{display:"北海",data:"Beihai|北海(BHY)|189|BHY"},{display:"北京",data:"Beijing|北京(BJS)|1|BJS"},{display:"北京(南苑机场)",data:"Beijing(NANYUAN)|北京(南苑机场)(NAY)|1|BJS,NAY"},{display:"北京(首都国际机场)",data:"Beijing(CAPITAL)|北京(首都国际机场)(PEK)|1|BJS,PEK"},{display:"博乐",data:"Bole|博乐(BPL)|2548|BPL"},{display:"保山",data:"Baoshan|保山(BSD)|197|BSD"},{display:"巴彦淖尔",data:"Bayannaoer|巴彦淖尔(RLK)|3887|RLK"}],C:[{display:"昌都",data:"Changdu|昌都(BPX)|575|BPX"},{display:"常德",data:"Changde|常德(CGD)|201|CGD"},{display:"长春",data:"Changchun|长春(CGQ)|158|CGQ"},{display:"朝阳",data:"Chaoyang|朝阳(CHG)|211|CHG"},{display:"赤峰",data:"Chifeng|赤峰(CIF)|202|CIF"},{display:"长治",data:"Changzhi|长治(CIH)|137|CIH"},{display:"重庆",data:"Chongqing|重庆(CKG)|4|CKG"},{display:"长海",data:"Changhai|长海(CNI)|5091|CNI"},{display:"长沙",data:"Changsha|长沙(CSX)|206|CSX"},{display:"成都",data:"Chengdu|成都(CTU)|28|CTU"},{display:"常州",data:"Changzhou|常州(CZX)|213|CZX"},{display:"池州",data:"Chizhou|池州(JUH)|218|JUH"},{display:"长白山",data:"Changbaishan|长白山(NBS)|199|NBS"},{display:"潮州",data:"Chaozhou|潮州(SWA)|215|SWA"}],D:[{display:"大同",data:"Datong|大同(DAT)|136|DAT"},{display:"达县",data:"Daxian|达县(DAX)|234|DAX"},{display:"稻城",data:"Daocheng|稻城(DCY)|1222|DCY"},{display:"丹东",data:"Dandong|丹东(DDG)|221|DDG"},{display:"迪庆",data:"Diqing|迪庆(DIG)|93|DIG"},{display:"大连",data:"Dalian|大连(DLC)|6|DLC"},{display:"大理",data:"Dali|大理(DLU)|36|DLU"},{display:"敦煌",data:"Dunhuang|敦煌(DNH)|11|DNH"},{display:"东营",data:"Dongying|东营(DOY)|236|DOY"},{display:"大庆",data:"Daqing|大庆(DQA)|231|DQA"},{display:"德令哈",data:"Delhi|德令哈(HXD)|2542|HXD"},{display:"德宏",data:"Dehong|德宏(LUM)|365|LUM"}],E:[{display:"鄂尔多斯",data:"Eerduosi|鄂尔多斯(DSN)|3976|DSN"},{display:"额济纳旗",data:"Ejinaqi|额济纳旗(EJN)|21339|EJN"},{display:"恩施",data:"Enshi|恩施(ENH)|245|ENH"},{display:"二连浩特",data:"Erlianhaote|二连浩特(ERL)|7626|ERL"}],F:[{display:"福州",data:"Fuzhou|福州(FOC)|258|FOC"},{display:"阜阳",data:"Fuyang|阜阳(FUG)|257|FUG"},{display:"佛山",data:"Foshan|佛山(FUO)|251|FUO"},{display:"抚远",data:"Fuyuan|抚远(FYJ)|21943|FYJ"},{display:"富蕴",data:"Fuyun|富蕴(FYN)|255|FYN"}]},GHIJ:{G:[{display:"广州",data:"Guangzhou|广州(CAN)|32|CAN"},{display:"广汉",data:"Guanghan|广汉(GHN)|750|GHN"},{display:"格尔木",data:"Geermu|格尔木(GOQ)|132|GOQ"},{display:"广元",data:"Guangyuan|广元(GYS)|267|GYS"},{display:"固原",data:"Guyuan|固原(GYU)|321|GYU"},{display:"赣州",data:"Ganzhou|赣州(KOW)|268|KOW"},{display:"贵阳",data:"Guiyang|贵阳(KWE)|38|KWE"},{display:"桂林",data:"Guilin|桂林(KWL)|33|KWL"},{display:"光化",data:"Guanghua|光化(LHK)|746|LHK"}],H:[{display:"红原",data:"Hongyuan|红原(AHJ)|7835|AHJ"},{display:"海口",data:"Haikou|海口(HAK)|42|HAK"},{display:"河池",data:"Hechi|河池(HCJ)|3969|HCJ"},{display:"邯郸",data:"Handan|邯郸(HDG)|275|HDG"},{display:"黑河",data:"Heihe|黑河(HEK)|281|HEK"},{display:"呼和浩特",data:"Huhehaote|呼和浩特(HET)|103|HET"},{display:"合肥",data:"Hefei|合肥(HFE)|278|HFE"},{display:"杭州",data:"Hangzhou|杭州(HGH)|17|HGH"},{display:"淮安",data:"Huaian|淮安(HIA)|577|HIA"},{display:"怀化",data:"Huaihua|怀化(HJJ)|282|HJJ"},{display:"海拉尔",data:"Hailaer|海拉尔(HLD)|142|HLD"},{display:"哈密",data:"Hami|哈密(HMI)|285|HMI"},{display:"衡阳",data:"Hengyang|衡阳(HNY)|297|HNY"},{display:"哈尔滨",data:"Haerbin|哈尔滨(HRB)|5|HRB"},{display:"和田",data:"Hetian|和田(HTN)|294|HTN"},{display:"惠州",data:"Huizhou Pingtan Airport|惠州(HUZ)|299|HUZ"},{display:"汉中",data:"Hanzhong|汉中(HZG)|129|HZG"},{display:"黄山",data:"Huangshan|黄山(TXN)|23|TXN"}],J:[{display:"景德镇",data:"Jingdezhen|景德镇(JDZ)|305|JDZ"},{display:"加格达奇",data:"Jiagedaqi|加格达奇(JGD)|1143|JGD"},{display:"嘉峪关",data:"Jiayuguan|嘉峪关(JGN)|326|JGN"},{display:"井冈山",data:"Jinggangshan|井冈山(JGS)|307|JGS"},{display:"金昌",data:"Jinchang|金昌(JIC)|1158|JIC"},{display:"九江",data:"Jiujiang|九江(JIU)|24|JIU"},{display:"晋江",data:"Jinjiang|晋江(JJN)|1803|JJN"},{display:"佳木斯",data:"Jiamusi|佳木斯(JMU)|317|JMU"},{display:"济宁",data:"Jining|济宁(JNG)|318|JNG"},{display:"锦州",data:"Jinzhou|锦州(JNZ)|327|JNZ"},{display:"鸡西",data:"Jixi|鸡西(JXA)|157|JXA"},{display:"九寨沟",data:"Jiuzhaigou|九寨沟(JZH)|91|JZH"},{display:"荆州",data:"Jingzhou|荆州(SHS)|328|SHS"},{display:"揭阳",data:"Jieyang|揭阳(SWA)|956|SWA"},{display:"济南",data:"Jinan|济南(TNA)|144|TNA"}]},KLMN:{K:[{display:"库车",data:"Kuche|库车(KCA)|329|KCA"},{display:"康定",data:"Kangding|康定(KGT)|4130|KGT"},{display:"喀什",data:"Kashi|喀什(KHG)|109|KHG"},{
display:"凯里",data:"Kaili|凯里(KJH)|333|KJH"},{display:"喀纳斯",data:"Kanasi|喀纳斯(KJI)|3326|KJI"},{display:"昆明",data:"Kunming|昆明(KMG)|34|KMG"},{display:"库尔勒",data:"Kuerle|库尔勒(KRL)|330|KRL"},{display:"克拉玛依",data:"Kelamayi|克拉玛依(KRY)|166|KRY"}],L:[{display:"黎平",data:"Liping|黎平(HZH)|3852|HZH"},{display:"龙岩",data:"Longyan|龙岩(LCX)|348|LCX"},{display:"兰州",data:"Lanzhou|兰州(LHW)|100|LHW"},{display:"梁平",data:"Liangping|梁平(LIA)|427|LIA"},{display:"丽江",data:"Lijiang|丽江(LJG)|37|LJG"},{display:"荔波",data:"Libo|荔波(LLB)|1708|LLB"},{display:"吕梁",data:"Lvliang|吕梁(LLV)|7631|LLV"},{display:"临沧",data:"Lincang|临沧(LNJ)|1236|LNJ"},{display:"六盘水",data:"Liupanshui|六盘水(LPF)|605|LPF"},{display:"拉萨",data:"Lasa|拉萨(LXA)|41|LXA"},{display:"林西",data:"Linxi|林西(LXI)|744|LXI"},{display:"洛阳",data:"Luoyang|洛阳(LYA)|350|LYA"},{display:"连云港",data:"Lianyungang|连云港(LYG)|353|LYG"},{display:"临沂",data:"Linyi|临沂(LYI)|569|LYI"},{display:"柳州",data:"Liuzhou|柳州(LZH)|354|LZH"},{display:"泸州",data:"Luzhou|泸州(LZO)|355|LZO"},{display:"林芝",data:"Linzhi|林芝(LZY)|108|LZY"}],M:[{display:"芒市",data:"Mangshi|芒市(LUM)|365|LUM"},{display:"牡丹江",data:"Mudanjiang|牡丹江(MDG)|150|MDG"},{display:"绵阳",data:"Mianyang|绵阳(MIG)|370|MIG"},{display:"梅州",data:"Meizhou|梅州(MXZ)|3053|MXZ"},{display:"满洲里",data:"Manzhouli|满洲里(NZH)|1083|NZH"},{display:"漠河",data:"Mohe|漠河(OHE)|155|OHE"}],N:[{display:"南昌",data:"Nanchang|南昌(KHN)|376|KHN"},{display:"南充",data:"Nanchong|南充(NAO)|377|NAO"},{display:"宁波",data:"Ningbo|宁波(NGB)|375|NGB"},{display:"南京",data:"Nanjing|南京(NKG)|12|NKG"},{display:"宁蒗",data:"Ninglang|宁蒗(NLH)|1161|NLH"},{display:"那拉提",data:"Nalati|那拉提(NLT)|3360|NLT"},{display:"南宁",data:"Nanning|南宁(NNG)|380|NNG"},{display:"南阳",data:"Nanyang|南阳(NNY)|385|NNY"},{display:"南通",data:"Nantong|南通(NTG)|82|NTG"}]},PQRSTUVW:{P:[{display:"攀枝花",data:"Panzhihua|攀枝花(PZI)|1097|PZI"},{display:"普洱",data:"Puer|普洱(SYM)|3996|SYM"}],Q:[{display:"且末",data:"Qiemo|且末(IQM)|399|IQM"},{display:"庆阳",data:"Qingyang|庆阳(IQN)|404|IQN"},{display:"黔江",data:"Qianjiang|黔江(JIQ)|7708|JIQ"},{display:"泉州",data:"Quanzhou|泉州(JJN)|406|JJN"},{display:"衢州",data:"Quzhou|衢州(JUZ)|407|JUZ"},{display:"齐齐哈尔",data:"Qiqihaer|齐齐哈尔(NDG)|149|NDG"},{display:"秦皇岛",data:"Qinhuangdao|秦皇岛(SHP)|147|SHP"},{display:"青岛",data:"Qingdao|青岛(TAO)|7|TAO"}],R:[{display:"日照",data:"Rizhao|日照(RIZ)|1106|RIZ"},{display:"日喀则",data:"Rikaze|日喀则(RKZ)|92|RKZ"}],S:[{display:"神农架",data:"Shennongjia|神农架(HPG)|657|HPG"},{display:"上海",data:"Shanghai|上海(SHA)|2|SHA"},{display:"上海(浦东国际机场)",data:"Shanghai(PU DONG)|上海(浦东国际机场)(PVG)|2|SHA,PVG"},{display:"上海(虹桥国际机场)",data:"Shanghai(HONGQIAO)|上海(虹桥国际机场)(SHA)|2|SHA,SHA"},{display:"沈阳",data:"Shenyang|沈阳(SHE)|451|SHE"},{display:"石家庄",data:"Shijiazhuang|石家庄(SJW)|428|SJW"},{display:"汕头",data:"Shantou|汕头(SWA)|447|SWA"},{display:"三亚",data:"Sanya|三亚(SYX)|43|SYX"},{display:"深圳",data:"Shenzhen|深圳(SZX)|30|SZX"}],T:[{display:"台州",data:"Taizhou|台州(HYN)|578|HYN"},{display:"塔城",data:"Tacheng|塔城(TCG)|455|TCG"},{display:"腾冲",data:"Tengchong|腾冲(TCZ)|1819|TCZ"},{display:"铜仁",data:"Tongren|铜仁(TEN)|1227|TEN"},{display:"通辽",data:"Tongliao|通辽(TGO)|458|TGO"},{display:"天水",data:"Tianshui|天水(THQ)|464|THQ"},{display:"吐鲁番",data:"Tulufan|吐鲁番(TLQ)|21811|TLQ"},{display:"通化",data:"Tonghua|通化(TNH)|456|TNH"},{display:"天津",data:"Tianjin|天津(TSN)|3|TSN"},{display:"唐山",data:"Tangshan|唐山(TVS)|468|TVS"},{display:"太原",data:"Taiyuan|太原(TYN)|105|TYN"},{display:"泰州",data:"Taizhou|泰州(YTY)|15|YTY"}],W:[{display:"乌兰浩特",data:"Wulanhaote|乌兰浩特(HLH)|484|HLH"},{display:"乌鲁木齐",data:"Wulumuqi|乌鲁木齐(URC)|39|URC"},{display:"潍坊",data:"Weifang|潍坊(WEF)|475|WEF"},{display:"威海",data:"Weihai|威海(WEH)|479|WEH"},{display:"文山",data:"Wenshan|文山(WNH)|1342|WNH"},{display:"温州",data:"Wenzhou|温州(WNZ)|491|WNZ"},{display:"乌海",data:"Wuhai|乌海(WUA)|1133|WUA"},{display:"武汉",data:"Wuhan|武汉(WUH)|477|WUH"},{display:"武夷山",data:"Wuyishan|武夷山(WUS)|26|WUS"},{display:"无锡",data:"Wuxi|无锡(WUX)|13|WUX"},{display:"梧州",data:"Wuzhou|梧州(WUZ)|492|WUZ"},{display:"万州",data:"Wanzhou|万州(WXN)|487|WXN"}]},XYZ:{X:[{display:"兴义",data:"Xingyi|兴义(ACX)|1139|ACX"},{display:"夏河",data:"Xiahe|夏河(GXH)|497|GXH"},{display:"西双版纳",data:"Xishuangbanna|西双版纳(JHG)|35|JHG"},{display:"西安",data:"Xian|西安(SIA)|10|SIA"},{display:"咸阳",data:"Xianyang|咸阳(SIA)|10|SIA"},{display:"忻州",data:"Xinzhou|忻州(WUT)|106|WUT"},{display:"襄阳",data:"Xiangyang|襄阳(XFN)|496|XFN"},{display:"西昌",data:"Xichang|西昌(XIC)|494|XIC"},{display:"锡林浩特",data:"Xilinhaote|锡林浩特(XIL)|500|XIL"},{display:"厦门",data:"Xiamen|厦门(XMN)|25|XMN"},{display:"西宁",data:"Xining|西宁(XNN)|124|XNN"},{display:"徐州",data:"Xuzhou|徐州(XUZ)|512|XUZ"}],Y:[{display:"延安",data:"Yanan|延安(ENY)|110|ENY"},{display:"银川",data:"Yinchuan|银川(INC)|99|INC"},{display:"伊春",data:"Yichun|伊春(LDS)|517|LDS"},{display:"永州",data:"Yongzhou|永州(LLF)|970|LLF"},{display:"榆林",data:"Yulin|榆林(UYN)|527|UYN"},{display:"宜宾",data:"Yibin|宜宾(YBP)|514|YBP"},{display:"运城",data:"Yuncheng|运城(YCU)|140|YCU"},{display:"宜春",data:"Yichun|宜春(YIC)|518|YIC"},{display:"宜昌",data:"Yichang|宜昌(YIH)|515|YIH"},{display:"伊宁",data:"Yining|伊宁(YIN)|529|YIN"},{display:"义乌",data:"Yiwu|义乌(YIW)|536|YIW"},{display:"延吉",data:"Yanji|延吉(YNJ)|523|YNJ"},{display:"烟台",data:"Yantai|烟台(YNT)|533|YNT"},{display:"盐城",data:"Yancheng|盐城(YNZ)|1200|YNZ"},{display:"扬州",data:"Yangzhou|扬州(YTY)|15|YTY"},{display:"玉树",data:"Yushu|玉树(YUS)|7582|YUS"}],Z:[{display:"郑州",data:"Zhengzhou|郑州(CGO)|559|CGO"},{display:"张家界",data:"Zhangjiajie|张家界(DYG)|27|DYG"},{display:"舟山",data:"Zhoushan|舟山(HSN)|19|HSN"},{display:"张掖",data:"Zhangye|张掖(YZY)|663|YZY"},{display:"昭通",data:"Zhaotong|昭通(ZAT)|555|ZAT"},{display:"中山",data:"Zhongshan|中山(ZGN)|553|ZGN"},{display:"湛江",data:"Zhanjiang|湛江(ZHA)|547|ZHA"},{display:"中卫",data:"Zhongwei|中卫(ZHY)|556|ZHY"},{display:"张家口",data:"Zhangjiakou|张家口(ZQZ)|550|ZQZ"},{display:"珠海",data:"Zhuhai|珠海(ZUH)|31|ZUH"},{display:"遵义",data:"Zunyi|遵义(ZYI)|558|ZYI"}]}}},ele=online.adressMod[element.attr("id")]=element.regMod("address_poi","1.0",{name:id,source:InitSuggestionSource,jsonpSource:resource[0]+fileName+"_poi_"+online.charset+".js"+window.Utils.releaseno,template:template,isAutoCorrect:!0,relate:{3:relate},jsonpFilter:"//"+window.location.host+"/domestic/poi?channel=1&mode=1&f=2&key=${key}&v=0"});element.bind("keydown",function(e){9==e.keyCode&&(suggResult&&suggResult[0]&&element.value()!=suggResult[0].right&&(element.value(suggResult[0].right),relate.value(suggResult[0].data.split("|")[2]),element.trigger("chage")),suggResult=[])}),ele.method("bind","change",function(e,data){if(suggResult=[],element.is("#LowestPriceDepartCity")||element.is("#LowestPriceArriveCity")){if(""==data.value)return element.value(element.attr("data-oldval")),_fn.CITYCODE.ready(function(code2name,name2code){setTimeout(function(){$("#"+element.attr("mod_address_reference")).value(name2code[element.value()])},30)}),!1;var callback=function(cityName){if(element[0].blur(),element.attr("data-oldval")!=cityName){element.attr("data-oldval",cityName);var Did=$("#HiddenLowestPriceDepartCity").value(),Aid=$("#HiddenLowestPriceArriveCity").value();if(Did=Did.split(",")[0],Aid=Aid.split(",")[0],$("#HiddenLowestPriceDepartCity").value(Did),$("#HiddenLowestPriceArriveCity").value(Aid),Aid==Did||$("#LowestPriceDepartCity").value()==$("#LowestPriceArriveCity").value())return poptip.style.display="block",element.addClass("error"),element.attr("data-oldval",$("#LowestPriceDepartCity").value()),!1;poptip.style.display="none",$("#LowestPriceDepartCity").removeClass("error"),$("#LowestPriceArriveCity").removeClass("error"),window.Utils.Calendar.render()}},cityCode="",cityName="";return void 0==data.items?data.data.split("|")[1]:data.items.name,void 0==data.items?(data=data.data.split("|"),cityName=data[1],cityCode=data.length<=4?data[data.length-1]:data[data.length-2]+","+data[data.length-1]):(cityCode=data.items.code,cityName=data.items.name),_fn.CITYCODE.ready(function(code2name,name2code){if(cityName.indexOf("__")>-1)cityName=cityName.replace("__","").replace("-",""),element.value(cityName),$("#"+element.attr("mod_address_reference")).value(name2code[cityName]),callback(cityName);else if(code2name[cityCode.indexOf(",")?cityCode.split(",")[0]:cityCode]||"GOQ"==cityCode||"ENY"==cityCode)callback(cityName);else{element.attr("data-oldval","");var noAriPort="gb2312"==$.config("charset")?"没有机场":"沒有機場";window.Utils.Calendar.showTip("很抱歉，"+cityName+noAriPort)}}),!1}if(""==data.value)return this.blur(),!1;if(this.value.indexOf("__")>0)for(var city=this.value.replace("__","").replace("-",""),cityData=ele.get("source").data.split("@"),i=0;i<cityData.length;i++)if(city==cityData[i].split("|")[1]){this.value=city,document.getElementById(this.getAttribute("mod_address_reference")).value=cityData[i].split("|")[2];break}1==addressFocusFlag&&focusNextInput(this.id)});var logKey="input=${input}&use=${use}&type=${type}&menuname=${menuname}&status=${status}&mode=${mode}";ele.method("bind","userinput",function(e,data){if("keydown"===data.eventType||"blur"===data.eventType||"filterMousedown"===data.eventType){var td=(data.target&&data.target.getAttribute("log")||"|").split("|"),log={input:data.value,use:data.autoCorrectValue,type:td[0],status:data.status,mode:"keydown"===data.eventType?1:"filterMousedown"===data.eventType?0:2,menuname:td[1]};try{window.$_bf&&!0===window.$_bf.loaded?window.$_bf.tracklog("fltdomestic.poi",$.tmpl.render(logKey,log)):setTimeout(function(){window.$_bf&&!0===window.$_bf.loaded&&window.$_bf.tracklog("fltdomestic.poi",$.tmpl.render(logKey,log))},500)}catch(ex){$.log(ex,"setUTB_EDM")}}})};focusLoader?element.bind("focus",get.bind(this,element)):get(element),setTimeout(function(){window.registerAdressEvent&&window.registerAdressEvent()},30)},register_calendar:function(element){var options={date:ServerTime.toStdDateString(),container:$.container,autoShow:!1,showWeek:!0};element[0].getAttribute("mod_calendar_reference")&&(options.reference="#"+element[0].getAttribute("mod_calendar_reference")),online.canlendarRef[element[0].id]=element.regMod("calendar",version.calendar,{options:options,listeners:{onChange:function(self,date){online.inits[self.id].method("checkValue"),$("#radio_S")[0].checked&&self&&"ReturnDepartDate1TextBox"==self.id&&self.value.isDate()&&$("#radio_D").attr("disSelect",1).trigger("click");var elementId=element.attr("id");"DepartDate1TextBox"!=elementId&&"DepartDate1TextBox2"!=elementId||("DepartDate1TextBox"==elementId?($("#DepartDate1TextBox2").value(date),$("#DepartDate1TextBox2").trigger("change"),online.inits.DepartDate1TextBox2.method("checkValue")):"DepartDate1TextBox2"==elementId&&($("#DepartDate1TextBox").value(date),$("#DepartDate1TextBox").trigger("change"),online.inits.DepartDate1TextBox.method("checkValue")),$("#DepartDate2TextBox").data("minDate",date),$("#ReturnDepartDate1TextBox").data("minDate",date)),focusNextInput(elementId)}}}),element.bind("blur",function(){online.canlendarRef[this.id].method("setWeek",$(this))})},register_lowestCalendar:function(element){($.browser.isIPad||$.browser.isIPhone||$.browser.isIPadUCWeb)&&element.attr("readOnly","readonly");var ele=online.canlendarRef[element[0].id]=element.regMod("lowestPrice_calendar","1.0",{prevEl:getDataKey(element).preElement,sendAjax:!1,showWeek:!0,showPrice:!0,description:getCalenderDescription(element[0].id),onFocus:function(_this,source){var dataKey=getDataKey(element),keyName=dataKey.keyName,isBeyondNinety=!((new Date).addDays(90).getTime()<new Date(_this.selectedDate).getTime()),url="/domestic/ajax/Get90DaysLowestPrice?dcity="+dataKey.dCityValue+"&acity="+dataKey.aCityValue+"&ddate="+(new Date).toFormatString("yyyy-MM-dd")+"&searchType=S&r="+Math.random();!pageConfig.calendarRemouldSwitch||"direct"!=source&&"direct"!=cQuery.storage.get("calenderSource")||(keyName+="direct",url="/domestic/ajax/Get90DaysLowestPrice?dcity="+dataKey.dCityValue+"&acity="+dataKey.aCityValue+"&ddate="+(new Date).toFormatString("yyyy-MM-dd")+"&searchType=S&isDirect=T&r="+Math.random()),!isBeyondNinety||""==dataKey.dCityValue||""==dataKey.aCityValue||_this.data[keyName]||_this.sendAjax||dataKey.dCityValue==dataKey.aCityValue?""!=dataKey.DCityInputVal&&""!=dataKey.ACityInputVal&&_this.data[keyName]&&dataKey.dCityValue!=dataKey.aCityValue&&(getLowestPrice(_this,keyName),handlePriceData(_this,keyName)):(_this.sendAjax=!0,$.ajax(url,{cache:!1,onsuccess:function(data){if(_this.sendAjax=!1,data){var result=eval("("+data.responseText+")");_this.data[keyName]=result.Prices,getLowestPrice(_this,keyName),handlePriceData(_this,keyName)}}}))},onChangeMonth:function(_this){var dataKey=getDataKey(element),keyName=dataKey.keyName,data=null;return""!=dataKey.DCityInputVal&&""!=dataKey.ACityInputVal&&_this.data[keyName]&&(data=_this.data[keyName]),data},onChange:function(win,elem,date){var self=elem.get(0),elementId=elem.attr("id");ubt&&("DepartDate1TextBox"==elementId?ubt.c_de_dtae=(ubt.c_de_dtae||0)+1:ubt.c_re_date=(ubt.c_re_date||0)+1),online.inits[self.id].method("checkValue"),$("#radio_S")[0].checked&&self&&"ReturnDepartDate1TextBox"==self.id&&self.value.isDate()&&$("#radio_D").attr("disSelect",1).trigger("click"),"DepartDate1TextBox"!=elementId&&"DepartDate1TextBox2"!=elementId||("DepartDate1TextBox"==elementId?($("#DepartDate1TextBox2").value(date),$("#DepartDate1TextBox2").trigger("change"),online.inits.DepartDate1TextBox2.method("checkValue")):"DepartDate1TextBox2"==elementId&&($("#DepartDate1TextBox").value(date),$("#DepartDate1TextBox").trigger("change"),online.inits.DepartDate1TextBox.method("checkValue")),$("#DepartDate2TextBox").data("minDate",date),$("#ReturnDepartDate1TextBox").data("minDate",date)),focusNextInput(elementId)},getDayContent:function(date){return $.tmpl('<span class="price">${dateData.Price}</span>',window.lowestPrice[date])},renderBefore:function(){return getDataKey(element)}});element.bind("blur",function(){online.canlendarRef[this.id].method("setWeek",$(this))})},register_notice:function(element){var id=element[0].getAttribute("id"),notice=element[0].getAttribute("mod_notice_tip")||"";online.inits[id]=element.regMod("notice",version.notice,{name:id,tips:notice,selClass:"inputSel"})}});var lowestCalenderConfig={DepartDate1TextBox:{DCity:"DCity1",ACity:"ACity1",preElement:"",DCityInput:"DepartCity1TextBox",ACityInput:"ArriveCity1TextBox",startDate:"DepartDate1TextBox",endDate:"ReturnDepartDate1TextBox",calendarTips:"当前显示的价格为<strong>去程</strong>价格,机票价格变动频繁，以实际成交价为准",type:"start"},ReturnDepartDate1TextBox:{DCity:"ACity1",ACity:"DCity1",preElement:"DepartDate1TextBox",DCityInput:"ArriveCity1TextBox",ACityInput:"DepartCity1TextBox",startDate:"DepartDate1TextBox",endDate:"ReturnDepartDate1TextBox",calendarTips:"当前显示的价格为<strong>返程</strong>价格,机票价格变动频繁，以实际成交价为准",type:"end"},DepartDate1TextBox2:{DCity:"DCity1",ACity:"TransitCity",preElement:"",DCityInput:"DepartCity1TextBox",ACityInput:"TransitCityTextBox",startDate:"DepartDate1TextBox2",endDate:"DepartDate2TextBox",calendarTips:"当前显示的价格为<strong>去程</strong>价格,机票价格变动频繁，以实际成交价为准",type:"start"},DepartDate2TextBox:{DCity:"TransitCity",ACity:"ACity1",preElement:"DepartDate1TextBox2",DCityInput:"TransitCityTextBox",ACityInput:"ArriveCity1TextBox",startDate:"DepartDate1TextBox2",endDate:"DepartDate2TextBox",calendarTips:"当前显示的价格为<strong>去程</strong>价格,机票价格变动频繁，以实际成交价为准",type:"end"}};$.mod.multiLoad(version,function(){online.registerAll();var elem=$("#s_voyage_tip_fly");elem.length&&"1"!=elem.attr("jmpinit")&&(elem.attr("jmpinit","1"),elem.regMod("jmp","1.1",{options:{css:{minWidth:"590"},type:"jmp_text",position:"bottomLeft-topLeft",classNames:{boxType:"jmp_text"},showArrow:!1,template:"#jmp_text_fly"}})),$(document).regMod("jmp","1.1",{options:{showArrow:!1,type:"jmp_text",css:"maxWidth:'480px'",classNames:{boxType:"jmp_box"}}}),$(document).regMod("sideBar","2.0",{url:{feedBackURL:"http://my.ctrip.com/uxp/Community/CommunityAdvice.aspx?productType=1",liveChatURL:"http://livechat.ctrip.com/livechat/Login.aspx?GroupCode=FlightBookLocal&exinfo=1109|kefu&AsFrom=1|"+online.IndexJsTip.sideBar},title:{}})}),window.online=online,online.validateObj=online.getValidate();var ConIsPadbrowser=$.browser.isIPad||$.browser.isIPhone||$.browser.isIPadUCWeb;ConIsPadbrowser?($("#DepartDate1TextBox").bind("change",function(){$("#radio_S")[0].checked&&(addressFocusFlag=!1)}),$("#ReturnDepartDate1TextBox").bind("change",function(){$("#radio_D")[0].checked&&(addressFocusFlag=!1)})):$("html").bind("mousedown",function(){addressFocusFlag=!1,setTimeout(function(){addressFocusFlag=!0})}),$("#search_box .search-title h3").bind("click",function(){return $(this).hasClass("find-tit")&&!0!==$(this).data("isInit")?void(location.href="//flights.ctrip.com/fuzzy#ctm_ref=ctr_nav_dom_flt_fz_pgs"):$(this).hasClass("intl-tit")?void(location.href="//flights.ctrip.com/international/"):void($(this).siblings().length&&($(this).addClass("current").siblings().removeClass("current"),$("#search_box").find(".search-filter").eq($(this).attr("data-index")).show().siblings().hide()))})});var sliderAnimate=function(cont,next,prev,childTag,pageWidth,pageItemLen){cont.css("-moz-transition","none"),cont.css("-webkit-transition","none"),cont.css("-ms-transition","none"),cont.css("transition","none"),cont[0].style.marginLeft="0px",cont.parent().get(0).scrollLeft=0;var animate=function(val,callback){setTimeout(function(){window.Utils.animate(cont[0],"marginLeft",val,400,callback)},20)};next.unbind("click").bind("click",function(e){e.preventDefault(),animate(-pageWidth+"px",function(){var listItem=cont.find(childTag);try{for(var i=0;i<pageItemLen;i++)cont.append(listItem[i])}catch(ex){}cont[0].style.marginLeft="0px"})}),prev.unbind("click").bind("click",function(e){e.preventDefault(),cont.css("-moz-transition","none"),cont.css("-webkit-transition","none"),cont.css("-ms-transition","none"),cont.css("transition","none");var listItem=cont.find(childTag);try{for(var i=1;i<=pageItemLen;i++)cont.prepend(listItem.get(-i))}catch(ex){}cont[0].style.marginLeft=-pageWidth+"px",animate("0px",function(){})})},RecommendContainer=$("#HomePageRecommendContainer");if(RecommendContainer.find(".rec_box a").each(function(item,key){var href=item.attr("href");href.indexOf("#ctm_ref")>-1&&(href=href.substr(0,href.indexOf("#ctm_ref"))),item.attr("href",href+"#ctm_ref=fld_hp_btm_def_i_"+(parseInt(key,10)+1))}),document.addEventListener){initAnimate(parseInt($(document.body).css("width"))<=1250);var timer=!1;$(window).bind("resize",function(){timer&&clearTimeout(timer),timer=setTimeout(function(){initAnimate(parseInt($(document.body).css("width"))<=1250)},400)})}else initAnimate(window.screen.width<=1250);var $radio=$(":radio[name=dynamicType]"),$div=$("#divSearchByFlightNumber,#divSearchByCity");$radio.bind("click",function(){var k=parseInt($(this).value(),10);$div.get(1-k).style.display="none",$div.get(k).style.display="block",this.checked=!0})[0].checked=!0,$radio.each(function(radio){radio.parent().bind("click",function(ev){$(ev.target).is("label")&&radio.trigger("click")})});var _search=function(searchType){if(1==searchType){var invalidNumber=$("#sInvalidNumber")[0],flightInput=$("#iFlightNumber")[0],num=flightInput.value;if(!num)return invalidNumber.innerHTML="请输入航班号",$div.get(0).className="dynamic_number dynamic_wrong",invalidNumber.style.display="",void document.getElementById("iFlightNumber").focus();if(!/^([a-zA-Z]|\d){2}\d{1,4}$/.test(num))return invalidNumber.innerHTML="无效航班号",$div.get(0).className="dynamic_number dynamic_wrong",invalidNumber.style.display="",void document.getElementById("iFlightNumber").focus();$div.get(0).className="dynamic_number",window.open("/actualtime/fno-"+num.toLowerCase()+"/","_blank")}else if(2==searchType){var departCityCode=$("#DCityCodeFlightSearch")[0].value.replace(",","_"),arriveCityCode=$("#ACityCodeFlightSearch")[0].value.replace(",","_");if("中文/拼音"==$("#iDepartCity").val())return void ShowValidateSeachSee("iDepartCity",0);if("中文/拼音"==$("#iArriveCity").val())return void ShowValidateSeachSee("iArriveCity",1);if($("#iArriveCity").val()==$("#iDepartCity").val())return void ShowValidateSeachSee("iDepartCity",2);window.open("/actualtime/"+departCityCode.toLowerCase()+"-"+arriveCityCode.toLowerCase()+"/","_blank")}};if(window.SearchSeeoffAndLandingInfo=_search,void 0!==$){var ubt={},key="flt_inland_search_home";if(window.IndexCalendarClickUbt={wholeCalenderaction:0,directCalenderaction:0},0!==key.length)void 0===window.__bfi&&(window.__bfi=[]),$(document).bind("mousedown",function(e){try{var key=$(e.target).attr("data-ubt")||$(e.target).parent("a").attr("data-ubt")||$(e.target).parent("label").attr("data-ubt")||$(e.target).parents("a").attr("data-ubt")}catch(e){}key&&(ubt[key]=1+(ubt[key]||0))}),$(window).bind("beforeunload",function(){ubt.ABValue={"160224_fld_lowfq":$("#LowFrequenceEdition").value()},ubt.uid=$("#user_id").value(),ubt.IsLowFrequency=$("#IsLowFrequence").value(),ubt.traveller="true"==($("#MemberInterestModule")?$("#MemberInterestModule").value().toLowerCase():""),ubt.travellerclick=ubt.travellerclick?ubt.travellerclick:0;var corb=0;$("#HasChild").attr("checked")&&(corb|=1),$("#HasBaby").attr("checked")&&(corb|=2),ubt.CorB=corb;var wholeCalenderaction=window.IndexCalendarClickUbt.wholeCalenderaction+(ubt.wholeCalenderaction||0),directCalenderaction=window.IndexCalendarClickUbt.directCalenderaction+(ubt.directCalenderaction||0);wholeCalenderaction>0&&(ubt.wholeCalenderaction=wholeCalenderaction),directCalenderaction>0&&(ubt.directCalenderaction=directCalenderaction),window.__bfi.push(["_tracklog",key,$.stringifyJSON(ubt)])}),document.all&&!document.addEventListener&&$LAB.script({src:WebResourcePath+"/release/dest/ltie9.min.js?releaseNo="+window.ReleaseNo,charset:"utf-8"})}}(window,cQuery,online);